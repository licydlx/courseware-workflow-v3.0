window.__require=function t(e,i,n){function o(s,r){if(!i[s]){if(!e[s]){var l=s.split("/");if(l=l[l.length-1],!e[l]){var c="function"==typeof __require&&__require;if(!r&&c)return c(l,!0);if(a)return a(l,!0);throw new Error("Cannot find module '"+s+"'")}s=l}var h=i[s]={exports:{}};e[s][0].call(h.exports,function(t){return o(e[s][1][t]||t)},h,h.exports,t,e,i,n)}return i[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<n.length;s++)o(n[s]);return o}({"choose-model01-v1":[function(t,e,i){"use strict";cc._RF.push(e,"cd05919cBRDMbpAcmU8if2h","choose-model01-v1");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=this&&this.__decorate||function(t,e,i,n){var o,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,i,s):o(e,i))||s);return a>3&&s&&Object.defineProperty(e,i,s),s},s=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,a){function s(t){try{l(n.next(t))}catch(e){a(e)}}function r(t){try{l(n.throw(t))}catch(e){a(e)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(s,r)}l((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var i,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(t){return function(e){return l([t,e])}}function l(a){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(r){a=[6,r],n=0}finally{i=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var l=window.GlobalData.sample,c=l.loadBundle,h=l.loadPrefab,u=l.loadResource,p=cc._decorator,d=p.ccclass,f=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._options=[],e._cache={},e._answer=0,e._state={},e}return o(e,t),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){this.updateUi(this._state,t),this._state=t,this.mergeState()},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this._worldRoot=cc.find("Canvas").parent,this._view.y=(fgui.GRoot.inst.height-this._view.height)/2,this._view.x=(fgui.GRoot.inst.width-this._view.width)/2,fgui.GRoot.inst.addChild(this._view),this._c1=this._view.getController("c1"),this._c2=this._view.getController("c2"),this._c2&&(this._c2.selectedIndex=1,this._c2.selectedIndex=0),this._submit=this._view.getChild("submit").asButton,this._submit&&this._submit.on(fgui.Event.CLICK,this._clickSubmit,this),this._titleTrigger=this._view.getChild("titleTrigger").asLoader,this._titleTrigger&&this._titleTrigger.on(fgui.Event.CLICK,this._clickTitle,this),this._title=this._view.getChild("title").asButton;for(var t=this._view.getChild("optionBox").asGroup,e=0;e<this._view.numChildren;e++)if(this._view.getChildAt(e).group==t){var i=this._view.getChildAt(e).asButton;i.on(fgui.Event.CLICK,this._clickOption,this),this._options.push(i)}this._state={option:0,title:!1,submit:!1,checkAnswer:!1,answer:!1},this.disableForbidHandle();var n=this._worldRoot.getChildByName("feedback");n&&n.destroy()},e.prototype.init=function(t){return s(this,void 0,void 0,function(){var e,i,n,o,a,s,l,u,p,d,f,_,g,b,m,w;return r(this,function(r){switch(r.label){case 0:for(p in e=t.pathConfig,i=t.model,n=t.components,o=e.packageName,a=i.uiPath,s=i.config,l=s.answer,u=s.ae,this._view=fgui.UIPackage.createObject(o,a).asCom,u)u[p]&&(this[p]={},u[p].component&&(this[p].component=fgui.UIPackage.createObject(o,u[p].component).asCom),u[p].pos&&(this[p].pos=u[p].pos));if(l&&(this._answer=l),!n)return[3,5];for(f in d=[],n)d.push(f);_=0,r.label=1;case 1:return _<d.length?(g=d[_],b=""+e.remoteUrl+e.componentBundlePath+n[g].bundleName,[4,c(b)]):[3,5];case 2:return m=r.sent(),[4,h(m,n[g].prefabName)];case 3:w=r.sent(),this[g]=w,r.label=4;case 4:return _++,[3,1];case 5:return[2]}})})},e.prototype._clickTitle=function(){var t=globalThis._.cloneDeep(this._state);t.title=!0,this.updateState(t)},e.prototype._clickOption=function(t){var e=globalThis._.cloneDeep(this._state),i=fgui.GObject.cast(t.currentTarget),n=this._options.findIndex(function(t){return t==i});e.option=n+1,this.updateState(e)},e.prototype._clickSubmit=function(){var t=globalThis._.cloneDeep(this._state);t.answer=t.option==this._answer,t.submit=!0,this.updateState(t)},e.prototype.getState=function(t){this.updateState(t)},e.prototype.updateState=function(t){globalThis._.isEqual(this._state,t)||(this.state=t)},e.prototype.updateUi=function(t,e){globalThis._.isEqual(t.option,e.option)||(this._c1.selectedIndex=e.option),globalThis._.isEqual(t.title,e.title)||this.playTitle(e.title),globalThis._.isEqual(t.submit,e.submit)||e.submit&&(e.option?this.afterSubmit():this.onHandleGuide()),globalThis._.isEqual(t.checkAnswer,e.checkAnswer)||e.checkAnswer&&this.answerFeedback(e.answer)},e.prototype.playTitle=function(t){return s(this,void 0,void 0,function(){var e,i,n,o=this;return r(this,function(a){switch(a.label){case 0:return this._c2.selectedIndex=t?1:0,t?(cc.audioEngine.stopAll(),this.forbidHandle(),e=fgui.UIPackage.getItemByURL(this._title._sound),[4,u(e.file,cc.AudioClip)]):[3,2];case 1:return i=a.sent(),n=cc.audioEngine.play(i,!1,1),cc.audioEngine.setFinishCallback(n,function(){var t=globalThis._.cloneDeep(o._state);t.title=!1,o.updateState(t)}),[3,3];case 2:this.disableForbidHandle(),a.label=3;case 3:return[2]}})})},e.prototype.answerFeedback=function(t){var e=this;if(this.feedback){var i=globalThis._.cloneDeep(this._state),n=cc.instantiate(this.feedback);n.x=960,n.y=540,n.getComponent(cc.Component).init(t),n.parent=cc.find("Canvas").parent,setTimeout(function(){n.destroy(),i.submit=!1,i.checkAnswer=!1,e.updateState(i)},2e3)}},e.prototype.afterSubmit=function(){var t=this,e=globalThis._.cloneDeep(this._state);e.answer=e.option==this._answer,e.answer?this._view.getTransition("t0").play(function(){e.submit=!1,e.checkAnswer=!0,t.updateState(e)},1):(e.submit=!1,e.checkAnswer=!0,this.updateState(e))},e.prototype.onHandleGuide=function(){var t=this;if(this.handleGuide){var e=globalThis._.cloneDeep(this._state);fgui.GRoot.inst.addChild(this.handleGuide.component),this.handleGuide.pos?(this.handleGuide.component.x=(fgui.GRoot.inst.width-this.handleGuide.component.width)/2+this.handleGuide.pos.x,this.handleGuide.component.y=(fgui.GRoot.inst.height-this.handleGuide.component.height)/2+this.handleGuide.pos.y):this.handleGuide.component.y=(fgui.GRoot.inst.height-this.handleGuide.component.height)/2,this.handleGuide.component.getTransition("t0").play(function(){fgui.GRoot.inst.removeChild(t.handleGuide.component),e.submit=!1,t.updateState(e)},2)}},e.prototype.forbidHandle=function(){if(!this._worldRoot.getChildByName("handleMask")){var t=new cc.Node("handleMask");t.addComponent(cc.BlockInputEvents),t.parent=this._worldRoot,t.width=1920,t.height=1080,t.x=960,t.y=540}},e.prototype.disableForbidHandle=function(){var t=this._worldRoot.getChildByName("handleMask");t&&t.destroy()},e.prototype.registerState=function(){window.GlobalData.sample.registerState&&window.GlobalData.sample.registerState.call(this)},e.prototype.relieveState=function(){window.GlobalData.sample.relieveState&&window.GlobalData.sample.relieveState.call(this)},e.prototype.mergeState=function(){window.GlobalData.sample.mergeState&&window.GlobalData.sample.mergeState.call(this)},e.prototype.onEnable=function(){this.registerState()},e.prototype.onDisable=function(){this.relieveState(),cc.audioEngine.stopAll()},a([d],e)}(cc.Component));i.default=f,cc._RF.pop()},{}],"choose-model02-v1":[function(t,e,i){"use strict";cc._RF.push(e,"41ef5ejRahHr5aGeE9q9lTi","choose-model02-v1");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=this&&this.__decorate||function(t,e,i,n){var o,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,i,s):o(e,i))||s);return a>3&&s&&Object.defineProperty(e,i,s),s},s=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,a){function s(t){try{l(n.next(t))}catch(e){a(e)}}function r(t){try{l(n.throw(t))}catch(e){a(e)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(s,r)}l((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var i,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(t){return function(e){return l([t,e])}}function l(a){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(r){a=[6,r],n=0}finally{i=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var l=window.GlobalData.sample,c=l.loadBundle,h=l.loadPrefab,u=l.loadResource,p=cc._decorator,d=p.ccclass,f=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._options=[],e._cache={},e._answer=0,e._state={},e}return o(e,t),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){this.updateUi(this._state,t),this._state=t,this.mergeState()},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this._worldRoot=cc.find("Canvas").parent,this._view.y=(fgui.GRoot.inst.height-this._view.height)/2,this._view.x=(fgui.GRoot.inst.width-this._view.width)/2,fgui.GRoot.inst.addChild(this._view),this._c1=this._view.getController("c1"),this._c2=this._view.getController("c2"),this._c2&&(this._c2.selectedIndex=1,this._c2.selectedIndex=0),this._submit=this._view.getChild("submit").asButton,this._submit&&this._submit.on(fgui.Event.CLICK,this._clickSubmit,this),this._titleTrigger=this._view.getChild("titleTrigger").asLoader,this._titleTrigger&&this._titleTrigger.on(fgui.Event.CLICK,this._clickTitle,this),this._title=this._view.getChild("title").asButton;for(var t=this._view.getChild("optionBox").asGroup,e=0;e<this._view.numChildren;e++)if(this._view.getChildAt(e).group==t){var i=this._view.getChildAt(e).asButton;i.on(fgui.Event.CLICK,this._clickOption,this),this._options.push(i)}this._state={option:null,title:!1,submit:!1,checkAnswer:!1,answer:!1},this.disableForbidHandle();var n=this._worldRoot.getChildByName("feedback");n&&n.destroy()},e.prototype.init=function(t){return s(this,void 0,void 0,function(){var e,i,n,o,a,s,l,u,p,d,f,_,g,b,m,w,y;return r(this,function(r){switch(r.label){case 0:for(d in e=t.pathConfig,i=t.model,n=t.components,o=e.packageName,a=i.uiPath,s=i.config,l=s.answer,u=s.type,p=s.ae,this._view=fgui.UIPackage.createObject(o,a).asCom,p)p[d]&&(this[d]={},p[d].component&&(this[d].component=fgui.UIPackage.createObject(o,p[d].component).asCom),p[d].pos&&(this[d].pos=p[d].pos));if(l&&(this._answer=l),u&&(this._type=u),!n)return[3,5];for(_ in f=[],n)f.push(_);g=0,r.label=1;case 1:return g<f.length?(b=f[g],m=""+e.remoteUrl+e.componentBundlePath+n[b].bundleName,[4,c(m)]):[3,5];case 2:return w=r.sent(),[4,h(w,n[b].prefabName)];case 3:y=r.sent(),this[b]=y,r.label=4;case 4:return g++,[3,1];case 5:return[2]}})})},e.prototype._clickTitle=function(){var t=globalThis._.cloneDeep(this._state);t.title=!0,this.updateState(t)},e.prototype._clickOption=function(t){var e=globalThis._.cloneDeep(this._state),i=fgui.GObject.cast(t.currentTarget),n=this._options.findIndex(function(t){return t==i});e.option=e.option===n?null:n,this.updateState(e)},e.prototype._clickSubmit=function(){var t=globalThis._.cloneDeep(this._state);t.answer=t.option==this._answer,t.submit=!0,this.updateState(t)},e.prototype.getState=function(t){this.updateState(t)},e.prototype.updateState=function(t){globalThis._.isEqual(this._state,t)||(this.state=t)},e.prototype.updateUi=function(t,e){globalThis._.isEqual(t.option,e.option)||((e.option||0===e.option)&&((t.option||0===t.option)&&this.selectEffect(!1,t.option),this.selectEffect(!0,e.option)),null===e.option&&(t.option||0===t.option)&&this.selectEffect(!1,t.option)),globalThis._.isEqual(t.title,e.title)||this.playTitle(e.title),globalThis._.isEqual(t.submit,e.submit)||e.submit&&(e.option||0===e.option?this.afterSubmit():this.onHandleGuide()),globalThis._.isEqual(t.checkAnswer,e.checkAnswer)||e.checkAnswer&&this.answerFeedback(e.answer)},e.prototype.selectEffect=function(t,e){var i=this._options[e],n=i.getChild("border"),o=i.getChild("arrow"),a=i.getChild("spine");t?(n.alpha=1,o.alpha=1,this._type||(a.animationName=a.animationName.slice(0,-1)+2),"01"==this._type&&(a.animationName=a.animationName.slice(0,-1)+4,setTimeout(function(){a.animationName=a.animationName.slice(0,-1)+1,o.alpha=0},5e3))):(n.alpha=0,o.alpha=0,this._type||a.animationName.slice(a.animationName.length-1,a.animationName.length)&&(a.animationName=a.animationName.slice(0,-1)+3))},e.prototype.playTitle=function(t){return s(this,void 0,void 0,function(){var e,i,n,o=this;return r(this,function(a){switch(a.label){case 0:return this._c2.selectedIndex=t?1:0,t?(cc.audioEngine.stopAll(),this.forbidHandle(),e=fgui.UIPackage.getItemByURL(this._title._sound),[4,u(e.file,cc.AudioClip)]):[3,2];case 1:return i=a.sent(),n=cc.audioEngine.play(i,!1,1),cc.audioEngine.setFinishCallback(n,function(){var t=globalThis._.cloneDeep(o._state);t.title=!1,o.updateState(t)}),[3,3];case 2:this.disableForbidHandle(),a.label=3;case 3:return[2]}})})},e.prototype.answerFeedback=function(t){var e=this;if(this.feedback){var i=globalThis._.cloneDeep(this._state),n=cc.instantiate(this.feedback);n.x=960,n.y=540,n.getComponent(cc.Component).init(t),n.parent=cc.find("Canvas").parent,setTimeout(function(){n.destroy(),i.submit=!1,i.checkAnswer=!1,e.updateState(i)},2e3)}},e.prototype.afterSubmit=function(){var t=globalThis._.cloneDeep(this._state);t.answer=t.option==this._answer,t.submit=!1,t.checkAnswer=!0,this.updateState(t)},e.prototype.onHandleGuide=function(){var t=this;if(this.handleGuide){var e=globalThis._.cloneDeep(this._state);fgui.GRoot.inst.addChild(this.handleGuide.component),this.handleGuide.pos?(this.handleGuide.component.x=(fgui.GRoot.inst.width-this.handleGuide.component.width)/2+this.handleGuide.pos.x,this.handleGuide.component.y=(fgui.GRoot.inst.height-this.handleGuide.component.height)/2+this.handleGuide.pos.y):this.handleGuide.component.y=(fgui.GRoot.inst.height-this.handleGuide.component.height)/2,this.handleGuide.component.getTransition("t0").play(function(){fgui.GRoot.inst.removeChild(t.handleGuide.component),e.submit=!1,t.updateState(e)},2)}},e.prototype.forbidHandle=function(){if(!this._worldRoot.getChildByName("handleMask")){var t=new cc.Node("handleMask");t.addComponent(cc.BlockInputEvents),t.parent=this._worldRoot,t.width=1920,t.height=1080,t.x=960,t.y=540}},e.prototype.disableForbidHandle=function(){var t=this._worldRoot.getChildByName("handleMask");t&&t.destroy()},e.prototype.registerState=function(){window.GlobalData.sample.registerState&&window.GlobalData.sample.registerState.call(this)},e.prototype.relieveState=function(){window.GlobalData.sample.relieveState&&window.GlobalData.sample.relieveState.call(this)},e.prototype.mergeState=function(){window.GlobalData.sample.mergeState&&window.GlobalData.sample.mergeState.call(this)},e.prototype.onEnable=function(){this.registerState()},e.prototype.onDisable=function(){this.relieveState(),cc.audioEngine.stopAll()},a([d],e)}(cc.Component));i.default=f,cc._RF.pop()},{}]},{},["choose-model01-v1","choose-model02-v1"]);