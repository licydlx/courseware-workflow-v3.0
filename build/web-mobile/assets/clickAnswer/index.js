window.__require=function t(e,i,n){function r(s,a){if(!i[s]){if(!e[s]){var l=s.split("/");if(l=l[l.length-1],!e[l]){var h="function"==typeof __require&&__require;if(!a&&h)return h(l,!0);if(o)return o(l,!0);throw new Error("Cannot find module '"+s+"'")}s=l}var u=i[s]={exports:{}};e[s][0].call(u.exports,function(t){return r(e[s][1][t]||t)},u,u.exports,t,e,i,n)}return i[s].exports}for(var o="function"==typeof __require&&__require,s=0;s<n.length;s++)r(n[s]);return r}({"clickAnswer-model01-v1":[function(t,e,i){"use strict";cc._RF.push(e,"5424aSAddlL8rVGcxjgry3C","clickAnswer-model01-v1");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0}),window.GlobalData.utils.pointBelongArea;var s=cc._decorator,a=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._grids=[],e._answer=0,e._state={},e}return r(e,t),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){this._state=t,this.updateUi(this._state),this.mergeState()},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this._view.y=(fgui.GRoot.inst.height-this._view.height)/2,fgui.GRoot.inst.addChild(this._view),this._c1=this._view.getController("c1"),this._submit=this._view.getChild("submit").asButton,this._submit.on(fgui.Event.CLICK,this._clickSubmit,this),this._trigger=this._view.getChild("triggerBtn").asButton,this._trigger.on(fgui.Event.CLICK,this._clickTrigger,this),this._btnBox=this._view.getChild("btnBox").asButton,this._btnBox.on(fgui.Event.CLICK,this._clickLibra,this);for(var t=this._btnBox.getChild("grids").asGroup,e=0;e<this._btnBox.numChildren;e++)if(this._btnBox.getChildAt(e).group==t){var i=this._btnBox.getChildAt(e).asLoader;this._grids.push(i)}this._state={drops:0,submit:!1,answer:!1}},e.prototype.init=function(t){var e=t.Package,i=t.GComponent,n=t.config.answer;this._view=fgui.UIPackage.createObject(e,i).asCom,this._handleGuide01=fgui.UIPackage.createObject(e,"handleGuide01").asCom,this._lineBlink01=fgui.UIPackage.createObject(e,"lineBlink01").asCom,n&&(this._answer=n)},e.prototype._clickLibra=function(){var t=globalThis._.cloneDeep(this._state),e=this._grids.findIndex(function(t){return null===t.url});0!==e&&(this._grids[-1==e?this._grids.length-1:e-1].url=null,t.drops=t.drops-1,t.answer=t.drops===this._answer,this.updateState(t))},e.prototype._clickTrigger=function(){var t=globalThis._.cloneDeep(this._state),e=this._trigger.getChild("icon").asLoader,i=this._grids.find(function(t){return null===t.url});i&&(i.url=e.url,t.drops=t.drops+1),t.answer=t.drops===this._answer,this.updateState(t)},e.prototype._clickSubmit=function(){var t=globalThis._.cloneDeep(this._state);t.answer=t.drops===this._answer,t.submit=!0,this.updateState(t)},e.prototype.getState=function(t){this.updateState(t)},e.prototype.updateState=function(t){globalThis._.isEqual(this._state,t)||(this.state=t)},e.prototype.updateUi=function(t){for(var e=0;e<this._grids.length;e++){var i=this._grids[e];if(t.drops>e){if(!i.url){var n=this._trigger.getChild("icon").asLoader;i.url=n.url}}else i.url&&(i.url=null)}this._c1.selectedIndex=t.drops,t.submit&&(t.drops?t.answer:this.handleGuide())},e.prototype.libraHint=function(){var t=this;fgui.GRoot.inst.addChild(this._lineBlink01),this._lineBlink01.y=(fgui.GRoot.inst.height-this._lineBlink01.height)/2,this._lineBlink01.getTransition("t0").play(function(){fgui.GRoot.inst.removeChild(t._lineBlink01)})},e.prototype.handleGuide=function(){var t=this,e=globalThis._.cloneDeep(this._state);fgui.GRoot.inst.addChild(this._handleGuide01),this._handleGuide01.y=(fgui.GRoot.inst.height-this._handleGuide01.height)/2,this._handleGuide01.getTransition("t0").play(function(){fgui.GRoot.inst.removeChild(t._handleGuide01),e.submit=!1,t.updateState(e)},2)},e.prototype.registerState=function(){window.GlobalData.sample.registerState&&window.GlobalData.sample.registerState.call(this)},e.prototype.relieveState=function(){window.GlobalData.sample.relieveState&&window.GlobalData.sample.relieveState.call(this)},e.prototype.mergeState=function(){window.GlobalData.sample.mergeState&&window.GlobalData.sample.mergeState.call(this)},e.prototype.onEnable=function(){this.registerState()},e.prototype.onDisable=function(){this.relieveState()},o([a],e)}(cc.Component));i.default=l,cc._RF.pop()},{}]},{},["clickAnswer-model01-v1"]);