{
    "sourceFile": "assets/prefabLibrary/models/t4-model/t4-05-model/t4-05-model-v7.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 141,
            "patches": [
                {
                    "date": 1625476565451,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1625476575914,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -84,9 +84,9 @@\n             this._c1.selectedIndex = 1;\r\n             this._c1.selectedIndex = 0;\r\n         }\r\n \r\n-        let pointGroup = this._view.getChild(\"n101\").asGroup;\r\n+        let pointGroup = this._view.getChild(\"point\").asGroup;\r\n         for (let i = 0; i < this._view.numChildren; i++) {\r\n             if (this._view.getChildAt(i).group == pointGroup) {\r\n                 let img = this._view.getChildAt(i).asImage;\r\n                 let temp = {\r\n"
                },
                {
                    "date": 1625476775018,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -368,9 +368,9 @@\n                     console.log(this._allPointRect);\r\n                     console.log(this._curTouchesPos);\r\n \r\n                     let temp = {};\r\n-                    if (this._allPointRect[0].isContains && this._allPointRect[1].isContains) {\r\n+                    if (this._allPointRect[0].isContains && this._allPointRect[2].isContains) {\r\n \r\n                         if (this._allPointRect[0].isPointInner && this._allPointRect[1].isPointInner) {\r\n \r\n                             console.log('===== 线段 =====');\r\n"
                },
                {
                    "date": 1625476780177,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -370,9 +370,9 @@\n \r\n                     let temp = {};\r\n                     if (this._allPointRect[0].isContains && this._allPointRect[2].isContains) {\r\n \r\n-                        if (this._allPointRect[0].isPointInner && this._allPointRect[1].isPointInner) {\r\n+                        if (this._allPointRect[0].isPointInner && this._allPointRect[2].isPointInner) {\r\n \r\n                             console.log('===== 线段 =====');\r\n                             //线段\r\n                             let pointMidChang = 426;\r\n"
                },
                {
                    "date": 1625476824923,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -384,9 +384,9 @@\n                             temp['chang'] = pointMidChang;\r\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line1'] = temp;\r\n \r\n-                        } else if (this._allPointRect[1].limitQiMinx && this._allPointRect[0].limitEndMaxx) {\r\n+                        } else if (this._allPointRect[0].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n \r\n                             console.log('===== 直线 =====');\r\n                             // 直线\r\n                             temp['QiX'] = 542;\r\n@@ -397,9 +397,9 @@\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line1'] = temp;\r\n \r\n-                        } else if (this._allPointRect[1].limitQiMinx && !this._allPointRect[0].limitEndMaxx) {\r\n+                        } else if (this._allPointRect[0].limitQiMinx && !this._allPointRect[2].limitEndMaxx) {\r\n \r\n                             console.log('===== 左点超出射线 =====')\r\n \r\n                             temp['QiX'] = 542;\r\n@@ -422,9 +422,9 @@\n                             state.allTouchLinesPos['line1'] = temp;\r\n \r\n \r\n \r\n-                        } else if (!this._allPointRect[1].limitQiMinx && this._allPointRect[0].limitEndMaxx) {\r\n+                        } else if (!this._allPointRect[0].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n \r\n                             console.log('===== 右点超出的射线 =====');\r\n                             // 右点超出的射线\r\n \r\n"
                },
                {
                    "date": 1625476846123,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -421,9 +421,8 @@\n \r\n                             state.allTouchLinesPos['line1'] = temp;\r\n \r\n \r\n-\r\n                         } else if (!this._allPointRect[0].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n \r\n                             console.log('===== 右点超出的射线 =====');\r\n                             // 右点超出的射线\r\n"
                },
                {
                    "date": 1625477090673,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -374,16 +374,16 @@\n                         if (this._allPointRect[0].isPointInner && this._allPointRect[2].isPointInner) {\r\n \r\n                             console.log('===== 线段 =====');\r\n                             //线段\r\n-                            let pointMidChang = 426;\r\n-                            temp['QiX'] = 542;\r\n-                            temp['QiY'] = 647;\r\n+                            let pointMidChang = 306;\r\n+                            temp['QiX'] = 787;\r\n+                            temp['QiY'] = 498;\r\n                             temp['angle'] = 0;\r\n                             temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = 0;\r\n                             temp['chang'] = pointMidChang;\r\n-                            temp['result'] = false;\r\n+                            temp['result'] = true;\r\n                             state.allTouchLinesPos['line1'] = temp;\r\n \r\n                         } else if (this._allPointRect[0].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n \r\n"
                },
                {
                    "date": 1625477101048,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -381,9 +381,9 @@\n                             temp['angle'] = 0;\r\n                             temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = 0;\r\n                             temp['chang'] = pointMidChang;\r\n-                            temp['result'] = true;\r\n+                            temp['result'] = false;\r\n                             state.allTouchLinesPos['line1'] = temp;\r\n \r\n                         } else if (this._allPointRect[0].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n \r\n"
                },
                {
                    "date": 1625477138754,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -388,10 +388,10 @@\n                         } else if (this._allPointRect[0].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n \r\n                             console.log('===== 直线 =====');\r\n                             // 直线\r\n-                            temp['QiX'] = 542;\r\n-                            temp['QiY'] = 647;\r\n+                            temp['QiX'] = 787;\r\n+                            temp['QiY'] = 498;\r\n                             temp['angle'] = 0;\r\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n                             temp['chaoInterQiY'] = 0;\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n"
                },
                {
                    "date": 1625477179379,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -401,10 +401,10 @@\n                         } else if (this._allPointRect[0].limitQiMinx && !this._allPointRect[2].limitEndMaxx) {\r\n \r\n                             console.log('===== 左点超出射线 =====')\r\n \r\n-                            temp['QiX'] = 542;\r\n-                            temp['QiY'] = 647;\r\n+                            temp['QiX'] = 787;\r\n+                            temp['QiY'] = 498;\r\n                             temp['angle'] = 0;\r\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n                             temp['chaoInterQiY'] = 0;\r\n \r\n"
                },
                {
                    "date": 1625477214040,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -406,9 +406,8 @@\n                             temp['QiY'] = 498;\r\n                             temp['angle'] = 0;\r\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n                             temp['chaoInterQiY'] = 0;\r\n-\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             ;\r\n                             if (this._allPointRect[0].isPointInner) {\r\n \r\n"
                },
                {
                    "date": 1625477303594,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -408,17 +408,10 @@\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n                             temp['chaoInterQiY'] = 0;\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             ;\r\n-                            if (this._allPointRect[0].isPointInner) {\r\n+                            temp['result'] = false;\r\n \r\n-                                temp['result'] = true;\r\n-\r\n-                            } else {\r\n-\r\n-                                temp['result'] = false;\r\n-                            }\r\n-\r\n                             state.allTouchLinesPos['line1'] = temp;\r\n \r\n \r\n                         } else if (!this._allPointRect[0].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n"
                },
                {
                    "date": 1625477309679,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -407,9 +407,8 @@\n                             temp['angle'] = 0;\r\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n                             temp['chaoInterQiY'] = 0;\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n-                            ;\r\n                             temp['result'] = false;\r\n \r\n                             state.allTouchLinesPos['line1'] = temp;\r\n \r\n"
                },
                {
                    "date": 1625477326973,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -408,19 +408,18 @@\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n                             temp['chaoInterQiY'] = 0;\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = false;\r\n-\r\n                             state.allTouchLinesPos['line1'] = temp;\r\n \r\n \r\n                         } else if (!this._allPointRect[0].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n \r\n                             console.log('===== 右点超出的射线 =====');\r\n                             // 右点超出的射线\r\n \r\n-                            temp['QiX'] = 542;\r\n-                            temp['QiY'] = 647;\r\n+                            temp['QiX'] = 787;\r\n+                            temp['QiY'] = 498;\r\n                             temp['angle'] = 0;\r\n                             temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = 0;\r\n \r\n"
                },
                {
                    "date": 1625477502774,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -427,8 +427,67 @@\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line1'] = temp;\r\n \r\n                         }\r\n+                    } if (this._allPointRect[0].isContains && this._allPointRect[2].isContains) {\r\n+\r\n+                        if (this._allPointRect[0].isPointInner && this._allPointRect[2].isPointInner) {\r\n+\r\n+                            console.log('===== 线段 =====');\r\n+                            //线段\r\n+                            let pointMidChang = 306;\r\n+                            temp['QiX'] = 787;\r\n+                            temp['QiY'] = 498;\r\n+                            temp['angle'] = 0;\r\n+                            temp['chaoInterQiX'] = 0;\r\n+                            temp['chaoInterQiY'] = 0;\r\n+                            temp['chang'] = pointMidChang;\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line1'] = temp;\r\n+\r\n+                        } else if (this._allPointRect[0].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n+\r\n+                            console.log('===== 直线 =====');\r\n+                            // 直线\r\n+                            temp['QiX'] = 787;\r\n+                            temp['QiY'] = 498;\r\n+                            temp['angle'] = 0;\r\n+                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n+                            temp['chaoInterQiY'] = 0;\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line1'] = temp;\r\n+\r\n+                        } else if (this._allPointRect[0].limitQiMinx && !this._allPointRect[2].limitEndMaxx) {\r\n+\r\n+                            console.log('===== 左点超出射线 =====')\r\n+\r\n+                            temp['QiX'] = 787;\r\n+                            temp['QiY'] = 498;\r\n+                            temp['angle'] = 0;\r\n+                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n+                            temp['chaoInterQiY'] = 0;\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line1'] = temp;\r\n+\r\n+\r\n+                        } else if (!this._allPointRect[0].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n+\r\n+                            console.log('===== 右点超出的射线 =====');\r\n+                            // 右点超出的射线\r\n+\r\n+                            temp['QiX'] = 787;\r\n+                            temp['QiY'] = 498;\r\n+                            temp['angle'] = 0;\r\n+                            temp['chaoInterQiX'] = 0;\r\n+                            temp['chaoInterQiY'] = 0;\r\n+\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line1'] = temp;\r\n+\r\n+                        }\r\n                     }\r\n                 }\r\n \r\n                 setTimeout(() => {\r\n"
                },
                {
                    "date": 1625477559544,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -427,9 +427,9 @@\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line1'] = temp;\r\n \r\n                         }\r\n-                    } if (this._allPointRect[0].isContains && this._allPointRect[2].isContains) {\r\n+                    } if (this._allPointRect[0].isContains && this._allPointRect[1].isContains) {\r\n \r\n                         if (this._allPointRect[0].isPointInner && this._allPointRect[2].isPointInner) {\r\n \r\n                             console.log('===== 线段 =====');\r\n"
                },
                {
                    "date": 1625477567865,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -427,11 +427,11 @@\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line1'] = temp;\r\n \r\n                         }\r\n-                    } if (this._allPointRect[0].isContains && this._allPointRect[1].isContains) {\r\n+                    } else if (this._allPointRect[0].isContains && this._allPointRect[1].isContains) {\r\n \r\n-                        if (this._allPointRect[0].isPointInner && this._allPointRect[2].isPointInner) {\r\n+                        if (this._allPointRect[0].isPointInner && this._allPointRect[1].isPointInner) {\r\n \r\n                             console.log('===== 线段 =====');\r\n                             //线段\r\n                             let pointMidChang = 306;\r\n"
                },
                {
                    "date": 1625477722638,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -427,18 +427,19 @@\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line1'] = temp;\r\n \r\n                         }\r\n+\r\n                     } else if (this._allPointRect[0].isContains && this._allPointRect[1].isContains) {\r\n \r\n                         if (this._allPointRect[0].isPointInner && this._allPointRect[1].isPointInner) {\r\n \r\n                             console.log('===== 线段 =====');\r\n                             //线段\r\n-                            let pointMidChang = 306;\r\n+                            let pointMidChang = 230;\r\n                             temp['QiX'] = 787;\r\n                             temp['QiY'] = 498;\r\n-                            temp['angle'] = 0;\r\n+                            temp['angle'] = 45;\r\n                             temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = 0;\r\n                             temp['chang'] = pointMidChang;\r\n                             temp['result'] = false;\r\n"
                },
                {
                    "date": 1625477742272,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -442,9 +442,9 @@\n                             temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = 0;\r\n                             temp['chang'] = pointMidChang;\r\n                             temp['result'] = false;\r\n-                            state.allTouchLinesPos['line1'] = temp;\r\n+                            state.allTouchLinesPos['line2'] = temp;\r\n \r\n                         } else if (this._allPointRect[0].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n \r\n                             console.log('===== 直线 =====');\r\n@@ -455,9 +455,9 @@\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n                             temp['chaoInterQiY'] = 0;\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = false;\r\n-                            state.allTouchLinesPos['line1'] = temp;\r\n+                            state.allTouchLinesPos['line2'] = temp;\r\n \r\n                         } else if (this._allPointRect[0].limitQiMinx && !this._allPointRect[2].limitEndMaxx) {\r\n \r\n                             console.log('===== 左点超出射线 =====')\r\n@@ -468,9 +468,9 @@\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n                             temp['chaoInterQiY'] = 0;\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = false;\r\n-                            state.allTouchLinesPos['line1'] = temp;\r\n+                            state.allTouchLinesPos['line2'] = temp;\r\n \r\n \r\n                         } else if (!this._allPointRect[0].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n \r\n@@ -484,9 +484,9 @@\n                             temp['chaoInterQiY'] = 0;\r\n \r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = false;\r\n-                            state.allTouchLinesPos['line1'] = temp;\r\n+                            state.allTouchLinesPos['line2'] = temp;\r\n \r\n                         }\r\n                     }\r\n                 }\r\n"
                },
                {
                    "date": 1625477790144,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -450,9 +450,9 @@\n                             console.log('===== 直线 =====');\r\n                             // 直线\r\n                             temp['QiX'] = 787;\r\n                             temp['QiY'] = 498;\r\n-                            temp['angle'] = 0;\r\n+                            temp['angle'] = 45;\r\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n                             temp['chaoInterQiY'] = 0;\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = false;\r\n"
                },
                {
                    "date": 1625477804623,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -454,9 +454,9 @@\n                             temp['angle'] = 45;\r\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n                             temp['chaoInterQiY'] = 0;\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n-                            temp['result'] = false;\r\n+                            temp['result'] = true;\r\n                             state.allTouchLinesPos['line2'] = temp;\r\n \r\n                         } else if (this._allPointRect[0].limitQiMinx && !this._allPointRect[2].limitEndMaxx) {\r\n \r\n"
                },
                {
                    "date": 1625477816207,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -394,9 +394,9 @@\n                             temp['angle'] = 0;\r\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n                             temp['chaoInterQiY'] = 0;\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n-                            temp['result'] = false;\r\n+                            temp['result'] = true;\r\n                             state.allTouchLinesPos['line1'] = temp;\r\n \r\n                         } else if (this._allPointRect[0].limitQiMinx && !this._allPointRect[2].limitEndMaxx) {\r\n \r\n"
                },
                {
                    "date": 1625477883103,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -452,9 +452,9 @@\n                             temp['QiX'] = 787;\r\n                             temp['QiY'] = 498;\r\n                             temp['angle'] = 45;\r\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n-                            temp['chaoInterQiY'] = 0;\r\n+                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];;\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n                             state.allTouchLinesPos['line2'] = temp;\r\n \r\n"
                },
                {
                    "date": 1625477943424,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -444,9 +444,9 @@\n                             temp['chang'] = pointMidChang;\r\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line2'] = temp;\r\n \r\n-                        } else if (this._allPointRect[0].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n+                        } else if (this._allPointRect[0].limitQiMinx && this._allPointRect[1].limitEndMaxx) {\r\n \r\n                             console.log('===== 直线 =====');\r\n                             // 直线\r\n                             temp['QiX'] = 787;\r\n@@ -457,9 +457,9 @@\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n                             state.allTouchLinesPos['line2'] = temp;\r\n \r\n-                        } else if (this._allPointRect[0].limitQiMinx && !this._allPointRect[2].limitEndMaxx) {\r\n+                        } else if (this._allPointRect[0].limitQiMinx && !this._allPointRect[1].limitEndMaxx) {\r\n \r\n                             console.log('===== 左点超出射线 =====')\r\n \r\n                             temp['QiX'] = 787;\r\n"
                },
                {
                    "date": 1625478013221,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -452,9 +452,9 @@\n                             temp['QiX'] = 787;\r\n                             temp['QiY'] = 498;\r\n                             temp['angle'] = 45;\r\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n-                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];;\r\n+                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n                             state.allTouchLinesPos['line2'] = temp;\r\n \r\n@@ -465,9 +465,9 @@\n                             temp['QiX'] = 787;\r\n                             temp['QiY'] = 498;\r\n                             temp['angle'] = 0;\r\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n-                            temp['chaoInterQiY'] = 0;\r\n+                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line2'] = temp;\r\n \r\n"
                },
                {
                    "date": 1625478027655,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -463,9 +463,9 @@\n                             console.log('===== 左点超出射线 =====')\r\n \r\n                             temp['QiX'] = 787;\r\n                             temp['QiY'] = 498;\r\n-                            temp['angle'] = 0;\r\n+                            temp['angle'] = 45;\r\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n                             temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = false;\r\n"
                },
                {
                    "date": 1625478131568,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -471,16 +471,16 @@\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line2'] = temp;\r\n \r\n \r\n-                        } else if (!this._allPointRect[0].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n+                        } else if (!this._allPointRect[0].limitQiMinx && this._allPointRect[1].limitEndMaxx) {\r\n \r\n                             console.log('===== 右点超出的射线 =====');\r\n                             // 右点超出的射线\r\n \r\n                             temp['QiX'] = 787;\r\n                             temp['QiY'] = 498;\r\n-                            temp['angle'] = 0;\r\n+                            temp['angle'] = 45;\r\n                             temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = 0;\r\n \r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n"
                },
                {
                    "date": 1625478171125,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -487,8 +487,67 @@\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line2'] = temp;\r\n \r\n                         }\r\n+                    } else if (this._allPointRect[0].isContains && this._allPointRect[1].isContains) {\r\n+\r\n+                        if (this._allPointRect[0].isPointInner && this._allPointRect[1].isPointInner) {\r\n+\r\n+                            console.log('===== 线段 =====');\r\n+                            //线段\r\n+                            let pointMidChang = 230;\r\n+                            temp['QiX'] = 787;\r\n+                            temp['QiY'] = 498;\r\n+                            temp['angle'] = 45;\r\n+                            temp['chaoInterQiX'] = 0;\r\n+                            temp['chaoInterQiY'] = 0;\r\n+                            temp['chang'] = pointMidChang;\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line2'] = temp;\r\n+\r\n+                        } else if (this._allPointRect[0].limitQiMinx && this._allPointRect[1].limitEndMaxx) {\r\n+\r\n+                            console.log('===== 直线 =====');\r\n+                            // 直线\r\n+                            temp['QiX'] = 787;\r\n+                            temp['QiY'] = 498;\r\n+                            temp['angle'] = 45;\r\n+                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n+                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = true;\r\n+                            state.allTouchLinesPos['line2'] = temp;\r\n+\r\n+                        } else if (this._allPointRect[0].limitQiMinx && !this._allPointRect[1].limitEndMaxx) {\r\n+\r\n+                            console.log('===== 左点超出射线 =====')\r\n+\r\n+                            temp['QiX'] = 787;\r\n+                            temp['QiY'] = 498;\r\n+                            temp['angle'] = 45;\r\n+                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n+                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line2'] = temp;\r\n+\r\n+\r\n+                        } else if (!this._allPointRect[0].limitQiMinx && this._allPointRect[1].limitEndMaxx) {\r\n+\r\n+                            console.log('===== 右点超出的射线 =====');\r\n+                            // 右点超出的射线\r\n+\r\n+                            temp['QiX'] = 787;\r\n+                            temp['QiY'] = 498;\r\n+                            temp['angle'] = 45;\r\n+                            temp['chaoInterQiX'] = 0;\r\n+                            temp['chaoInterQiY'] = 0;\r\n+\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line2'] = temp;\r\n+\r\n+                        }\r\n                     }\r\n                 }\r\n \r\n                 setTimeout(() => {\r\n"
                },
                {
                    "date": 1625478191519,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -487,11 +487,11 @@\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line2'] = temp;\r\n \r\n                         }\r\n-                    } else if (this._allPointRect[0].isContains && this._allPointRect[1].isContains) {\r\n+                    } else if (this._allPointRect[0].isContains && this._allPointRect[3].isContains) {\r\n \r\n-                        if (this._allPointRect[0].isPointInner && this._allPointRect[1].isPointInner) {\r\n+                        if (this._allPointRect[0].isPointInner && this._allPointRect[3].isPointInner) {\r\n \r\n                             console.log('===== 线段 =====');\r\n                             //线段\r\n                             let pointMidChang = 230;\r\n@@ -503,9 +503,9 @@\n                             temp['chang'] = pointMidChang;\r\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line2'] = temp;\r\n \r\n-                        } else if (this._allPointRect[0].limitQiMinx && this._allPointRect[1].limitEndMaxx) {\r\n+                        } else if (this._allPointRect[0].limitQiMinx && this._allPointRect[3].limitEndMaxx) {\r\n \r\n                             console.log('===== 直线 =====');\r\n                             // 直线\r\n                             temp['QiX'] = 787;\r\n@@ -516,9 +516,9 @@\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n                             state.allTouchLinesPos['line2'] = temp;\r\n \r\n-                        } else if (this._allPointRect[0].limitQiMinx && !this._allPointRect[1].limitEndMaxx) {\r\n+                        } else if (this._allPointRect[0].limitQiMinx && !this._allPointRect[3].limitEndMaxx) {\r\n \r\n                             console.log('===== 左点超出射线 =====')\r\n \r\n                             temp['QiX'] = 787;\r\n@@ -530,9 +530,9 @@\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line2'] = temp;\r\n \r\n \r\n-                        } else if (!this._allPointRect[0].limitQiMinx && this._allPointRect[1].limitEndMaxx) {\r\n+                        } else if (!this._allPointRect[0].limitQiMinx && this._allPointRect[3].limitEndMaxx) {\r\n \r\n                             console.log('===== 右点超出的射线 =====');\r\n                             // 右点超出的射线\r\n \r\n"
                },
                {
                    "date": 1625478215100,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -496,9 +496,9 @@\n                             //线段\r\n                             let pointMidChang = 230;\r\n                             temp['QiX'] = 787;\r\n                             temp['QiY'] = 498;\r\n-                            temp['angle'] = 45;\r\n+                            temp['angle'] = -45;\r\n                             temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = 0;\r\n                             temp['chang'] = pointMidChang;\r\n                             temp['result'] = false;\r\n@@ -509,9 +509,9 @@\n                             console.log('===== 直线 =====');\r\n                             // 直线\r\n                             temp['QiX'] = 787;\r\n                             temp['QiY'] = 498;\r\n-                            temp['angle'] = 45;\r\n+                            temp['angle'] = -45;\r\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n                             temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n@@ -522,9 +522,9 @@\n                             console.log('===== 左点超出射线 =====')\r\n \r\n                             temp['QiX'] = 787;\r\n                             temp['QiY'] = 498;\r\n-                            temp['angle'] = 45;\r\n+                            temp['angle'] = -45;\r\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n                             temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = false;\r\n@@ -537,9 +537,9 @@\n                             // 右点超出的射线\r\n \r\n                             temp['QiX'] = 787;\r\n                             temp['QiY'] = 498;\r\n-                            temp['angle'] = 45;\r\n+                            temp['angle'] = -45;\r\n                             temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = 0;\r\n \r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n"
                },
                {
                    "date": 1625478346556,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -501,9 +501,9 @@\n                             temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = 0;\r\n                             temp['chang'] = pointMidChang;\r\n                             temp['result'] = false;\r\n-                            state.allTouchLinesPos['line2'] = temp;\r\n+                            state.allTouchLinesPos['line3'] = temp;\r\n \r\n                         } else if (this._allPointRect[0].limitQiMinx && this._allPointRect[3].limitEndMaxx) {\r\n \r\n                             console.log('===== 直线 =====');\r\n@@ -514,9 +514,9 @@\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n                             temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n-                            state.allTouchLinesPos['line2'] = temp;\r\n+                            state.allTouchLinesPos['line3'] = temp;\r\n \r\n                         } else if (this._allPointRect[0].limitQiMinx && !this._allPointRect[3].limitEndMaxx) {\r\n \r\n                             console.log('===== 左点超出射线 =====')\r\n@@ -527,9 +527,9 @@\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n                             temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = false;\r\n-                            state.allTouchLinesPos['line2'] = temp;\r\n+                            state.allTouchLinesPos['line3'] = temp;\r\n \r\n \r\n                         } else if (!this._allPointRect[0].limitQiMinx && this._allPointRect[3].limitEndMaxx) {\r\n \r\n@@ -543,9 +543,9 @@\n                             temp['chaoInterQiY'] = 0;\r\n \r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = false;\r\n-                            state.allTouchLinesPos['line2'] = temp;\r\n+                            state.allTouchLinesPos['line3'] = temp;\r\n \r\n                         }\r\n                     }\r\n                 }\r\n"
                },
                {
                    "date": 1625478447926,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -494,9 +494,9 @@\n \r\n                             console.log('===== 线段 =====');\r\n                             //线段\r\n                             let pointMidChang = 230;\r\n-                            temp['QiX'] = 787;\r\n+                            temp['QiX'] = 785;\r\n                             temp['QiY'] = 498;\r\n                             temp['angle'] = -45;\r\n                             temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = 0;\r\n"
                },
                {
                    "date": 1625478568914,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -546,8 +546,67 @@\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line3'] = temp;\r\n \r\n                         }\r\n+                    } else if (this._allPointRect[0].isContains && this._allPointRect[3].isContains) {\r\n+\r\n+                        if (this._allPointRect[0].isPointInner && this._allPointRect[3].isPointInner) {\r\n+\r\n+                            console.log('===== 线段 =====');\r\n+                            //线段\r\n+                            let pointMidChang = 230;\r\n+                            temp['QiX'] = 785;\r\n+                            temp['QiY'] = 498;\r\n+                            temp['angle'] = -45;\r\n+                            temp['chaoInterQiX'] = 0;\r\n+                            temp['chaoInterQiY'] = 0;\r\n+                            temp['chang'] = pointMidChang;\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line3'] = temp;\r\n+\r\n+                        } else if (this._allPointRect[0].limitQiMinx && this._allPointRect[3].limitEndMaxx) {\r\n+\r\n+                            console.log('===== 直线 =====');\r\n+                            // 直线\r\n+                            temp['QiX'] = 787;\r\n+                            temp['QiY'] = 498;\r\n+                            temp['angle'] = -45;\r\n+                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n+                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = true;\r\n+                            state.allTouchLinesPos['line3'] = temp;\r\n+\r\n+                        } else if (this._allPointRect[0].limitQiMinx && !this._allPointRect[3].limitEndMaxx) {\r\n+\r\n+                            console.log('===== 左点超出射线 =====')\r\n+\r\n+                            temp['QiX'] = 787;\r\n+                            temp['QiY'] = 498;\r\n+                            temp['angle'] = -45;\r\n+                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n+                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line3'] = temp;\r\n+\r\n+\r\n+                        } else if (!this._allPointRect[0].limitQiMinx && this._allPointRect[3].limitEndMaxx) {\r\n+\r\n+                            console.log('===== 右点超出的射线 =====');\r\n+                            // 右点超出的射线\r\n+\r\n+                            temp['QiX'] = 787;\r\n+                            temp['QiY'] = 498;\r\n+                            temp['angle'] = -45;\r\n+                            temp['chaoInterQiX'] = 0;\r\n+                            temp['chaoInterQiY'] = 0;\r\n+\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line3'] = temp;\r\n+\r\n+                        }\r\n                     }\r\n                 }\r\n \r\n                 setTimeout(() => {\r\n"
                },
                {
                    "date": 1625478635254,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -546,9 +546,9 @@\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line3'] = temp;\r\n \r\n                         }\r\n-                    } else if (this._allPointRect[0].isContains && this._allPointRect[3].isContains) {\r\n+                    } else if (this._allPointRect[1].isContains && this._allPointRect[2].isContains) {\r\n \r\n                         if (this._allPointRect[0].isPointInner && this._allPointRect[3].isPointInner) {\r\n \r\n                             console.log('===== 线段 =====');\r\n"
                },
                {
                    "date": 1625478640871,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -548,9 +548,9 @@\n \r\n                         }\r\n                     } else if (this._allPointRect[1].isContains && this._allPointRect[2].isContains) {\r\n \r\n-                        if (this._allPointRect[0].isPointInner && this._allPointRect[3].isPointInner) {\r\n+                        if (this._allPointRect[1].isPointInner && this._allPointRect[1].isPointInner) {\r\n \r\n                             console.log('===== 线段 =====');\r\n                             //线段\r\n                             let pointMidChang = 230;\r\n"
                },
                {
                    "date": 1625478672052,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -562,9 +562,9 @@\n                             temp['chang'] = pointMidChang;\r\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line3'] = temp;\r\n \r\n-                        } else if (this._allPointRect[0].limitQiMinx && this._allPointRect[3].limitEndMaxx) {\r\n+                        } else if (this._allPointRect[1].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n \r\n                             console.log('===== 直线 =====');\r\n                             // 直线\r\n                             temp['QiX'] = 787;\r\n@@ -575,9 +575,9 @@\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n                             state.allTouchLinesPos['line3'] = temp;\r\n \r\n-                        } else if (this._allPointRect[0].limitQiMinx && !this._allPointRect[3].limitEndMaxx) {\r\n+                        } else if (this._allPointRect[1].limitQiMinx && !this._allPointRect[2].limitEndMaxx) {\r\n \r\n                             console.log('===== 左点超出射线 =====')\r\n \r\n                             temp['QiX'] = 787;\r\n@@ -589,9 +589,9 @@\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line3'] = temp;\r\n \r\n \r\n-                        } else if (!this._allPointRect[0].limitQiMinx && this._allPointRect[3].limitEndMaxx) {\r\n+                        } else if (!this._allPointRect[1].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n \r\n                             console.log('===== 右点超出的射线 =====');\r\n                             // 右点超出的射线\r\n \r\n"
                },
                {
                    "date": 1625478691829,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -560,9 +560,9 @@\n                             temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = 0;\r\n                             temp['chang'] = pointMidChang;\r\n                             temp['result'] = false;\r\n-                            state.allTouchLinesPos['line3'] = temp;\r\n+                            state.allTouchLinesPos['line4'] = temp;\r\n \r\n                         } else if (this._allPointRect[1].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n \r\n                             console.log('===== 直线 =====');\r\n@@ -573,9 +573,9 @@\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n                             temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n-                            state.allTouchLinesPos['line3'] = temp;\r\n+                            state.allTouchLinesPos['line4'] = temp;\r\n \r\n                         } else if (this._allPointRect[1].limitQiMinx && !this._allPointRect[2].limitEndMaxx) {\r\n \r\n                             console.log('===== 左点超出射线 =====')\r\n@@ -586,9 +586,9 @@\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n                             temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = false;\r\n-                            state.allTouchLinesPos['line3'] = temp;\r\n+                            state.allTouchLinesPos['line4'] = temp;\r\n \r\n \r\n                         } else if (!this._allPointRect[1].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n \r\n@@ -602,9 +602,9 @@\n                             temp['chaoInterQiY'] = 0;\r\n \r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = false;\r\n-                            state.allTouchLinesPos['line3'] = temp;\r\n+                            state.allTouchLinesPos['line4'] = temp;\r\n \r\n                         }\r\n                     }\r\n                 }\r\n"
                },
                {
                    "date": 1625478709378,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -548,9 +548,9 @@\n \r\n                         }\r\n                     } else if (this._allPointRect[1].isContains && this._allPointRect[2].isContains) {\r\n \r\n-                        if (this._allPointRect[1].isPointInner && this._allPointRect[1].isPointInner) {\r\n+                        if (this._allPointRect[1].isPointInner && this._allPointRect[2].isPointInner) {\r\n \r\n                             console.log('===== 线段 =====');\r\n                             //线段\r\n                             let pointMidChang = 230;\r\n"
                },
                {
                    "date": 1625478724313,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -553,10 +553,10 @@\n \r\n                             console.log('===== 线段 =====');\r\n                             //线段\r\n                             let pointMidChang = 230;\r\n-                            temp['QiX'] = 785;\r\n-                            temp['QiY'] = 498;\r\n+                            temp['QiX'] = 942;\r\n+                            temp['QiY'] = 654;\r\n                             temp['angle'] = -45;\r\n                             temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = 0;\r\n                             temp['chang'] = pointMidChang;\r\n"
                },
                {
                    "date": 1625478832776,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -555,9 +555,9 @@\n                             //线段\r\n                             let pointMidChang = 230;\r\n                             temp['QiX'] = 942;\r\n                             temp['QiY'] = 654;\r\n-                            temp['angle'] = -45;\r\n+                            temp['angle'] = -47;\r\n                             temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = 0;\r\n                             temp['chang'] = pointMidChang;\r\n                             temp['result'] = false;\r\n"
                },
                {
                    "date": 1625478884876,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -566,11 +566,11 @@\n                         } else if (this._allPointRect[1].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n \r\n                             console.log('===== 直线 =====');\r\n                             // 直线\r\n-                            temp['QiX'] = 787;\r\n-                            temp['QiY'] = 498;\r\n-                            temp['angle'] = -45;\r\n+                            temp['QiX'] = 942;\r\n+                            temp['QiY'] = 654;\r\n+                            temp['angle'] = -47;\r\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n                             temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n"
                },
                {
                    "date": 1625478902719,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -579,11 +579,11 @@\n                         } else if (this._allPointRect[1].limitQiMinx && !this._allPointRect[2].limitEndMaxx) {\r\n \r\n                             console.log('===== 左点超出射线 =====')\r\n \r\n-                            temp['QiX'] = 787;\r\n-                            temp['QiY'] = 498;\r\n-                            temp['angle'] = -45;\r\n+                            temp['QiX'] = 942;\r\n+                            temp['QiY'] = 654;\r\n+                            temp['angle'] = -47;\r\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n                             temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = false;\r\n@@ -594,11 +594,11 @@\n \r\n                             console.log('===== 右点超出的射线 =====');\r\n                             // 右点超出的射线\r\n \r\n-                            temp['QiX'] = 787;\r\n-                            temp['QiY'] = 498;\r\n-                            temp['angle'] = -45;\r\n+                            temp['QiX'] = 942;\r\n+                            temp['QiY'] = 654;\r\n+                            temp['angle'] = -47;\r\n                             temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = 0;\r\n \r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n"
                },
                {
                    "date": 1625479040615,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -605,8 +605,67 @@\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line4'] = temp;\r\n \r\n                         }\r\n+                    } else if (this._allPointRect[1].isContains && this._allPointRect[2].isContains) {\r\n+\r\n+                        if (this._allPointRect[1].isPointInner && this._allPointRect[2].isPointInner) {\r\n+\r\n+                            console.log('===== 线段 =====');\r\n+                            //线段\r\n+                            let pointMidChang = 230;\r\n+                            temp['QiX'] = 942;\r\n+                            temp['QiY'] = 654;\r\n+                            temp['angle'] = -47;\r\n+                            temp['chaoInterQiX'] = 0;\r\n+                            temp['chaoInterQiY'] = 0;\r\n+                            temp['chang'] = pointMidChang;\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line4'] = temp;\r\n+\r\n+                        } else if (this._allPointRect[1].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n+\r\n+                            console.log('===== 直线 =====');\r\n+                            // 直线\r\n+                            temp['QiX'] = 942;\r\n+                            temp['QiY'] = 654;\r\n+                            temp['angle'] = -47;\r\n+                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n+                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = true;\r\n+                            state.allTouchLinesPos['line4'] = temp;\r\n+\r\n+                        } else if (this._allPointRect[1].limitQiMinx && !this._allPointRect[2].limitEndMaxx) {\r\n+\r\n+                            console.log('===== 左点超出射线 =====')\r\n+\r\n+                            temp['QiX'] = 942;\r\n+                            temp['QiY'] = 654;\r\n+                            temp['angle'] = -47;\r\n+                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n+                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line4'] = temp;\r\n+\r\n+\r\n+                        } else if (!this._allPointRect[1].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n+\r\n+                            console.log('===== 右点超出的射线 =====');\r\n+                            // 右点超出的射线\r\n+\r\n+                            temp['QiX'] = 942;\r\n+                            temp['QiY'] = 654;\r\n+                            temp['angle'] = -47;\r\n+                            temp['chaoInterQiX'] = 0;\r\n+                            temp['chaoInterQiY'] = 0;\r\n+\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line4'] = temp;\r\n+\r\n+                        }\r\n                     }\r\n                 }\r\n \r\n                 setTimeout(() => {\r\n"
                },
                {
                    "date": 1625479052441,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -605,9 +605,9 @@\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line4'] = temp;\r\n \r\n                         }\r\n-                    } else if (this._allPointRect[1].isContains && this._allPointRect[2].isContains) {\r\n+                    } else if (this._allPointRect[2].isContains && this._allPointRect[2].isContains) {\r\n \r\n                         if (this._allPointRect[1].isPointInner && this._allPointRect[2].isPointInner) {\r\n \r\n                             console.log('===== 线段 =====');\r\n"
                },
                {
                    "date": 1625479063974,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -605,9 +605,9 @@\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line4'] = temp;\r\n \r\n                         }\r\n-                    } else if (this._allPointRect[2].isContains && this._allPointRect[2].isContains) {\r\n+                    } else if (this._allPointRect[2].isContains && this._allPointRect[3].isContains) {\r\n \r\n                         if (this._allPointRect[1].isPointInner && this._allPointRect[2].isPointInner) {\r\n \r\n                             console.log('===== 线段 =====');\r\n"
                },
                {
                    "date": 1625479080611,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -607,9 +607,9 @@\n \r\n                         }\r\n                     } else if (this._allPointRect[2].isContains && this._allPointRect[3].isContains) {\r\n \r\n-                        if (this._allPointRect[1].isPointInner && this._allPointRect[2].isPointInner) {\r\n+                        if (this._allPointRect[3].isPointInner && this._allPointRect[2].isPointInner) {\r\n \r\n                             console.log('===== 线段 =====');\r\n                             //线段\r\n                             let pointMidChang = 230;\r\n"
                },
                {
                    "date": 1625479087111,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -607,9 +607,9 @@\n \r\n                         }\r\n                     } else if (this._allPointRect[2].isContains && this._allPointRect[3].isContains) {\r\n \r\n-                        if (this._allPointRect[3].isPointInner && this._allPointRect[2].isPointInner) {\r\n+                        if (this._allPointRect[2].isPointInner && this._allPointRect[3].isPointInner) {\r\n \r\n                             console.log('===== 线段 =====');\r\n                             //线段\r\n                             let pointMidChang = 230;\r\n"
                },
                {
                    "date": 1625479155269,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -611,9 +611,9 @@\n                         if (this._allPointRect[2].isPointInner && this._allPointRect[3].isPointInner) {\r\n \r\n                             console.log('===== 线段 =====');\r\n                             //线段\r\n-                            let pointMidChang = 230;\r\n+                            let pointMidChang = 310;\r\n                             temp['QiX'] = 942;\r\n                             temp['QiY'] = 654;\r\n                             temp['angle'] = -47;\r\n                             temp['chaoInterQiX'] = 0;\r\n"
                },
                {
                    "date": 1625479160421,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -614,9 +614,9 @@\n                             //线段\r\n                             let pointMidChang = 310;\r\n                             temp['QiX'] = 942;\r\n                             temp['QiY'] = 654;\r\n-                            temp['angle'] = -47;\r\n+                            temp['angle'] = -90;\r\n                             temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = 0;\r\n                             temp['chang'] = pointMidChang;\r\n                             temp['result'] = false;\r\n"
                },
                {
                    "date": 1625479191013,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -97,8 +97,10 @@\n                     'miny': img.y,\r\n                     'maxy': img.y + img.height,\r\n                     'limitQiMinx': false,\r\n                     'limitEndMaxx': false,\r\n+                    'limitQiMinx': false,\r\n+                    'limitEndMaxx': false,\r\n                     'isPointInner': false\r\n                 };\r\n                 this._allPointRect.push(temp);\r\n             }\r\n"
                },
                {
                    "date": 1625479231986,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -97,10 +97,10 @@\n                     'miny': img.y,\r\n                     'maxy': img.y + img.height,\r\n                     'limitQiMinx': false,\r\n                     'limitEndMaxx': false,\r\n-                    'limitQiMinx': false,\r\n-                    'limitEndMaxx': false,\r\n+                    'limitQiMaxy': false,\r\n+                    'limitEndMiny': false,\r\n                     'isPointInner': false\r\n                 };\r\n                 this._allPointRect.push(temp);\r\n             }\r\n"
                },
                {
                    "date": 1625479356306,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -312,8 +312,36 @@\n \r\n                     this._curTouchesPos[i].y = this._view.height - this._curTouchesPos[i].y;\r\n                 }\r\n \r\n+                let tempArrX = [];\r\n+                tempArrX = this._curTouchesPos;\r\n+                tempArrX.sort(this.comparePosX());\r\n+\r\n+                let tempArrY = [];\r\n+                tempArrY = this._curTouchesPos;\r\n+                tempArrY.sort(this.comparePosY());\r\n+\r\n+                var chaX = Math.abs(tempArrX[tempArrX.length - 1].x - tempArrX[0].x);\r\n+                var chaY = Math.abs(tempArrY[tempArrY.length - 1].y - tempArrY[0].y);\r\n+                let isSortY = false;\r\n+\r\n+                let isValid = true;\r\n+                if (chaX > 400) {\r\n+\r\n+                    console.log('==== sort chaX ====');\r\n+                    this._curTouchesPos.sort(this.comparePosX());\r\n+                    console.log(this._curTouchesPos);\r\n+                } else if (chaX < 150 && chaY > 200) {\r\n+                    isSortY = true;\r\n+                    console.log('==== sort chaY ====');\r\n+                    this._curTouchesPos.sort(this.comparePosY());\r\n+                    console.log(this._curTouchesPos);\r\n+\r\n+                } else {\r\n+                    isValid = false;\r\n+                }\r\n+\r\n                 this._curTouchesPos.sort(this.comparePosX());\r\n \r\n                 for (let i = 0; i < this._allPointRect.length; i++) {\r\n \r\n"
                },
                {
                    "date": 1625479362169,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -340,9 +340,8 @@\n                 } else {\r\n                     isValid = false;\r\n                 }\r\n \r\n-                this._curTouchesPos.sort(this.comparePosX());\r\n \r\n                 for (let i = 0; i < this._allPointRect.length; i++) {\r\n \r\n                     this._allPointRect[i].isContains = false;\r\n"
                },
                {
                    "date": 1625479383628,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -325,24 +325,21 @@\n                 var chaY = Math.abs(tempArrY[tempArrY.length - 1].y - tempArrY[0].y);\r\n                 let isSortY = false;\r\n \r\n                 let isValid = true;\r\n-                if (chaX > 400) {\r\n+                if (chaX > 150) {\r\n \r\n                     console.log('==== sort chaX ====');\r\n                     this._curTouchesPos.sort(this.comparePosX());\r\n                     console.log(this._curTouchesPos);\r\n-                } else if (chaX < 150 && chaY > 200) {\r\n+                } else {\r\n                     isSortY = true;\r\n                     console.log('==== sort chaY ====');\r\n                     this._curTouchesPos.sort(this.comparePosY());\r\n                     console.log(this._curTouchesPos);\r\n \r\n-                } else {\r\n-                    isValid = false;\r\n                 }\r\n \r\n-\r\n                 for (let i = 0; i < this._allPointRect.length; i++) {\r\n \r\n                     this._allPointRect[i].isContains = false;\r\n                     this._allPointRect[i].limitQiMinx = false;\r\n"
                },
                {
                    "date": 1625479714300,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -331,8 +331,9 @@\n                     console.log('==== sort chaX ====');\r\n                     this._curTouchesPos.sort(this.comparePosX());\r\n                     console.log(this._curTouchesPos);\r\n                 } else {\r\n+\r\n                     isSortY = true;\r\n                     console.log('==== sort chaY ====');\r\n                     this._curTouchesPos.sort(this.comparePosY());\r\n                     console.log(this._curTouchesPos);\r\n"
                },
                {
                    "date": 1625479719450,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -324,9 +324,8 @@\n                 var chaX = Math.abs(tempArrX[tempArrX.length - 1].x - tempArrX[0].x);\r\n                 var chaY = Math.abs(tempArrY[tempArrY.length - 1].y - tempArrY[0].y);\r\n                 let isSortY = false;\r\n \r\n-                let isValid = true;\r\n                 if (chaX > 150) {\r\n \r\n                     console.log('==== sort chaX ====');\r\n                     this._curTouchesPos.sort(this.comparePosX());\r\n"
                },
                {
                    "date": 1625479763251,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,903 @@\n+\r\n+/*\r\n+ * @Descripttion: \r\n+ * @version: \r\n+ * @Author: ruzhuan\r\n+ * @Date: 2021-06-08 18:00:00\r\n+ * @LastEditors: ruzhuan\r\n+ * @LastEditTime: 2021-06-08 18:00:00\r\n+ */\r\n+const { loadBundle, loadPrefab, loadResource } = window['GlobalData'].sample;\r\n+const { ccclass, property } = cc._decorator;\r\n+\r\n+@ccclass\r\n+export default class t4_05_model_v6 extends cc.Component {\r\n+    private _worldRoot: cc.Node;\r\n+\r\n+    private _view: fgui.GComponent;\r\n+\r\n+    private _c1: fgui.Controller;\r\n+\r\n+    private _title: fgui.GButton;\r\n+\r\n+    private _titleTrigger: fgui.GLoader;\r\n+\r\n+    private _submitBtn: fgui.GButton;\r\n+\r\n+    private _resetBtn: fgui.GButton;\r\n+\r\n+    private _package: any;\r\n+\r\n+    private _curTouchesPos: any = [];\r\n+\r\n+    private _moveCurPos: cc.Vec2;\r\n+\r\n+    private graphics: cc.Graphics = null;\r\n+\r\n+    private _dragging = false;\r\n+\r\n+    private _scheduleTime = 0.08;\r\n+\r\n+    private _allTouchLinesObj = {};\r\n+\r\n+    private _allOtherTouchLinesObj = {};\r\n+\r\n+    private _allPointRect = [];\r\n+\r\n+    private submitType: any = cc.Enum({\r\n+\r\n+        No: 0,\r\n+        GuideShow: 1,\r\n+        WrongFeed: 2,\r\n+        RightFeed: 3\r\n+    });\r\n+\r\n+    // 远程动态组件\r\n+    private feedback: any;\r\n+\r\n+    private _state = {};\r\n+\r\n+    get state(): any {\r\n+        return this._state;\r\n+    }\r\n+\r\n+    set state(v: any) {\r\n+        this.updateUi(this._state, v);\r\n+        this._state = v;\r\n+        this.mergeState();\r\n+    }\r\n+\r\n+    async onLoad() {\r\n+\r\n+        this._worldRoot = cc.find(\"Canvas\").parent;\r\n+\r\n+        this._view.y = (fgui.GRoot.inst.height - this._view.height) / 2;\r\n+        this._view.x = (fgui.GRoot.inst.width - this._view.width) / 2;\r\n+\r\n+        fgui.GRoot.inst.addChild(this._view);\r\n+\r\n+        this._c1 = this._view.getController(\"c1\");\r\n+\r\n+        // 臨時\r\n+        // bug 初始设置不播放不生效\r\n+        if (this._c1) {\r\n+            this._c1.selectedIndex = 1;\r\n+            this._c1.selectedIndex = 0;\r\n+        }\r\n+\r\n+        let pointGroup = this._view.getChild(\"point\").asGroup;\r\n+        for (let i = 0; i < this._view.numChildren; i++) {\r\n+            if (this._view.getChildAt(i).group == pointGroup) {\r\n+                let img = this._view.getChildAt(i).asImage;\r\n+                let temp = {\r\n+                    'rect': new cc.Rect(img.x, img.y, img.width, img.height),\r\n+                    'isContains': false,\r\n+                    'minx': img.x,\r\n+                    'maxx': img.x + img.width,\r\n+                    'miny': img.y,\r\n+                    'maxy': img.y + img.height,\r\n+                    'limitQiMinx': false,\r\n+                    'limitEndMaxx': false,\r\n+                    'limitQiMaxy': false,\r\n+                    'limitEndMiny': false,\r\n+                    'isPointInner': false\r\n+                };\r\n+                this._allPointRect.push(temp);\r\n+            }\r\n+        }\r\n+\r\n+        this._titleTrigger = this._view.getChild(\"titleTrigger\").asLoader;\r\n+        if (this._titleTrigger) this._titleTrigger.on(fgui.Event.CLICK, this._clickTitle, this);\r\n+\r\n+        this._title = this._view.getChild(\"title\").asButton;\r\n+\r\n+        this._submitBtn = this._view.getChild(\"submit\").asButton;\r\n+        if (this._submitBtn) this._submitBtn.on(fgui.Event.CLICK, this._clickSubmit, this);\r\n+\r\n+        this._resetBtn = this._view.getChild(\"restart\").asButton;\r\n+        this._resetBtn.on(fgui.Event.CLICK, this._clickReset, this);\r\n+\r\n+        this._view.on(cc.Node.EventType.TOUCH_START, this._onDrawStart, this);\r\n+        this._view.on(cc.Node.EventType.TOUCH_MOVE, this._onDrawMove, this);\r\n+        this._view.on(cc.Node.EventType.TOUCH_END, this._onDrawEnd, this);\r\n+\r\n+        let huiNode = new cc.Node('huiNode');\r\n+        huiNode.parent = this._worldRoot;\r\n+\r\n+        this.graphics = huiNode.addComponent(cc.Graphics);\r\n+        this.graphics.lineWidth = 20;\r\n+        this.graphics.lineJoin = cc.Graphics.LineJoin.ROUND;\r\n+        this.graphics.strokeColor = cc.color(255, 0, 0);\r\n+        this.graphics.fillColor = cc.color(255, 0, 0);\r\n+\r\n+        // 初始化state\r\n+        this._state = {\r\n+            title: false,\r\n+            submit: this.submitType.No,\r\n+            touch: \"no\",\r\n+            reset: false,\r\n+            curTouchesPos: cc.Vec2,\r\n+            allTouchLinesPos: {},\r\n+        }\r\n+    }\r\n+\r\n+    async init(data: any) {\r\n+        // 临时 model component json 配置加载\r\n+        let { pathConfig, model, components } = data;\r\n+        let Package = pathConfig.packageName;\r\n+        let GComponent = model.uiPath;\r\n+        let { boxSoundUrl, guidIndex } = model.config;\r\n+        this._package = Package;\r\n+\r\n+        this._view = fgui.UIPackage.createObject(Package, GComponent).asCom;\r\n+\r\n+        if (components) {\r\n+            for (const key in components) {\r\n+                let componentPath: any = `${pathConfig.remoteUrl}${pathConfig.componentBundlePath}${components[key].bundleName}`;\r\n+                let componentBundle: any = await loadBundle(componentPath);\r\n+                let componentPrefab: any = await loadPrefab(componentBundle, components[key].prefabName);\r\n+                this[key] = componentPrefab;\r\n+            }\r\n+        }\r\n+    }\r\n+\r\n+    _onDrawStart(event) {\r\n+        console.log('===== start 111 ====' + event.touch.getLocation());\r\n+\r\n+        let state: any = globalThis._.cloneDeep(this._state);\r\n+        if (state.touch === 'no') {\r\n+            state.touch = 'start';\r\n+            let tempPos = new cc.Vec2(event.touch.getLocation().x, event.touch.getLocation().y);\r\n+            state.curTouchesPos = tempPos;\r\n+            this.updateState(state);\r\n+        }\r\n+    }\r\n+\r\n+    _onDrawMove(event) {\r\n+\r\n+        this._dragging = true;\r\n+        this._moveCurPos = new cc.Vec2(event.touch.getLocation().x, event.touch.getLocation().y);\r\n+    }\r\n+\r\n+    _onDrawEnd(event) {\r\n+\r\n+        this._dragging = false;\r\n+\r\n+        let tempPos = new cc.Vec2(event.touch.getLocation().x, event.touch.getLocation().y);\r\n+        let state: any = globalThis._.cloneDeep(this._state);\r\n+        state.curTouchesPos = tempPos;\r\n+        state.touch = 'end';\r\n+        this.updateState(state);\r\n+    }\r\n+\r\n+\r\n+    // 排序方法\r\n+    comparePosX() {\r\n+        return function (a, b) {\r\n+            var value1 = a.x;\r\n+            var value2 = b.x;\r\n+            return value1 - value2;\r\n+        }\r\n+    }\r\n+\r\n+    // 排序方法\r\n+    comparePosY() {\r\n+        return function (a, b) {\r\n+            var value1 = a.y;\r\n+            var value2 = b.y;\r\n+            return value1 - value2;\r\n+        }\r\n+    }\r\n+\r\n+    private _clickReset(evt: any) {\r\n+        let state: any = globalThis._.cloneDeep(this._state);\r\n+        state.reset = true;\r\n+        this.updateState(state);\r\n+\r\n+    }\r\n+\r\n+    private _clickSubmit(evt: any) {\r\n+\r\n+        let state: any = globalThis._.cloneDeep(this._state);\r\n+\r\n+        if (Object.keys(state.allTouchLinesPos).length === 0) {\r\n+\r\n+            state.submit = this.submitType.GuideShow;\r\n+\r\n+        } else {\r\n+\r\n+            let isAllRight = true;\r\n+            for (let key in state.allTouchLinesPos) {\r\n+\r\n+                if (!state.allTouchLinesPos[key].result) {\r\n+                    isAllRight = false;\r\n+                    break;\r\n+                }\r\n+            }\r\n+            if (isAllRight) {\r\n+                state.submit = this.submitType.RightFeed;\r\n+            } else {\r\n+                state.submit = this.submitType.WrongFeed;\r\n+            }\r\n+        }\r\n+\r\n+        this.updateState(state);\r\n+    }\r\n+\r\n+    private _clickTitle(evt: any) {\r\n+        let state: any = globalThis._.cloneDeep(this._state);\r\n+        state.title = true;\r\n+        this.updateState(state);\r\n+    }\r\n+\r\n+    // 临时\r\n+    // 拖拽定时器\r\n+    dragSchedule() {\r\n+        if (this._dragging) {\r\n+\r\n+            console.log('==== 3333333 拖拽定时器 ======');\r\n+            let state: any = globalThis._.cloneDeep(this._state);\r\n+            state.curTouchesPos = this._moveCurPos;\r\n+            state.touch = \"move\";\r\n+            this.updateState(state);\r\n+        }\r\n+    }\r\n+\r\n+    // 获取状态\r\n+    getState(data: any) {\r\n+        this.updateState(data);\r\n+    }\r\n+\r\n+    // 更新状态层\r\n+    updateState(curState: any) {\r\n+        if (globalThis._.isEqual(this._state, curState)) return;\r\n+        this.state = curState;\r\n+    }\r\n+\r\n+    // 更新ui层\r\n+    updateUi(oldState: any, state: any) {\r\n+\r\n+        if (state.touch == \"start\") {\r\n+\r\n+            this._curTouchesPos.length = 0;\r\n+            this._curTouchesPos.push(state.curTouchesPos);\r\n+            this.graphics.clear();\r\n+\r\n+        } else if (state.touch == \"move\") {\r\n+\r\n+            this._curTouchesPos.push(state.curTouchesPos);\r\n+\r\n+            const MIN_POINT_DISTANCE = 4;\r\n+\r\n+            let worldPos = this.node.convertToWorldSpaceAR(cc.v2(0, 0));\r\n+            this.graphics.moveTo(this._curTouchesPos[0].x - worldPos.x, this._curTouchesPos[0].y - worldPos.y);\r\n+            let lastIndex = 0;\r\n+            for (let i = 1, l = this._curTouchesPos.length; i < l; i++) {\r\n+                if (this._curTouchesPos[i].sub(this._curTouchesPos[lastIndex]).mag() < MIN_POINT_DISTANCE) {\r\n+                    continue;\r\n+                }\r\n+                lastIndex = i;\r\n+                this.graphics.lineTo(this._curTouchesPos[i].x - worldPos.x, this._curTouchesPos[i].y - worldPos.y);\r\n+            }\r\n+            this.graphics.stroke();\r\n+\r\n+        } else if (state.touch == \"end\") {\r\n+\r\n+            this._curTouchesPos.push(state.curTouchesPos);\r\n+\r\n+            this.graphics.clear();\r\n+            if (this._curTouchesPos.length > 0) {\r\n+\r\n+                for (let i = 0; i < this._curTouchesPos.length; i++) {\r\n+\r\n+                    this._curTouchesPos[i].y = this._view.height - this._curTouchesPos[i].y;\r\n+                }\r\n+\r\n+                let tempArrX = [];\r\n+                tempArrX = this._curTouchesPos;\r\n+                tempArrX.sort(this.comparePosX());\r\n+\r\n+                let tempArrY = [];\r\n+                tempArrY = this._curTouchesPos;\r\n+                tempArrY.sort(this.comparePosY());\r\n+\r\n+                var chaX = Math.abs(tempArrX[tempArrX.length - 1].x - tempArrX[0].x);\r\n+                let isSortY = false;\r\n+\r\n+                if (chaX > 150) {\r\n+\r\n+                    console.log('==== sort chaX ====');\r\n+                    this._curTouchesPos.sort(this.comparePosX());\r\n+                    console.log(this._curTouchesPos);\r\n+                } else {\r\n+\r\n+                    isSortY = true;\r\n+                    console.log('==== sort chaY ====');\r\n+                    this._curTouchesPos.sort(this.comparePosY());\r\n+                    console.log(this._curTouchesPos);\r\n+\r\n+                }\r\n+\r\n+                for (let i = 0; i < this._allPointRect.length; i++) {\r\n+\r\n+                    this._allPointRect[i].isContains = false;\r\n+                    this._allPointRect[i].limitQiMinx = false;\r\n+                    this._allPointRect[i].limitEndMaxx = false;\r\n+                    this._allPointRect[i].isPointInner = false;\r\n+                }\r\n+\r\n+                let pointNums = 0;\r\n+                for (let i = 0; i < this._curTouchesPos.length; i++) {\r\n+\r\n+                    for (let j = 0; j < this._allPointRect.length; j++) {\r\n+\r\n+                        if (this._allPointRect[j].rect.contains(this._curTouchesPos[i])) {\r\n+                            this._allPointRect[j].isContains = true;\r\n+                            break;\r\n+                        }\r\n+                    }\r\n+                }\r\n+                for (let i = 0; i < this._allPointRect.length; i++) {\r\n+\r\n+                    if (this._allPointRect[i].isContains) {\r\n+                        pointNums++;\r\n+                        continue;\r\n+                    }\r\n+                }\r\n+\r\n+                console.log('===== 5555 =====' + pointNums);\r\n+\r\n+                if (pointNums >= 2) {\r\n+\r\n+                    for (let i = 0; i < this._allPointRect.length; i++) {\r\n+\r\n+                        if (this._allPointRect[i].rect.contains(this._curTouchesPos[0]) ||\r\n+                            this._allPointRect[i].rect.contains(this._curTouchesPos[this._curTouchesPos.length - 1])) {\r\n+                            this._allPointRect[i].isPointInner = true;\r\n+                        }\r\n+\r\n+                        if (this._allPointRect[i].isContains) {\r\n+\r\n+                            if (this._curTouchesPos[0].x < this._allPointRect[i].minx) {\r\n+\r\n+                                this._allPointRect[i].limitQiMinx = true;\r\n+                            }\r\n+                            if (this._curTouchesPos[this._curTouchesPos.length - 1].x > this._allPointRect[i].maxx) {\r\n+\r\n+                                this._allPointRect[i].limitEndMaxx = true;\r\n+                            }\r\n+                        }\r\n+                    }\r\n+\r\n+                    console.log('===== allPointRect ====');\r\n+                    console.log(this._allPointRect);\r\n+                    console.log(this._curTouchesPos);\r\n+\r\n+                    let temp = {};\r\n+                    if (this._allPointRect[0].isContains && this._allPointRect[2].isContains) {\r\n+\r\n+                        if (this._allPointRect[0].isPointInner && this._allPointRect[2].isPointInner) {\r\n+\r\n+                            console.log('===== 线段 =====');\r\n+                            //线段\r\n+                            let pointMidChang = 306;\r\n+                            temp['QiX'] = 787;\r\n+                            temp['QiY'] = 498;\r\n+                            temp['angle'] = 0;\r\n+                            temp['chaoInterQiX'] = 0;\r\n+                            temp['chaoInterQiY'] = 0;\r\n+                            temp['chang'] = pointMidChang;\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line1'] = temp;\r\n+\r\n+                        } else if (this._allPointRect[0].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n+\r\n+                            console.log('===== 直线 =====');\r\n+                            // 直线\r\n+                            temp['QiX'] = 787;\r\n+                            temp['QiY'] = 498;\r\n+                            temp['angle'] = 0;\r\n+                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n+                            temp['chaoInterQiY'] = 0;\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = true;\r\n+                            state.allTouchLinesPos['line1'] = temp;\r\n+\r\n+                        } else if (this._allPointRect[0].limitQiMinx && !this._allPointRect[2].limitEndMaxx) {\r\n+\r\n+                            console.log('===== 左点超出射线 =====')\r\n+\r\n+                            temp['QiX'] = 787;\r\n+                            temp['QiY'] = 498;\r\n+                            temp['angle'] = 0;\r\n+                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n+                            temp['chaoInterQiY'] = 0;\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line1'] = temp;\r\n+\r\n+\r\n+                        } else if (!this._allPointRect[0].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n+\r\n+                            console.log('===== 右点超出的射线 =====');\r\n+                            // 右点超出的射线\r\n+\r\n+                            temp['QiX'] = 787;\r\n+                            temp['QiY'] = 498;\r\n+                            temp['angle'] = 0;\r\n+                            temp['chaoInterQiX'] = 0;\r\n+                            temp['chaoInterQiY'] = 0;\r\n+\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line1'] = temp;\r\n+\r\n+                        }\r\n+\r\n+                    } else if (this._allPointRect[0].isContains && this._allPointRect[1].isContains) {\r\n+\r\n+                        if (this._allPointRect[0].isPointInner && this._allPointRect[1].isPointInner) {\r\n+\r\n+                            console.log('===== 线段 =====');\r\n+                            //线段\r\n+                            let pointMidChang = 230;\r\n+                            temp['QiX'] = 787;\r\n+                            temp['QiY'] = 498;\r\n+                            temp['angle'] = 45;\r\n+                            temp['chaoInterQiX'] = 0;\r\n+                            temp['chaoInterQiY'] = 0;\r\n+                            temp['chang'] = pointMidChang;\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line2'] = temp;\r\n+\r\n+                        } else if (this._allPointRect[0].limitQiMinx && this._allPointRect[1].limitEndMaxx) {\r\n+\r\n+                            console.log('===== 直线 =====');\r\n+                            // 直线\r\n+                            temp['QiX'] = 787;\r\n+                            temp['QiY'] = 498;\r\n+                            temp['angle'] = 45;\r\n+                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n+                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = true;\r\n+                            state.allTouchLinesPos['line2'] = temp;\r\n+\r\n+                        } else if (this._allPointRect[0].limitQiMinx && !this._allPointRect[1].limitEndMaxx) {\r\n+\r\n+                            console.log('===== 左点超出射线 =====')\r\n+\r\n+                            temp['QiX'] = 787;\r\n+                            temp['QiY'] = 498;\r\n+                            temp['angle'] = 45;\r\n+                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n+                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line2'] = temp;\r\n+\r\n+\r\n+                        } else if (!this._allPointRect[0].limitQiMinx && this._allPointRect[1].limitEndMaxx) {\r\n+\r\n+                            console.log('===== 右点超出的射线 =====');\r\n+                            // 右点超出的射线\r\n+\r\n+                            temp['QiX'] = 787;\r\n+                            temp['QiY'] = 498;\r\n+                            temp['angle'] = 45;\r\n+                            temp['chaoInterQiX'] = 0;\r\n+                            temp['chaoInterQiY'] = 0;\r\n+\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line2'] = temp;\r\n+\r\n+                        }\r\n+                    } else if (this._allPointRect[0].isContains && this._allPointRect[3].isContains) {\r\n+\r\n+                        if (this._allPointRect[0].isPointInner && this._allPointRect[3].isPointInner) {\r\n+\r\n+                            console.log('===== 线段 =====');\r\n+                            //线段\r\n+                            let pointMidChang = 230;\r\n+                            temp['QiX'] = 785;\r\n+                            temp['QiY'] = 498;\r\n+                            temp['angle'] = -45;\r\n+                            temp['chaoInterQiX'] = 0;\r\n+                            temp['chaoInterQiY'] = 0;\r\n+                            temp['chang'] = pointMidChang;\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line3'] = temp;\r\n+\r\n+                        } else if (this._allPointRect[0].limitQiMinx && this._allPointRect[3].limitEndMaxx) {\r\n+\r\n+                            console.log('===== 直线 =====');\r\n+                            // 直线\r\n+                            temp['QiX'] = 787;\r\n+                            temp['QiY'] = 498;\r\n+                            temp['angle'] = -45;\r\n+                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n+                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = true;\r\n+                            state.allTouchLinesPos['line3'] = temp;\r\n+\r\n+                        } else if (this._allPointRect[0].limitQiMinx && !this._allPointRect[3].limitEndMaxx) {\r\n+\r\n+                            console.log('===== 左点超出射线 =====')\r\n+\r\n+                            temp['QiX'] = 787;\r\n+                            temp['QiY'] = 498;\r\n+                            temp['angle'] = -45;\r\n+                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n+                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line3'] = temp;\r\n+\r\n+\r\n+                        } else if (!this._allPointRect[0].limitQiMinx && this._allPointRect[3].limitEndMaxx) {\r\n+\r\n+                            console.log('===== 右点超出的射线 =====');\r\n+                            // 右点超出的射线\r\n+\r\n+                            temp['QiX'] = 787;\r\n+                            temp['QiY'] = 498;\r\n+                            temp['angle'] = -45;\r\n+                            temp['chaoInterQiX'] = 0;\r\n+                            temp['chaoInterQiY'] = 0;\r\n+\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line3'] = temp;\r\n+\r\n+                        }\r\n+                    } else if (this._allPointRect[1].isContains && this._allPointRect[2].isContains) {\r\n+\r\n+                        if (this._allPointRect[1].isPointInner && this._allPointRect[2].isPointInner) {\r\n+\r\n+                            console.log('===== 线段 =====');\r\n+                            //线段\r\n+                            let pointMidChang = 230;\r\n+                            temp['QiX'] = 942;\r\n+                            temp['QiY'] = 654;\r\n+                            temp['angle'] = -47;\r\n+                            temp['chaoInterQiX'] = 0;\r\n+                            temp['chaoInterQiY'] = 0;\r\n+                            temp['chang'] = pointMidChang;\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line4'] = temp;\r\n+\r\n+                        } else if (this._allPointRect[1].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n+\r\n+                            console.log('===== 直线 =====');\r\n+                            // 直线\r\n+                            temp['QiX'] = 942;\r\n+                            temp['QiY'] = 654;\r\n+                            temp['angle'] = -47;\r\n+                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n+                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = true;\r\n+                            state.allTouchLinesPos['line4'] = temp;\r\n+\r\n+                        } else if (this._allPointRect[1].limitQiMinx && !this._allPointRect[2].limitEndMaxx) {\r\n+\r\n+                            console.log('===== 左点超出射线 =====')\r\n+\r\n+                            temp['QiX'] = 942;\r\n+                            temp['QiY'] = 654;\r\n+                            temp['angle'] = -47;\r\n+                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n+                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line4'] = temp;\r\n+\r\n+\r\n+                        } else if (!this._allPointRect[1].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n+\r\n+                            console.log('===== 右点超出的射线 =====');\r\n+                            // 右点超出的射线\r\n+\r\n+                            temp['QiX'] = 942;\r\n+                            temp['QiY'] = 654;\r\n+                            temp['angle'] = -47;\r\n+                            temp['chaoInterQiX'] = 0;\r\n+                            temp['chaoInterQiY'] = 0;\r\n+\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line4'] = temp;\r\n+\r\n+                        }\r\n+                    } else if (this._allPointRect[2].isContains && this._allPointRect[3].isContains) {\r\n+\r\n+                        if (this._allPointRect[2].isPointInner && this._allPointRect[3].isPointInner) {\r\n+\r\n+                            console.log('===== 线段 =====');\r\n+                            //线段\r\n+                            let pointMidChang = 310;\r\n+                            temp['QiX'] = 942;\r\n+                            temp['QiY'] = 654;\r\n+                            temp['angle'] = -90;\r\n+                            temp['chaoInterQiX'] = 0;\r\n+                            temp['chaoInterQiY'] = 0;\r\n+                            temp['chang'] = pointMidChang;\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line4'] = temp;\r\n+\r\n+                        } else if (this._allPointRect[1].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n+\r\n+                            console.log('===== 直线 =====');\r\n+                            // 直线\r\n+                            temp['QiX'] = 942;\r\n+                            temp['QiY'] = 654;\r\n+                            temp['angle'] = -47;\r\n+                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n+                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = true;\r\n+                            state.allTouchLinesPos['line4'] = temp;\r\n+\r\n+                        } else if (this._allPointRect[1].limitQiMinx && !this._allPointRect[2].limitEndMaxx) {\r\n+\r\n+                            console.log('===== 左点超出射线 =====')\r\n+\r\n+                            temp['QiX'] = 942;\r\n+                            temp['QiY'] = 654;\r\n+                            temp['angle'] = -47;\r\n+                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n+                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line4'] = temp;\r\n+\r\n+\r\n+                        } else if (!this._allPointRect[1].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n+\r\n+                            console.log('===== 右点超出的射线 =====');\r\n+                            // 右点超出的射线\r\n+\r\n+                            temp['QiX'] = 942;\r\n+                            temp['QiY'] = 654;\r\n+                            temp['angle'] = -47;\r\n+                            temp['chaoInterQiX'] = 0;\r\n+                            temp['chaoInterQiY'] = 0;\r\n+\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line4'] = temp;\r\n+\r\n+                        }\r\n+                    }\r\n+                }\r\n+\r\n+                setTimeout(() => {\r\n+\r\n+                    let state1: any = globalThis._.cloneDeep(this._state);\r\n+                    state1.touch = 'no';\r\n+                    state1.allTouchLinesPos = state.allTouchLinesPos;\r\n+                    this.updateState(state1);\r\n+\r\n+                }, 20);\r\n+            }\r\n+        }\r\n+\r\n+\r\n+        if (!globalThis._.isEqual(oldState.allTouchLinesPos, state.allTouchLinesPos)) {\r\n+\r\n+            for (let key in this._allTouchLinesObj) {\r\n+                this._allTouchLinesObj[key].removeFromParent();\r\n+            }\r\n+\r\n+            for (let key in state.allTouchLinesPos) {\r\n+\r\n+                let temp = state.allTouchLinesPos[key];\r\n+                let zhiLine = fgui.UIPackage.createObjectFromURL('ui://mgpb39d5xdox2a');\r\n+                this._view.addChild(zhiLine);\r\n+                zhiLine.width = temp['chang'];\r\n+\r\n+                zhiLine.x = temp.QiX - temp.chaoInterQiX;\r\n+                zhiLine.y = temp.QiY - temp.chaoInterQiY;\r\n+\r\n+                zhiLine.rotation = temp.angle;\r\n+                this._allTouchLinesObj[key] = zhiLine;\r\n+            }\r\n+        }\r\n+\r\n+        if (!globalThis._.isEqual(oldState.reset, state.reset)) {\r\n+\r\n+            if (state.reset) {\r\n+\r\n+                for (let key in state.allTouchLinesPos) {\r\n+                    delete state.allTouchLinesPos[key];\r\n+                }\r\n+\r\n+                for (let key in this._allTouchLinesObj) {\r\n+                    this._allTouchLinesObj[key].removeFromParent();\r\n+                }\r\n+\r\n+                for (let key in this._allOtherTouchLinesObj) {\r\n+                    this._allOtherTouchLinesObj[key].removeFromParent();\r\n+                }\r\n+\r\n+                setTimeout(() => {\r\n+\r\n+                    let state1: any = globalThis._.cloneDeep(this._state);\r\n+                    state1.reset = false;\r\n+                    state1.allTouchLinesPos = state.allTouchLinesPos;\r\n+                    this.updateState(state1);\r\n+\r\n+                }, 10);\r\n+\r\n+            }\r\n+\r\n+        }\r\n+\r\n+        if (!globalThis._.isEqual(oldState.submit, state.submit)) {\r\n+\r\n+            if (state.submit === this.submitType.RightFeed) {\r\n+\r\n+                this.answerFeedback(true);\r\n+\r\n+            } else if (state.submit === this.submitType.WrongFeed) {\r\n+\r\n+                this.answerFeedback(false);\r\n+\r\n+            } else if (state.submit === this.submitType.GuideShow) {\r\n+\r\n+                // let keyBtn = this._view.getChild('input1').asButton;\r\n+                // this.handTips2(keyBtn);\r\n+            }\r\n+        }\r\n+\r\n+        if (!globalThis._.isEqual(oldState.title, state.title)) {\r\n+            this.playTitle(state.title);\r\n+        }\r\n+    }\r\n+\r\n+    angle(start, end) {\r\n+        var diff_x = end.x - start.x,\r\n+            diff_y = end.y - start.y;\r\n+        //返回角度,不是弧度\r\n+        return 360 * Math.atan(diff_y / diff_x) / (2 * Math.PI);\r\n+    }\r\n+\r\n+\r\n+    async playTitle(bool: boolean) {\r\n+        this._c1.selectedIndex = bool ? 1 : 0;\r\n+        if (bool) {\r\n+            cc.audioEngine.stopAll();\r\n+            this.forbidHandle();\r\n+            let item = fgui.UIPackage.getItemByURL(this._title[\"_sound\"]);\r\n+            let audio: cc.AudioClip = await loadResource(item.file, cc.AudioClip);\r\n+            let audioId = cc.audioEngine.play(audio, false, 1);\r\n+            cc.audioEngine.setFinishCallback(audioId, () => {\r\n+                let state: any = globalThis._.cloneDeep(this._state);\r\n+                state.title = false;\r\n+                this.updateState(state);\r\n+            });\r\n+        } else {\r\n+            this.disableForbidHandle();\r\n+        }\r\n+    }\r\n+\r\n+    answerFeedback(bool: boolean) {\r\n+        if (!this.feedback) return;\r\n+        let feedback: any = cc.instantiate(this.feedback);\r\n+        feedback.x = 960;\r\n+        feedback.y = 540;\r\n+        let feedbackJs: any = feedback.getComponent(cc.Component);\r\n+        feedbackJs.init(bool);\r\n+        feedback.parent = cc.find(\"Canvas\").parent;\r\n+\r\n+        setTimeout(() => {\r\n+            feedback.destroy();\r\n+            let state: any = globalThis._.cloneDeep(this._state);\r\n+            state.submit = this.submitType.No;\r\n+            this.updateState(state);\r\n+        }, 2000);\r\n+    }\r\n+\r\n+\r\n+    /**\r\n+     * 点击指引\r\n+     * @param obj 点击对象\r\n+     */\r\n+    handTips2(obj: fgui.GObject) {\r\n+        let hand = fgui.UIPackage.createObject(this._package, 'hand');\r\n+        this._view.addChild(hand);\r\n+        let tempX = obj.x;\r\n+        let tempY = obj.y;\r\n+\r\n+        hand.x = tempX;\r\n+        hand.y = tempY;\r\n+\r\n+        cc.tween(hand).to(0.3, {\r\n+            x: tempX - 30,\r\n+            y: tempY - 30\r\n+        }).to(0.3, {\r\n+            x: tempX,\r\n+            y: tempY\r\n+        }).to(0.3, {\r\n+            x: tempX - 30,\r\n+            y: tempY - 30\r\n+        }).to(0.3, {\r\n+            x: tempX,\r\n+            y: tempY\r\n+        }).call(() => {\r\n+            this._view.removeChild(hand);\r\n+            hand = null;\r\n+            let state: any = globalThis._.cloneDeep(this._state);\r\n+            state.submit = this.submitType.No;\r\n+            this.updateState(state)\r\n+        }).start();\r\n+    }\r\n+\r\n+    // 运行时 禁止操作\r\n+    forbidHandle() {\r\n+        console.log('===  运行时 禁止操作 =====');\r\n+        let handleMask = this._worldRoot.getChildByName('handleMask');\r\n+        if (!handleMask) {\r\n+            let handleMask = new cc.Node('handleMask');\r\n+            handleMask.addComponent(cc.BlockInputEvents);\r\n+            handleMask.parent = this._worldRoot;\r\n+            handleMask.width = 1920;\r\n+            handleMask.height = 1080;\r\n+            handleMask.x = 960;\r\n+            handleMask.y = 540;\r\n+        }\r\n+    }\r\n+\r\n+    // 消除禁止\r\n+    disableForbidHandle() {\r\n+        let handleMask = this._worldRoot.getChildByName('handleMask');\r\n+        if (handleMask) handleMask.destroy();\r\n+    }\r\n+\r\n+    // 注册状态，及获取状态的方法\r\n+    registerState() {\r\n+        if (window['GlobalData'].sample.registerState) window['GlobalData'].sample.registerState.call(this);\r\n+    }\r\n+\r\n+    // 解除状态，及获取状态的方法\r\n+    relieveState() {\r\n+        if (window['GlobalData'].sample.relieveState) window['GlobalData'].sample.relieveState.call(this);\r\n+    }\r\n+\r\n+    // 本组件状态合并到全局\r\n+    mergeState() {\r\n+        if (window['GlobalData'].sample.mergeState) window['GlobalData'].sample.mergeState.call(this);\r\n+    }\r\n+\r\n+    onEnable() {\r\n+        this.registerState();\r\n+        this.schedule(this.dragSchedule, this._scheduleTime);\r\n+    }\r\n+\r\n+    onDisable() {\r\n+        this.relieveState();\r\n+        cc.audioEngine.stopAll();\r\n+    }\r\n+}\r\n"
                },
                {
                    "date": 1625479776774,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -900,908 +900,4 @@\n         this.relieveState();\r\n         cc.audioEngine.stopAll();\r\n     }\r\n }\r\n-\r\n-/*\r\n- * @Descripttion: \r\n- * @version: \r\n- * @Author: ruzhuan\r\n- * @Date: 2021-06-08 18:00:00\r\n- * @LastEditors: ruzhuan\r\n- * @LastEditTime: 2021-06-08 18:00:00\r\n- */\r\n-const { loadBundle, loadPrefab, loadResource } = window['GlobalData'].sample;\r\n-const { ccclass, property } = cc._decorator;\r\n-\r\n-@ccclass\r\n-export default class t4_05_model_v6 extends cc.Component {\r\n-    private _worldRoot: cc.Node;\r\n-\r\n-    private _view: fgui.GComponent;\r\n-\r\n-    private _c1: fgui.Controller;\r\n-\r\n-    private _title: fgui.GButton;\r\n-\r\n-    private _titleTrigger: fgui.GLoader;\r\n-\r\n-    private _submitBtn: fgui.GButton;\r\n-\r\n-    private _resetBtn: fgui.GButton;\r\n-\r\n-    private _package: any;\r\n-\r\n-    private _curTouchesPos: any = [];\r\n-\r\n-    private _moveCurPos: cc.Vec2;\r\n-\r\n-    private graphics: cc.Graphics = null;\r\n-\r\n-    private _dragging = false;\r\n-\r\n-    private _scheduleTime = 0.08;\r\n-\r\n-    private _allTouchLinesObj = {};\r\n-\r\n-    private _allOtherTouchLinesObj = {};\r\n-\r\n-    private _allPointRect = [];\r\n-\r\n-    private submitType: any = cc.Enum({\r\n-\r\n-        No: 0,\r\n-        GuideShow: 1,\r\n-        WrongFeed: 2,\r\n-        RightFeed: 3\r\n-    });\r\n-\r\n-    // 远程动态组件\r\n-    private feedback: any;\r\n-\r\n-    private _state = {};\r\n-\r\n-    get state(): any {\r\n-        return this._state;\r\n-    }\r\n-\r\n-    set state(v: any) {\r\n-        this.updateUi(this._state, v);\r\n-        this._state = v;\r\n-        this.mergeState();\r\n-    }\r\n-\r\n-    async onLoad() {\r\n-\r\n-        this._worldRoot = cc.find(\"Canvas\").parent;\r\n-\r\n-        this._view.y = (fgui.GRoot.inst.height - this._view.height) / 2;\r\n-        this._view.x = (fgui.GRoot.inst.width - this._view.width) / 2;\r\n-\r\n-        fgui.GRoot.inst.addChild(this._view);\r\n-\r\n-        this._c1 = this._view.getController(\"c1\");\r\n-\r\n-        // 臨時\r\n-        // bug 初始设置不播放不生效\r\n-        if (this._c1) {\r\n-            this._c1.selectedIndex = 1;\r\n-            this._c1.selectedIndex = 0;\r\n-        }\r\n-\r\n-        let pointGroup = this._view.getChild(\"point\").asGroup;\r\n-        for (let i = 0; i < this._view.numChildren; i++) {\r\n-            if (this._view.getChildAt(i).group == pointGroup) {\r\n-                let img = this._view.getChildAt(i).asImage;\r\n-                let temp = {\r\n-                    'rect': new cc.Rect(img.x, img.y, img.width, img.height),\r\n-                    'isContains': false,\r\n-                    'minx': img.x,\r\n-                    'maxx': img.x + img.width,\r\n-                    'miny': img.y,\r\n-                    'maxy': img.y + img.height,\r\n-                    'limitQiMinx': false,\r\n-                    'limitEndMaxx': false,\r\n-                    'limitQiMaxy': false,\r\n-                    'limitEndMiny': false,\r\n-                    'isPointInner': false\r\n-                };\r\n-                this._allPointRect.push(temp);\r\n-            }\r\n-        }\r\n-\r\n-        this._titleTrigger = this._view.getChild(\"titleTrigger\").asLoader;\r\n-        if (this._titleTrigger) this._titleTrigger.on(fgui.Event.CLICK, this._clickTitle, this);\r\n-\r\n-        this._title = this._view.getChild(\"title\").asButton;\r\n-\r\n-        this._submitBtn = this._view.getChild(\"submit\").asButton;\r\n-        if (this._submitBtn) this._submitBtn.on(fgui.Event.CLICK, this._clickSubmit, this);\r\n-\r\n-        this._resetBtn = this._view.getChild(\"restart\").asButton;\r\n-        this._resetBtn.on(fgui.Event.CLICK, this._clickReset, this);\r\n-\r\n-        this._view.on(cc.Node.EventType.TOUCH_START, this._onDrawStart, this);\r\n-        this._view.on(cc.Node.EventType.TOUCH_MOVE, this._onDrawMove, this);\r\n-        this._view.on(cc.Node.EventType.TOUCH_END, this._onDrawEnd, this);\r\n-\r\n-        let huiNode = new cc.Node('huiNode');\r\n-        huiNode.parent = this._worldRoot;\r\n-\r\n-        this.graphics = huiNode.addComponent(cc.Graphics);\r\n-        this.graphics.lineWidth = 20;\r\n-        this.graphics.lineJoin = cc.Graphics.LineJoin.ROUND;\r\n-        this.graphics.strokeColor = cc.color(255, 0, 0);\r\n-        this.graphics.fillColor = cc.color(255, 0, 0);\r\n-\r\n-        // 初始化state\r\n-        this._state = {\r\n-            title: false,\r\n-            submit: this.submitType.No,\r\n-            touch: \"no\",\r\n-            reset: false,\r\n-            curTouchesPos: cc.Vec2,\r\n-            allTouchLinesPos: {},\r\n-        }\r\n-    }\r\n-\r\n-    async init(data: any) {\r\n-        // 临时 model component json 配置加载\r\n-        let { pathConfig, model, components } = data;\r\n-        let Package = pathConfig.packageName;\r\n-        let GComponent = model.uiPath;\r\n-        let { boxSoundUrl, guidIndex } = model.config;\r\n-        this._package = Package;\r\n-\r\n-        this._view = fgui.UIPackage.createObject(Package, GComponent).asCom;\r\n-\r\n-        if (components) {\r\n-            for (const key in components) {\r\n-                let componentPath: any = `${pathConfig.remoteUrl}${pathConfig.componentBundlePath}${components[key].bundleName}`;\r\n-                let componentBundle: any = await loadBundle(componentPath);\r\n-                let componentPrefab: any = await loadPrefab(componentBundle, components[key].prefabName);\r\n-                this[key] = componentPrefab;\r\n-            }\r\n-        }\r\n-    }\r\n-\r\n-    _onDrawStart(event) {\r\n-        console.log('===== start 111 ====' + event.touch.getLocation());\r\n-\r\n-        let state: any = globalThis._.cloneDeep(this._state);\r\n-        if (state.touch === 'no') {\r\n-            state.touch = 'start';\r\n-            let tempPos = new cc.Vec2(event.touch.getLocation().x, event.touch.getLocation().y);\r\n-            state.curTouchesPos = tempPos;\r\n-            this.updateState(state);\r\n-        }\r\n-    }\r\n-\r\n-    _onDrawMove(event) {\r\n-\r\n-        this._dragging = true;\r\n-        this._moveCurPos = new cc.Vec2(event.touch.getLocation().x, event.touch.getLocation().y);\r\n-    }\r\n-\r\n-    _onDrawEnd(event) {\r\n-\r\n-        this._dragging = false;\r\n-\r\n-        let tempPos = new cc.Vec2(event.touch.getLocation().x, event.touch.getLocation().y);\r\n-        let state: any = globalThis._.cloneDeep(this._state);\r\n-        state.curTouchesPos = tempPos;\r\n-        state.touch = 'end';\r\n-        this.updateState(state);\r\n-    }\r\n-\r\n-\r\n-    // 排序方法\r\n-    comparePosX() {\r\n-        return function (a, b) {\r\n-            var value1 = a.x;\r\n-            var value2 = b.x;\r\n-            return value1 - value2;\r\n-        }\r\n-    }\r\n-\r\n-    // 排序方法\r\n-    comparePosY() {\r\n-        return function (a, b) {\r\n-            var value1 = a.y;\r\n-            var value2 = b.y;\r\n-            return value1 - value2;\r\n-        }\r\n-    }\r\n-\r\n-    private _clickReset(evt: any) {\r\n-        let state: any = globalThis._.cloneDeep(this._state);\r\n-        state.reset = true;\r\n-        this.updateState(state);\r\n-\r\n-    }\r\n-\r\n-    private _clickSubmit(evt: any) {\r\n-\r\n-        let state: any = globalThis._.cloneDeep(this._state);\r\n-\r\n-        if (Object.keys(state.allTouchLinesPos).length === 0) {\r\n-\r\n-            state.submit = this.submitType.GuideShow;\r\n-\r\n-        } else {\r\n-\r\n-            let isAllRight = true;\r\n-            for (let key in state.allTouchLinesPos) {\r\n-\r\n-                if (!state.allTouchLinesPos[key].result) {\r\n-                    isAllRight = false;\r\n-                    break;\r\n-                }\r\n-            }\r\n-            if (isAllRight) {\r\n-                state.submit = this.submitType.RightFeed;\r\n-            } else {\r\n-                state.submit = this.submitType.WrongFeed;\r\n-            }\r\n-        }\r\n-\r\n-        this.updateState(state);\r\n-    }\r\n-\r\n-    private _clickTitle(evt: any) {\r\n-        let state: any = globalThis._.cloneDeep(this._state);\r\n-        state.title = true;\r\n-        this.updateState(state);\r\n-    }\r\n-\r\n-    // 临时\r\n-    // 拖拽定时器\r\n-    dragSchedule() {\r\n-        if (this._dragging) {\r\n-\r\n-            console.log('==== 3333333 拖拽定时器 ======');\r\n-            let state: any = globalThis._.cloneDeep(this._state);\r\n-            state.curTouchesPos = this._moveCurPos;\r\n-            state.touch = \"move\";\r\n-            this.updateState(state);\r\n-        }\r\n-    }\r\n-\r\n-    // 获取状态\r\n-    getState(data: any) {\r\n-        this.updateState(data);\r\n-    }\r\n-\r\n-    // 更新状态层\r\n-    updateState(curState: any) {\r\n-        if (globalThis._.isEqual(this._state, curState)) return;\r\n-        this.state = curState;\r\n-    }\r\n-\r\n-    // 更新ui层\r\n-    updateUi(oldState: any, state: any) {\r\n-\r\n-        if (state.touch == \"start\") {\r\n-\r\n-            this._curTouchesPos.length = 0;\r\n-            this._curTouchesPos.push(state.curTouchesPos);\r\n-            this.graphics.clear();\r\n-\r\n-        } else if (state.touch == \"move\") {\r\n-\r\n-            this._curTouchesPos.push(state.curTouchesPos);\r\n-\r\n-            const MIN_POINT_DISTANCE = 4;\r\n-\r\n-            let worldPos = this.node.convertToWorldSpaceAR(cc.v2(0, 0));\r\n-            this.graphics.moveTo(this._curTouchesPos[0].x - worldPos.x, this._curTouchesPos[0].y - worldPos.y);\r\n-            let lastIndex = 0;\r\n-            for (let i = 1, l = this._curTouchesPos.length; i < l; i++) {\r\n-                if (this._curTouchesPos[i].sub(this._curTouchesPos[lastIndex]).mag() < MIN_POINT_DISTANCE) {\r\n-                    continue;\r\n-                }\r\n-                lastIndex = i;\r\n-                this.graphics.lineTo(this._curTouchesPos[i].x - worldPos.x, this._curTouchesPos[i].y - worldPos.y);\r\n-            }\r\n-            this.graphics.stroke();\r\n-\r\n-        } else if (state.touch == \"end\") {\r\n-\r\n-            this._curTouchesPos.push(state.curTouchesPos);\r\n-\r\n-            this.graphics.clear();\r\n-            if (this._curTouchesPos.length > 0) {\r\n-\r\n-                for (let i = 0; i < this._curTouchesPos.length; i++) {\r\n-\r\n-                    this._curTouchesPos[i].y = this._view.height - this._curTouchesPos[i].y;\r\n-                }\r\n-\r\n-                let tempArrX = [];\r\n-                tempArrX = this._curTouchesPos;\r\n-                tempArrX.sort(this.comparePosX());\r\n-\r\n-                let tempArrY = [];\r\n-                tempArrY = this._curTouchesPos;\r\n-                tempArrY.sort(this.comparePosY());\r\n-\r\n-                var chaX = Math.abs(tempArrX[tempArrX.length - 1].x - tempArrX[0].x);\r\n-                var chaY = Math.abs(tempArrY[tempArrY.length - 1].y - tempArrY[0].y);\r\n-                let isSortY = false;\r\n-\r\n-                if (chaX > 150) {\r\n-\r\n-                    console.log('==== sort chaX ====');\r\n-                    this._curTouchesPos.sort(this.comparePosX());\r\n-                    console.log(this._curTouchesPos);\r\n-                } else {\r\n-\r\n-                    isSortY = true;\r\n-                    console.log('==== sort chaY ====');\r\n-                    this._curTouchesPos.sort(this.comparePosY());\r\n-                    console.log(this._curTouchesPos);\r\n-\r\n-                }\r\n-\r\n-                for (let i = 0; i < this._allPointRect.length; i++) {\r\n-\r\n-                    this._allPointRect[i].isContains = false;\r\n-                    this._allPointRect[i].limitQiMinx = false;\r\n-                    this._allPointRect[i].limitEndMaxx = false;\r\n-                    this._allPointRect[i].isPointInner = false;\r\n-                }\r\n-\r\n-                let pointNums = 0;\r\n-                for (let i = 0; i < this._curTouchesPos.length; i++) {\r\n-\r\n-                    for (let j = 0; j < this._allPointRect.length; j++) {\r\n-\r\n-                        if (this._allPointRect[j].rect.contains(this._curTouchesPos[i])) {\r\n-                            this._allPointRect[j].isContains = true;\r\n-                            break;\r\n-                        }\r\n-                    }\r\n-                }\r\n-                for (let i = 0; i < this._allPointRect.length; i++) {\r\n-\r\n-                    if (this._allPointRect[i].isContains) {\r\n-                        pointNums++;\r\n-                        continue;\r\n-                    }\r\n-                }\r\n-\r\n-                console.log('===== 5555 =====' + pointNums);\r\n-\r\n-                if (pointNums >= 2) {\r\n-\r\n-                    for (let i = 0; i < this._allPointRect.length; i++) {\r\n-\r\n-                        if (this._allPointRect[i].rect.contains(this._curTouchesPos[0]) ||\r\n-                            this._allPointRect[i].rect.contains(this._curTouchesPos[this._curTouchesPos.length - 1])) {\r\n-                            this._allPointRect[i].isPointInner = true;\r\n-                        }\r\n-\r\n-                        if (this._allPointRect[i].isContains) {\r\n-\r\n-                            if (this._curTouchesPos[0].x < this._allPointRect[i].minx) {\r\n-\r\n-                                this._allPointRect[i].limitQiMinx = true;\r\n-                            }\r\n-                            if (this._curTouchesPos[this._curTouchesPos.length - 1].x > this._allPointRect[i].maxx) {\r\n-\r\n-                                this._allPointRect[i].limitEndMaxx = true;\r\n-                            }\r\n-                        }\r\n-                    }\r\n-\r\n-                    console.log('===== allPointRect ====');\r\n-                    console.log(this._allPointRect);\r\n-                    console.log(this._curTouchesPos);\r\n-\r\n-                    let temp = {};\r\n-                    if (this._allPointRect[0].isContains && this._allPointRect[2].isContains) {\r\n-\r\n-                        if (this._allPointRect[0].isPointInner && this._allPointRect[2].isPointInner) {\r\n-\r\n-                            console.log('===== 线段 =====');\r\n-                            //线段\r\n-                            let pointMidChang = 306;\r\n-                            temp['QiX'] = 787;\r\n-                            temp['QiY'] = 498;\r\n-                            temp['angle'] = 0;\r\n-                            temp['chaoInterQiX'] = 0;\r\n-                            temp['chaoInterQiY'] = 0;\r\n-                            temp['chang'] = pointMidChang;\r\n-                            temp['result'] = false;\r\n-                            state.allTouchLinesPos['line1'] = temp;\r\n-\r\n-                        } else if (this._allPointRect[0].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n-\r\n-                            console.log('===== 直线 =====');\r\n-                            // 直线\r\n-                            temp['QiX'] = 787;\r\n-                            temp['QiY'] = 498;\r\n-                            temp['angle'] = 0;\r\n-                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n-                            temp['chaoInterQiY'] = 0;\r\n-                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n-                            temp['result'] = true;\r\n-                            state.allTouchLinesPos['line1'] = temp;\r\n-\r\n-                        } else if (this._allPointRect[0].limitQiMinx && !this._allPointRect[2].limitEndMaxx) {\r\n-\r\n-                            console.log('===== 左点超出射线 =====')\r\n-\r\n-                            temp['QiX'] = 787;\r\n-                            temp['QiY'] = 498;\r\n-                            temp['angle'] = 0;\r\n-                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n-                            temp['chaoInterQiY'] = 0;\r\n-                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n-                            temp['result'] = false;\r\n-                            state.allTouchLinesPos['line1'] = temp;\r\n-\r\n-\r\n-                        } else if (!this._allPointRect[0].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n-\r\n-                            console.log('===== 右点超出的射线 =====');\r\n-                            // 右点超出的射线\r\n-\r\n-                            temp['QiX'] = 787;\r\n-                            temp['QiY'] = 498;\r\n-                            temp['angle'] = 0;\r\n-                            temp['chaoInterQiX'] = 0;\r\n-                            temp['chaoInterQiY'] = 0;\r\n-\r\n-                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n-                            temp['result'] = false;\r\n-                            state.allTouchLinesPos['line1'] = temp;\r\n-\r\n-                        }\r\n-\r\n-                    } else if (this._allPointRect[0].isContains && this._allPointRect[1].isContains) {\r\n-\r\n-                        if (this._allPointRect[0].isPointInner && this._allPointRect[1].isPointInner) {\r\n-\r\n-                            console.log('===== 线段 =====');\r\n-                            //线段\r\n-                            let pointMidChang = 230;\r\n-                            temp['QiX'] = 787;\r\n-                            temp['QiY'] = 498;\r\n-                            temp['angle'] = 45;\r\n-                            temp['chaoInterQiX'] = 0;\r\n-                            temp['chaoInterQiY'] = 0;\r\n-                            temp['chang'] = pointMidChang;\r\n-                            temp['result'] = false;\r\n-                            state.allTouchLinesPos['line2'] = temp;\r\n-\r\n-                        } else if (this._allPointRect[0].limitQiMinx && this._allPointRect[1].limitEndMaxx) {\r\n-\r\n-                            console.log('===== 直线 =====');\r\n-                            // 直线\r\n-                            temp['QiX'] = 787;\r\n-                            temp['QiY'] = 498;\r\n-                            temp['angle'] = 45;\r\n-                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n-                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n-                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n-                            temp['result'] = true;\r\n-                            state.allTouchLinesPos['line2'] = temp;\r\n-\r\n-                        } else if (this._allPointRect[0].limitQiMinx && !this._allPointRect[1].limitEndMaxx) {\r\n-\r\n-                            console.log('===== 左点超出射线 =====')\r\n-\r\n-                            temp['QiX'] = 787;\r\n-                            temp['QiY'] = 498;\r\n-                            temp['angle'] = 45;\r\n-                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n-                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n-                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n-                            temp['result'] = false;\r\n-                            state.allTouchLinesPos['line2'] = temp;\r\n-\r\n-\r\n-                        } else if (!this._allPointRect[0].limitQiMinx && this._allPointRect[1].limitEndMaxx) {\r\n-\r\n-                            console.log('===== 右点超出的射线 =====');\r\n-                            // 右点超出的射线\r\n-\r\n-                            temp['QiX'] = 787;\r\n-                            temp['QiY'] = 498;\r\n-                            temp['angle'] = 45;\r\n-                            temp['chaoInterQiX'] = 0;\r\n-                            temp['chaoInterQiY'] = 0;\r\n-\r\n-                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n-                            temp['result'] = false;\r\n-                            state.allTouchLinesPos['line2'] = temp;\r\n-\r\n-                        }\r\n-                    } else if (this._allPointRect[0].isContains && this._allPointRect[3].isContains) {\r\n-\r\n-                        if (this._allPointRect[0].isPointInner && this._allPointRect[3].isPointInner) {\r\n-\r\n-                            console.log('===== 线段 =====');\r\n-                            //线段\r\n-                            let pointMidChang = 230;\r\n-                            temp['QiX'] = 785;\r\n-                            temp['QiY'] = 498;\r\n-                            temp['angle'] = -45;\r\n-                            temp['chaoInterQiX'] = 0;\r\n-                            temp['chaoInterQiY'] = 0;\r\n-                            temp['chang'] = pointMidChang;\r\n-                            temp['result'] = false;\r\n-                            state.allTouchLinesPos['line3'] = temp;\r\n-\r\n-                        } else if (this._allPointRect[0].limitQiMinx && this._allPointRect[3].limitEndMaxx) {\r\n-\r\n-                            console.log('===== 直线 =====');\r\n-                            // 直线\r\n-                            temp['QiX'] = 787;\r\n-                            temp['QiY'] = 498;\r\n-                            temp['angle'] = -45;\r\n-                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n-                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n-                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n-                            temp['result'] = true;\r\n-                            state.allTouchLinesPos['line3'] = temp;\r\n-\r\n-                        } else if (this._allPointRect[0].limitQiMinx && !this._allPointRect[3].limitEndMaxx) {\r\n-\r\n-                            console.log('===== 左点超出射线 =====')\r\n-\r\n-                            temp['QiX'] = 787;\r\n-                            temp['QiY'] = 498;\r\n-                            temp['angle'] = -45;\r\n-                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n-                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n-                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n-                            temp['result'] = false;\r\n-                            state.allTouchLinesPos['line3'] = temp;\r\n-\r\n-\r\n-                        } else if (!this._allPointRect[0].limitQiMinx && this._allPointRect[3].limitEndMaxx) {\r\n-\r\n-                            console.log('===== 右点超出的射线 =====');\r\n-                            // 右点超出的射线\r\n-\r\n-                            temp['QiX'] = 787;\r\n-                            temp['QiY'] = 498;\r\n-                            temp['angle'] = -45;\r\n-                            temp['chaoInterQiX'] = 0;\r\n-                            temp['chaoInterQiY'] = 0;\r\n-\r\n-                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n-                            temp['result'] = false;\r\n-                            state.allTouchLinesPos['line3'] = temp;\r\n-\r\n-                        }\r\n-                    } else if (this._allPointRect[1].isContains && this._allPointRect[2].isContains) {\r\n-\r\n-                        if (this._allPointRect[1].isPointInner && this._allPointRect[2].isPointInner) {\r\n-\r\n-                            console.log('===== 线段 =====');\r\n-                            //线段\r\n-                            let pointMidChang = 230;\r\n-                            temp['QiX'] = 942;\r\n-                            temp['QiY'] = 654;\r\n-                            temp['angle'] = -47;\r\n-                            temp['chaoInterQiX'] = 0;\r\n-                            temp['chaoInterQiY'] = 0;\r\n-                            temp['chang'] = pointMidChang;\r\n-                            temp['result'] = false;\r\n-                            state.allTouchLinesPos['line4'] = temp;\r\n-\r\n-                        } else if (this._allPointRect[1].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n-\r\n-                            console.log('===== 直线 =====');\r\n-                            // 直线\r\n-                            temp['QiX'] = 942;\r\n-                            temp['QiY'] = 654;\r\n-                            temp['angle'] = -47;\r\n-                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n-                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n-                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n-                            temp['result'] = true;\r\n-                            state.allTouchLinesPos['line4'] = temp;\r\n-\r\n-                        } else if (this._allPointRect[1].limitQiMinx && !this._allPointRect[2].limitEndMaxx) {\r\n-\r\n-                            console.log('===== 左点超出射线 =====')\r\n-\r\n-                            temp['QiX'] = 942;\r\n-                            temp['QiY'] = 654;\r\n-                            temp['angle'] = -47;\r\n-                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n-                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n-                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n-                            temp['result'] = false;\r\n-                            state.allTouchLinesPos['line4'] = temp;\r\n-\r\n-\r\n-                        } else if (!this._allPointRect[1].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n-\r\n-                            console.log('===== 右点超出的射线 =====');\r\n-                            // 右点超出的射线\r\n-\r\n-                            temp['QiX'] = 942;\r\n-                            temp['QiY'] = 654;\r\n-                            temp['angle'] = -47;\r\n-                            temp['chaoInterQiX'] = 0;\r\n-                            temp['chaoInterQiY'] = 0;\r\n-\r\n-                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n-                            temp['result'] = false;\r\n-                            state.allTouchLinesPos['line4'] = temp;\r\n-\r\n-                        }\r\n-                    } else if (this._allPointRect[2].isContains && this._allPointRect[3].isContains) {\r\n-\r\n-                        if (this._allPointRect[2].isPointInner && this._allPointRect[3].isPointInner) {\r\n-\r\n-                            console.log('===== 线段 =====');\r\n-                            //线段\r\n-                            let pointMidChang = 310;\r\n-                            temp['QiX'] = 942;\r\n-                            temp['QiY'] = 654;\r\n-                            temp['angle'] = -90;\r\n-                            temp['chaoInterQiX'] = 0;\r\n-                            temp['chaoInterQiY'] = 0;\r\n-                            temp['chang'] = pointMidChang;\r\n-                            temp['result'] = false;\r\n-                            state.allTouchLinesPos['line4'] = temp;\r\n-\r\n-                        } else if (this._allPointRect[1].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n-\r\n-                            console.log('===== 直线 =====');\r\n-                            // 直线\r\n-                            temp['QiX'] = 942;\r\n-                            temp['QiY'] = 654;\r\n-                            temp['angle'] = -47;\r\n-                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n-                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n-                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n-                            temp['result'] = true;\r\n-                            state.allTouchLinesPos['line4'] = temp;\r\n-\r\n-                        } else if (this._allPointRect[1].limitQiMinx && !this._allPointRect[2].limitEndMaxx) {\r\n-\r\n-                            console.log('===== 左点超出射线 =====')\r\n-\r\n-                            temp['QiX'] = 942;\r\n-                            temp['QiY'] = 654;\r\n-                            temp['angle'] = -47;\r\n-                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n-                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n-                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n-                            temp['result'] = false;\r\n-                            state.allTouchLinesPos['line4'] = temp;\r\n-\r\n-\r\n-                        } else if (!this._allPointRect[1].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n-\r\n-                            console.log('===== 右点超出的射线 =====');\r\n-                            // 右点超出的射线\r\n-\r\n-                            temp['QiX'] = 942;\r\n-                            temp['QiY'] = 654;\r\n-                            temp['angle'] = -47;\r\n-                            temp['chaoInterQiX'] = 0;\r\n-                            temp['chaoInterQiY'] = 0;\r\n-\r\n-                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n-                            temp['result'] = false;\r\n-                            state.allTouchLinesPos['line4'] = temp;\r\n-\r\n-                        }\r\n-                    }\r\n-                }\r\n-\r\n-                setTimeout(() => {\r\n-\r\n-                    let state1: any = globalThis._.cloneDeep(this._state);\r\n-                    state1.touch = 'no';\r\n-                    state1.allTouchLinesPos = state.allTouchLinesPos;\r\n-                    this.updateState(state1);\r\n-\r\n-                }, 20);\r\n-            }\r\n-        }\r\n-\r\n-\r\n-        if (!globalThis._.isEqual(oldState.allTouchLinesPos, state.allTouchLinesPos)) {\r\n-\r\n-            for (let key in this._allTouchLinesObj) {\r\n-                this._allTouchLinesObj[key].removeFromParent();\r\n-            }\r\n-\r\n-            for (let key in state.allTouchLinesPos) {\r\n-\r\n-                let temp = state.allTouchLinesPos[key];\r\n-                let zhiLine = fgui.UIPackage.createObjectFromURL('ui://mgpb39d5xdox2a');\r\n-                this._view.addChild(zhiLine);\r\n-                zhiLine.width = temp['chang'];\r\n-\r\n-                zhiLine.x = temp.QiX - temp.chaoInterQiX;\r\n-                zhiLine.y = temp.QiY - temp.chaoInterQiY;\r\n-\r\n-                zhiLine.rotation = temp.angle;\r\n-                this._allTouchLinesObj[key] = zhiLine;\r\n-            }\r\n-        }\r\n-\r\n-        if (!globalThis._.isEqual(oldState.reset, state.reset)) {\r\n-\r\n-            if (state.reset) {\r\n-\r\n-                for (let key in state.allTouchLinesPos) {\r\n-                    delete state.allTouchLinesPos[key];\r\n-                }\r\n-\r\n-                for (let key in this._allTouchLinesObj) {\r\n-                    this._allTouchLinesObj[key].removeFromParent();\r\n-                }\r\n-\r\n-                for (let key in this._allOtherTouchLinesObj) {\r\n-                    this._allOtherTouchLinesObj[key].removeFromParent();\r\n-                }\r\n-\r\n-                setTimeout(() => {\r\n-\r\n-                    let state1: any = globalThis._.cloneDeep(this._state);\r\n-                    state1.reset = false;\r\n-                    state1.allTouchLinesPos = state.allTouchLinesPos;\r\n-                    this.updateState(state1);\r\n-\r\n-                }, 10);\r\n-\r\n-            }\r\n-\r\n-        }\r\n-\r\n-        if (!globalThis._.isEqual(oldState.submit, state.submit)) {\r\n-\r\n-            if (state.submit === this.submitType.RightFeed) {\r\n-\r\n-                this.answerFeedback(true);\r\n-\r\n-            } else if (state.submit === this.submitType.WrongFeed) {\r\n-\r\n-                this.answerFeedback(false);\r\n-\r\n-            } else if (state.submit === this.submitType.GuideShow) {\r\n-\r\n-                // let keyBtn = this._view.getChild('input1').asButton;\r\n-                // this.handTips2(keyBtn);\r\n-            }\r\n-        }\r\n-\r\n-        if (!globalThis._.isEqual(oldState.title, state.title)) {\r\n-            this.playTitle(state.title);\r\n-        }\r\n-    }\r\n-\r\n-    angle(start, end) {\r\n-        var diff_x = end.x - start.x,\r\n-            diff_y = end.y - start.y;\r\n-        //返回角度,不是弧度\r\n-        return 360 * Math.atan(diff_y / diff_x) / (2 * Math.PI);\r\n-    }\r\n-\r\n-\r\n-    async playTitle(bool: boolean) {\r\n-        this._c1.selectedIndex = bool ? 1 : 0;\r\n-        if (bool) {\r\n-            cc.audioEngine.stopAll();\r\n-            this.forbidHandle();\r\n-            let item = fgui.UIPackage.getItemByURL(this._title[\"_sound\"]);\r\n-            let audio: cc.AudioClip = await loadResource(item.file, cc.AudioClip);\r\n-            let audioId = cc.audioEngine.play(audio, false, 1);\r\n-            cc.audioEngine.setFinishCallback(audioId, () => {\r\n-                let state: any = globalThis._.cloneDeep(this._state);\r\n-                state.title = false;\r\n-                this.updateState(state);\r\n-            });\r\n-        } else {\r\n-            this.disableForbidHandle();\r\n-        }\r\n-    }\r\n-\r\n-    answerFeedback(bool: boolean) {\r\n-        if (!this.feedback) return;\r\n-        let feedback: any = cc.instantiate(this.feedback);\r\n-        feedback.x = 960;\r\n-        feedback.y = 540;\r\n-        let feedbackJs: any = feedback.getComponent(cc.Component);\r\n-        feedbackJs.init(bool);\r\n-        feedback.parent = cc.find(\"Canvas\").parent;\r\n-\r\n-        setTimeout(() => {\r\n-            feedback.destroy();\r\n-            let state: any = globalThis._.cloneDeep(this._state);\r\n-            state.submit = this.submitType.No;\r\n-            this.updateState(state);\r\n-        }, 2000);\r\n-    }\r\n-\r\n-\r\n-    /**\r\n-     * 点击指引\r\n-     * @param obj 点击对象\r\n-     */\r\n-    handTips2(obj: fgui.GObject) {\r\n-        let hand = fgui.UIPackage.createObject(this._package, 'hand');\r\n-        this._view.addChild(hand);\r\n-        let tempX = obj.x;\r\n-        let tempY = obj.y;\r\n-\r\n-        hand.x = tempX;\r\n-        hand.y = tempY;\r\n-\r\n-        cc.tween(hand).to(0.3, {\r\n-            x: tempX - 30,\r\n-            y: tempY - 30\r\n-        }).to(0.3, {\r\n-            x: tempX,\r\n-            y: tempY\r\n-        }).to(0.3, {\r\n-            x: tempX - 30,\r\n-            y: tempY - 30\r\n-        }).to(0.3, {\r\n-            x: tempX,\r\n-            y: tempY\r\n-        }).call(() => {\r\n-            this._view.removeChild(hand);\r\n-            hand = null;\r\n-            let state: any = globalThis._.cloneDeep(this._state);\r\n-            state.submit = this.submitType.No;\r\n-            this.updateState(state)\r\n-        }).start();\r\n-    }\r\n-\r\n-    // 运行时 禁止操作\r\n-    forbidHandle() {\r\n-        console.log('===  运行时 禁止操作 =====');\r\n-        let handleMask = this._worldRoot.getChildByName('handleMask');\r\n-        if (!handleMask) {\r\n-            let handleMask = new cc.Node('handleMask');\r\n-            handleMask.addComponent(cc.BlockInputEvents);\r\n-            handleMask.parent = this._worldRoot;\r\n-            handleMask.width = 1920;\r\n-            handleMask.height = 1080;\r\n-            handleMask.x = 960;\r\n-            handleMask.y = 540;\r\n-        }\r\n-    }\r\n-\r\n-    // 消除禁止\r\n-    disableForbidHandle() {\r\n-        let handleMask = this._worldRoot.getChildByName('handleMask');\r\n-        if (handleMask) handleMask.destroy();\r\n-    }\r\n-\r\n-    // 注册状态，及获取状态的方法\r\n-    registerState() {\r\n-        if (window['GlobalData'].sample.registerState) window['GlobalData'].sample.registerState.call(this);\r\n-    }\r\n-\r\n-    // 解除状态，及获取状态的方法\r\n-    relieveState() {\r\n-        if (window['GlobalData'].sample.relieveState) window['GlobalData'].sample.relieveState.call(this);\r\n-    }\r\n-\r\n-    // 本组件状态合并到全局\r\n-    mergeState() {\r\n-        if (window['GlobalData'].sample.mergeState) window['GlobalData'].sample.mergeState.call(this);\r\n-    }\r\n-\r\n-    onEnable() {\r\n-        this.registerState();\r\n-        this.schedule(this.dragSchedule, this._scheduleTime);\r\n-    }\r\n-\r\n-    onDisable() {\r\n-        this.relieveState();\r\n-        cc.audioEngine.stopAll();\r\n-    }\r\n-}\r\n"
                },
                {
                    "date": 1625480403724,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -385,8 +385,10 @@\n                             if (this._curTouchesPos[this._curTouchesPos.length - 1].x > this._allPointRect[i].maxx) {\r\n \r\n                                 this._allPointRect[i].limitEndMaxx = true;\r\n                             }\r\n+\r\n+\r\n                         }\r\n                     }\r\n \r\n                     console.log('===== allPointRect ====');\r\n"
                },
                {
                    "date": 1625480547074,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -386,9 +386,17 @@\n \r\n                                 this._allPointRect[i].limitEndMaxx = true;\r\n                             }\r\n \r\n+                            if (this._curTouchesPos[0].x < this._allPointRect[i].minx) {\r\n \r\n+                                this._allPointRect[i].limitQiMinx = true;\r\n+                            }\r\n+                            if (this._curTouchesPos[this._curTouchesPos.length - 1].x > this._allPointRect[i].maxx) {\r\n+\r\n+                                this._allPointRect[i].limitEndMaxx = true;\r\n+                            }\r\n+\r\n                         }\r\n                     }\r\n \r\n                     console.log('===== allPointRect ====');\r\n"
                },
                {
                    "date": 1625480552274,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -386,9 +386,9 @@\n \r\n                                 this._allPointRect[i].limitEndMaxx = true;\r\n                             }\r\n \r\n-                            if (this._curTouchesPos[0].x < this._allPointRect[i].minx) {\r\n+                            if (this._curTouchesPos[0].y < this._allPointRect[i].minx) {\r\n \r\n                                 this._allPointRect[i].limitQiMinx = true;\r\n                             }\r\n                             if (this._curTouchesPos[this._curTouchesPos.length - 1].x > this._allPointRect[i].maxx) {\r\n"
                },
                {
                    "date": 1625480562597,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -386,9 +386,9 @@\n \r\n                                 this._allPointRect[i].limitEndMaxx = true;\r\n                             }\r\n \r\n-                            if (this._curTouchesPos[0].y < this._allPointRect[i].minx) {\r\n+                            if (this._curTouchesPos[0].y < this._allPointRect[i].maxy) {\r\n \r\n                                 this._allPointRect[i].limitQiMinx = true;\r\n                             }\r\n                             if (this._curTouchesPos[this._curTouchesPos.length - 1].x > this._allPointRect[i].maxx) {\r\n"
                },
                {
                    "date": 1625480572291,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -388,9 +388,9 @@\n                             }\r\n \r\n                             if (this._curTouchesPos[0].y < this._allPointRect[i].maxy) {\r\n \r\n-                                this._allPointRect[i].limitQiMinx = true;\r\n+                                this._allPointRect[i].limitEndMaxx = true;\r\n                             }\r\n                             if (this._curTouchesPos[this._curTouchesPos.length - 1].x > this._allPointRect[i].maxx) {\r\n \r\n                                 this._allPointRect[i].limitEndMaxx = true;\r\n"
                },
                {
                    "date": 1625480584516,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -388,9 +388,9 @@\n                             }\r\n \r\n                             if (this._curTouchesPos[0].y < this._allPointRect[i].maxy) {\r\n \r\n-                                this._allPointRect[i].limitEndMaxx = true;\r\n+                                this._allPointRect[i].limitQiMaxy = true;\r\n                             }\r\n                             if (this._curTouchesPos[this._curTouchesPos.length - 1].x > this._allPointRect[i].maxx) {\r\n \r\n                                 this._allPointRect[i].limitEndMaxx = true;\r\n"
                },
                {
                    "date": 1625480595448,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -386,9 +386,9 @@\n \r\n                                 this._allPointRect[i].limitEndMaxx = true;\r\n                             }\r\n \r\n-                            if (this._curTouchesPos[0].y < this._allPointRect[i].maxy) {\r\n+                            if (this._curTouchesPos[0].y > this._allPointRect[i].maxy) {\r\n \r\n                                 this._allPointRect[i].limitQiMaxy = true;\r\n                             }\r\n                             if (this._curTouchesPos[this._curTouchesPos.length - 1].x > this._allPointRect[i].maxx) {\r\n"
                },
                {
                    "date": 1625480610274,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -390,9 +390,9 @@\n                             if (this._curTouchesPos[0].y > this._allPointRect[i].maxy) {\r\n \r\n                                 this._allPointRect[i].limitQiMaxy = true;\r\n                             }\r\n-                            if (this._curTouchesPos[this._curTouchesPos.length - 1].x > this._allPointRect[i].maxx) {\r\n+                            if (this._curTouchesPos[this._curTouchesPos.length - 1].y > this._allPointRect[i].maxx) {\r\n \r\n                                 this._allPointRect[i].limitEndMaxx = true;\r\n                             }\r\n \r\n"
                },
                {
                    "date": 1625480622959,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -390,9 +390,9 @@\n                             if (this._curTouchesPos[0].y > this._allPointRect[i].maxy) {\r\n \r\n                                 this._allPointRect[i].limitQiMaxy = true;\r\n                             }\r\n-                            if (this._curTouchesPos[this._curTouchesPos.length - 1].y > this._allPointRect[i].maxx) {\r\n+                            if (this._curTouchesPos[this._curTouchesPos.length - 1].y > this._allPointRect[i].miny) {\r\n \r\n                                 this._allPointRect[i].limitEndMaxx = true;\r\n                             }\r\n \r\n"
                },
                {
                    "date": 1625480656529,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -392,9 +392,9 @@\n                                 this._allPointRect[i].limitQiMaxy = true;\r\n                             }\r\n                             if (this._curTouchesPos[this._curTouchesPos.length - 1].y > this._allPointRect[i].miny) {\r\n \r\n-                                this._allPointRect[i].limitEndMaxx = true;\r\n+                                this._allPointRect[i].limitEndMiny = true;\r\n                             }\r\n \r\n                         }\r\n                     }\r\n"
                },
                {
                    "date": 1625480662936,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -390,9 +390,9 @@\n                             if (this._curTouchesPos[0].y > this._allPointRect[i].maxy) {\r\n \r\n                                 this._allPointRect[i].limitQiMaxy = true;\r\n                             }\r\n-                            if (this._curTouchesPos[this._curTouchesPos.length - 1].y > this._allPointRect[i].miny) {\r\n+                            if (this._curTouchesPos[this._curTouchesPos.length - 1].y < this._allPointRect[i].miny) {\r\n \r\n                                 this._allPointRect[i].limitEndMiny = true;\r\n                             }\r\n \r\n"
                },
                {
                    "date": 1625480698420,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -386,17 +386,20 @@\n \r\n                                 this._allPointRect[i].limitEndMaxx = true;\r\n                             }\r\n \r\n-                            if (this._curTouchesPos[0].y > this._allPointRect[i].maxy) {\r\n+                            if (isSortY) {\r\n+                                if (this._curTouchesPos[0].y > this._allPointRect[i].maxy) {\r\n \r\n-                                this._allPointRect[i].limitQiMaxy = true;\r\n-                            }\r\n-                            if (this._curTouchesPos[this._curTouchesPos.length - 1].y < this._allPointRect[i].miny) {\r\n+                                    this._allPointRect[i].limitQiMaxy = true;\r\n+                                }\r\n+                                if (this._curTouchesPos[this._curTouchesPos.length - 1].y < this._allPointRect[i].miny) {\r\n \r\n-                                this._allPointRect[i].limitEndMiny = true;\r\n+                                    this._allPointRect[i].limitEndMiny = true;\r\n+                                }\r\n                             }\r\n \r\n+\r\n                         }\r\n                     }\r\n \r\n                     console.log('===== allPointRect ====');\r\n"
                },
                {
                    "date": 1625480703580,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -397,9 +397,8 @@\n                                     this._allPointRect[i].limitEndMiny = true;\r\n                                 }\r\n                             }\r\n \r\n-\r\n                         }\r\n                     }\r\n \r\n                     console.log('===== allPointRect ====');\r\n"
                },
                {
                    "date": 1625480723050,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -387,13 +387,13 @@\n                                 this._allPointRect[i].limitEndMaxx = true;\r\n                             }\r\n \r\n                             if (isSortY) {\r\n-                                if (this._curTouchesPos[0].y > this._allPointRect[i].maxy) {\r\n+                                if (this._curTouchesPos[this._curTouchesPos.length - 1].y > this._allPointRect[i].maxy) {\r\n \r\n                                     this._allPointRect[i].limitQiMaxy = true;\r\n                                 }\r\n-                                if (this._curTouchesPos[this._curTouchesPos.length - 1].y < this._allPointRect[i].miny) {\r\n+                                if (this._curTouchesPos[].y < this._allPointRect[i].miny) {\r\n \r\n                                     this._allPointRect[i].limitEndMiny = true;\r\n                                 }\r\n                             }\r\n"
                },
                {
                    "date": 1625480728124,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -391,9 +391,9 @@\n                                 if (this._curTouchesPos[this._curTouchesPos.length - 1].y > this._allPointRect[i].maxy) {\r\n \r\n                                     this._allPointRect[i].limitQiMaxy = true;\r\n                                 }\r\n-                                if (this._curTouchesPos[].y < this._allPointRect[i].miny) {\r\n+                                if (this._curTouchesPos[0].y < this._allPointRect[i].miny) {\r\n \r\n                                     this._allPointRect[i].limitEndMiny = true;\r\n                                 }\r\n                             }\r\n"
                },
                {
                    "date": 1625480812079,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -642,11 +642,11 @@\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line4'] = temp;\r\n \r\n                         }\r\n-                    } else if (this._allPointRect[2].isContains && this._allPointRect[3].isContains) {\r\n+                    } else if (this._allPointRect[1].isContains && this._allPointRect[3].isContains) {\r\n \r\n-                        if (this._allPointRect[2].isPointInner && this._allPointRect[3].isPointInner) {\r\n+                        if (this._allPointRect[1].isPointInner && this._allPointRect[3].isPointInner) {\r\n \r\n                             console.log('===== 线段 =====');\r\n                             //线段\r\n                             let pointMidChang = 310;\r\n"
                },
                {
                    "date": 1625480832779,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -649,9 +649,9 @@\n \r\n                             console.log('===== 线段 =====');\r\n                             //线段\r\n                             let pointMidChang = 310;\r\n-                            temp['QiX'] = 942;\r\n+                            temp['QiX'] = 938;\r\n                             temp['QiY'] = 654;\r\n                             temp['angle'] = -90;\r\n                             temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = 0;\r\n"
                },
                {
                    "date": 1625480910407,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -650,9 +650,9 @@\n                             console.log('===== 线段 =====');\r\n                             //线段\r\n                             let pointMidChang = 310;\r\n                             temp['QiX'] = 938;\r\n-                            temp['QiY'] = 654;\r\n+                            temp['QiY'] = 661;\r\n                             temp['angle'] = -90;\r\n                             temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = 0;\r\n                             temp['chang'] = pointMidChang;\r\n"
                },
                {
                    "date": 1625480915928,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -656,9 +656,9 @@\n                             temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = 0;\r\n                             temp['chang'] = pointMidChang;\r\n                             temp['result'] = false;\r\n-                            state.allTouchLinesPos['line4'] = temp;\r\n+                            state.allTouchLinesPos['line5'] = temp;\r\n \r\n                         } else if (this._allPointRect[1].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n \r\n                             console.log('===== 直线 =====');\r\n"
                },
                {
                    "date": 1625480950118,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -658,9 +658,9 @@\n                             temp['chang'] = pointMidChang;\r\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line5'] = temp;\r\n \r\n-                        } else if (this._allPointRect[1].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n+                        } else if (this._allPointRect[1].limitQiMinx && this._allPointRect[3].limitEndMaxx) {\r\n \r\n                             console.log('===== 直线 =====');\r\n                             // 直线\r\n                             temp['QiX'] = 942;\r\n"
                },
                {
                    "date": 1625480969566,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -658,9 +658,9 @@\n                             temp['chang'] = pointMidChang;\r\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line5'] = temp;\r\n \r\n-                        } else if (this._allPointRect[1].limitQiMinx && this._allPointRect[3].limitEndMaxx) {\r\n+                        } else if (this._allPointRect[1].limitQiMaxy && this._allPointRect[3].limitEndMaxx) {\r\n \r\n                             console.log('===== 直线 =====');\r\n                             // 直线\r\n                             temp['QiX'] = 942;\r\n"
                },
                {
                    "date": 1625480976456,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -658,9 +658,9 @@\n                             temp['chang'] = pointMidChang;\r\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line5'] = temp;\r\n \r\n-                        } else if (this._allPointRect[1].limitQiMaxy && this._allPointRect[3].limitEndMaxx) {\r\n+                        } else if (this._allPointRect[1].limitQiMaxy && this._allPointRect[3].limitEndMiny) {\r\n \r\n                             console.log('===== 直线 =====');\r\n                             // 直线\r\n                             temp['QiX'] = 942;\r\n"
                },
                {
                    "date": 1625480990462,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -662,11 +662,11 @@\n                         } else if (this._allPointRect[1].limitQiMaxy && this._allPointRect[3].limitEndMiny) {\r\n \r\n                             console.log('===== 直线 =====');\r\n                             // 直线\r\n-                            temp['QiX'] = 942;\r\n-                            temp['QiY'] = 654;\r\n-                            temp['angle'] = -47;\r\n+                            temp['QiX'] = 938;\r\n+                            temp['QiY'] = 661;\r\n+                            temp['angle'] = -90;\r\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n                             temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n"
                },
                {
                    "date": 1625481013454,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -665,10 +665,10 @@\n                             // 直线\r\n                             temp['QiX'] = 938;\r\n                             temp['QiY'] = 661;\r\n                             temp['angle'] = -90;\r\n-                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n-                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n+                            temp['chaoInterQiX'] = 0;\r\n+                            temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1]\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n                             state.allTouchLinesPos['line4'] = temp;\r\n \r\n"
                },
                {
                    "date": 1625481028489,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -666,10 +666,10 @@\n                             temp['QiX'] = 938;\r\n                             temp['QiY'] = 661;\r\n                             temp['angle'] = -90;\r\n                             temp['chaoInterQiX'] = 0;\r\n-                            temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1]\r\n-                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y -\r\n+                                temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n                             state.allTouchLinesPos['line4'] = temp;\r\n \r\n                         } else if (this._allPointRect[1].limitQiMinx && !this._allPointRect[2].limitEndMaxx) {\r\n"
                },
                {
                    "date": 1625481050302,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -666,10 +666,10 @@\n                             temp['QiX'] = 938;\r\n                             temp['QiY'] = 661;\r\n                             temp['angle'] = -90;\r\n                             temp['chaoInterQiX'] = 0;\r\n-                            temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y -\r\n-                                temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y + temp['QiY']\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n                             state.allTouchLinesPos['line4'] = temp;\r\n \r\n                         } else if (this._allPointRect[1].limitQiMinx && !this._allPointRect[2].limitEndMaxx) {\r\n"
                },
                {
                    "date": 1625481069517,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -665,10 +665,10 @@\n                             // 直线\r\n                             temp['QiX'] = 938;\r\n                             temp['QiY'] = 661;\r\n                             temp['angle'] = -90;\r\n-                            temp['chaoInterQiX'] = 0;\r\n-                            temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y + temp['QiY']\r\n+                            temp['chaoInterQiX'] = this._curTouchesPos[this._curTouchesPos.length - 1].y + temp['QiY'];;\r\n+                            temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y + temp['QiY'];\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n                             state.allTouchLinesPos['line4'] = temp;\r\n \r\n"
                },
                {
                    "date": 1625481077618,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -665,9 +665,9 @@\n                             // 直线\r\n                             temp['QiX'] = 938;\r\n                             temp['QiY'] = 661;\r\n                             temp['angle'] = -90;\r\n-                            temp['chaoInterQiX'] = this._curTouchesPos[this._curTouchesPos.length - 1].y + temp['QiY'];;\r\n+                            temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y + temp['QiY'];\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n                             state.allTouchLinesPos['line4'] = temp;\r\n"
                },
                {
                    "date": 1625481236922,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -666,9 +666,9 @@\n                             temp['QiX'] = 938;\r\n                             temp['QiY'] = 661;\r\n                             temp['angle'] = -90;\r\n                             temp['chaoInterQiX'] = 0;\r\n-                            temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y + temp['QiY'];\r\n+                            temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y + this._allPointRect[1].limitQiMaxy;\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n                             state.allTouchLinesPos['line4'] = temp;\r\n \r\n"
                },
                {
                    "date": 1625481284474,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -666,9 +666,9 @@\n                             temp['QiX'] = 938;\r\n                             temp['QiY'] = 661;\r\n                             temp['angle'] = -90;\r\n                             temp['chaoInterQiX'] = 0;\r\n-                            temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y + this._allPointRect[1].limitQiMaxy;\r\n+                            temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y + this._allPointRect[1].maxy;\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n                             state.allTouchLinesPos['line4'] = temp;\r\n \r\n"
                },
                {
                    "date": 1625481381932,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -675,11 +675,11 @@\n                         } else if (this._allPointRect[1].limitQiMinx && !this._allPointRect[2].limitEndMaxx) {\r\n \r\n                             console.log('===== 左点超出射线 =====')\r\n \r\n-                            temp['QiX'] = 942;\r\n-                            temp['QiY'] = 654;\r\n-                            temp['angle'] = -47;\r\n+                            temp['QiX'] = 938;\r\n+                            temp['QiY'] = 661;\r\n+                            temp['angle'] = -90;\r\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n                             temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = false;\r\n"
                },
                {
                    "date": 1625481409198,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -671,11 +671,11 @@\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n                             state.allTouchLinesPos['line4'] = temp;\r\n \r\n-                        } else if (this._allPointRect[1].limitQiMinx && !this._allPointRect[2].limitEndMaxx) {\r\n+                        } else if (this._allPointRect[1].limitQiMaxy && !this._allPointRect[2].limitEndMiny) {\r\n \r\n-                            console.log('===== 左点超出射线 =====')\r\n+                            console.log('===== 点超出射线 =====')\r\n \r\n                             temp['QiX'] = 938;\r\n                             temp['QiY'] = 661;\r\n                             temp['angle'] = -90;\r\n"
                },
                {
                    "date": 1625481437836,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -671,11 +671,11 @@\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n                             state.allTouchLinesPos['line4'] = temp;\r\n \r\n-                        } else if (this._allPointRect[1].limitQiMaxy && !this._allPointRect[2].limitEndMiny) {\r\n+                        } else if (this._allPointRect[1].limitQiMaxy && !this._allPointRect[3].limitEndMiny) {\r\n \r\n-                            console.log('===== 点超出射线 =====')\r\n+                            console.log('===== 下点超出射线 =====')\r\n \r\n                             temp['QiX'] = 938;\r\n                             temp['QiY'] = 661;\r\n                             temp['angle'] = -90;\r\n"
                },
                {
                    "date": 1625481454562,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -679,9 +679,9 @@\n                             temp['QiX'] = 938;\r\n                             temp['QiY'] = 661;\r\n                             temp['angle'] = -90;\r\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n-                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n+                            temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y + this._allPointRect[1].maxy;\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line4'] = temp;\r\n \r\n"
                },
                {
                    "date": 1625481459974,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -678,9 +678,9 @@\n \r\n                             temp['QiX'] = 938;\r\n                             temp['QiY'] = 661;\r\n                             temp['angle'] = -90;\r\n-                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n+                            temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y + this._allPointRect[1].maxy;\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line4'] = temp;\r\n"
                },
                {
                    "date": 1625481466981,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -669,9 +669,9 @@\n                             temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y + this._allPointRect[1].maxy;\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n-                            state.allTouchLinesPos['line4'] = temp;\r\n+                            state.allTouchLinesPos['line5'] = temp;\r\n \r\n                         } else if (this._allPointRect[1].limitQiMaxy && !this._allPointRect[3].limitEndMiny) {\r\n \r\n                             console.log('===== 下点超出射线 =====')\r\n@@ -682,9 +682,9 @@\n                             temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y + this._allPointRect[1].maxy;\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = false;\r\n-                            state.allTouchLinesPos['line4'] = temp;\r\n+                            state.allTouchLinesPos['line5'] = temp;\r\n \r\n \r\n                         } else if (!this._allPointRect[1].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n \r\n"
                },
                {
                    "date": 1625481474555,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -687,9 +687,9 @@\n \r\n \r\n                         } else if (!this._allPointRect[1].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n \r\n-                            console.log('===== 右点超出的射线 =====');\r\n+                            console.log('===== 下点超出射线 =====');\r\n                             // 右点超出的射线\r\n \r\n                             temp['QiX'] = 942;\r\n                             temp['QiY'] = 654;\r\n"
                },
                {
                    "date": 1625481481872,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -685,11 +685,11 @@\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line5'] = temp;\r\n \r\n \r\n-                        } else if (!this._allPointRect[1].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n+                        } else if (!this._allPointRect[1].limitQiMinx && this._allPointRect[3].limitEndMaxx) {\r\n \r\n-                            console.log('===== 下点超出射线 =====');\r\n+                            console.log('===== 上点超出射线 =====');\r\n                             // 右点超出的射线\r\n \r\n                             temp['QiX'] = 942;\r\n                             temp['QiY'] = 654;\r\n"
                },
                {
                    "date": 1625481489806,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -685,9 +685,9 @@\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line5'] = temp;\r\n \r\n \r\n-                        } else if (!this._allPointRect[1].limitQiMinx && this._allPointRect[3].limitEndMaxx) {\r\n+                        } else if (!this._allPointRect[1].limitQiMaxy && this._allPointRect[3].limitEndMiny) {\r\n \r\n                             console.log('===== 上点超出射线 =====');\r\n                             // 右点超出的射线\r\n \r\n"
                },
                {
                    "date": 1625481506126,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -688,9 +688,9 @@\n \r\n                         } else if (!this._allPointRect[1].limitQiMaxy && this._allPointRect[3].limitEndMiny) {\r\n \r\n                             console.log('===== 上点超出射线 =====');\r\n-                            // 右点超出的射线\r\n+                            // 上点超出射线\r\n \r\n                             temp['QiX'] = 942;\r\n                             temp['QiY'] = 654;\r\n                             temp['angle'] = -47;\r\n"
                },
                {
                    "date": 1625481518314,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -690,11 +690,11 @@\n \r\n                             console.log('===== 上点超出射线 =====');\r\n                             // 上点超出射线\r\n \r\n-                            temp['QiX'] = 942;\r\n-                            temp['QiY'] = 654;\r\n-                            temp['angle'] = -47;\r\n+                            temp['QiX'] = 938;\r\n+                            temp['QiY'] = 661;\r\n+                            temp['angle'] = -90;\r\n                             temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = 0;\r\n \r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n"
                },
                {
                    "date": 1625482742761,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -666,9 +666,9 @@\n                             temp['QiX'] = 938;\r\n                             temp['QiY'] = 661;\r\n                             temp['angle'] = -90;\r\n                             temp['chaoInterQiX'] = 0;\r\n-                            temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y + this._allPointRect[1].maxy;\r\n+                            temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y - temp['QiY'];\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n                             state.allTouchLinesPos['line5'] = temp;\r\n \r\n"
                },
                {
                    "date": 1625482773559,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -679,9 +679,9 @@\n                             temp['QiX'] = 938;\r\n                             temp['QiY'] = 661;\r\n                             temp['angle'] = -90;\r\n                             temp['chaoInterQiX'] = 0;\r\n-                            temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y + this._allPointRect[1].maxy;\r\n+                            temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y - this._allPointRect[1].maxy;\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line5'] = temp;\r\n \r\n"
                },
                {
                    "date": 1625482779024,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -666,9 +666,9 @@\n                             temp['QiX'] = 938;\r\n                             temp['QiY'] = 661;\r\n                             temp['angle'] = -90;\r\n                             temp['chaoInterQiX'] = 0;\r\n-                            temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y - temp['QiY'];\r\n+                            temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y - this._allPointRect[1].maxy;\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n                             state.allTouchLinesPos['line5'] = temp;\r\n \r\n"
                },
                {
                    "date": 1625482843224,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -666,9 +666,9 @@\n                             temp['QiX'] = 938;\r\n                             temp['QiY'] = 661;\r\n                             temp['angle'] = -90;\r\n                             temp['chaoInterQiX'] = 0;\r\n-                            temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y - this._allPointRect[1].maxy;\r\n+                            temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y - temp['QiY'];\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n                             state.allTouchLinesPos['line5'] = temp;\r\n \r\n"
                },
                {
                    "date": 1625482918670,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -404,9 +404,9 @@\n                     console.log('===== allPointRect ====');\r\n                     console.log(this._allPointRect);\r\n                     console.log(this._curTouchesPos);\r\n \r\n-                    let temp = {};\r\n+                    let temp = { 'isSortY': isSortY };\r\n                     if (this._allPointRect[0].isContains && this._allPointRect[2].isContains) {\r\n \r\n                         if (this._allPointRect[0].isPointInner && this._allPointRect[2].isPointInner) {\r\n \r\n"
                },
                {
                    "date": 1625482939388,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -730,8 +730,11 @@\n                 this._view.addChild(zhiLine);\r\n                 zhiLine.width = temp['chang'];\r\n \r\n                 zhiLine.x = temp.QiX - temp.chaoInterQiX;\r\n+                if (isSortY) {\r\n+\r\n+                }\r\n                 zhiLine.y = temp.QiY - temp.chaoInterQiY;\r\n \r\n                 zhiLine.rotation = temp.angle;\r\n                 this._allTouchLinesObj[key] = zhiLine;\r\n"
                },
                {
                    "date": 1625482944538,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -730,9 +730,9 @@\n                 this._view.addChild(zhiLine);\r\n                 zhiLine.width = temp['chang'];\r\n \r\n                 zhiLine.x = temp.QiX - temp.chaoInterQiX;\r\n-                if (isSortY) {\r\n+                if (temp.isSortY) {\r\n \r\n                 }\r\n                 zhiLine.y = temp.QiY - temp.chaoInterQiY;\r\n \r\n"
                },
                {
                    "date": 1625482952491,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -732,8 +732,10 @@\n \r\n                 zhiLine.x = temp.QiX - temp.chaoInterQiX;\r\n                 if (temp.isSortY) {\r\n \r\n+                } else {\r\n+\r\n                 }\r\n                 zhiLine.y = temp.QiY - temp.chaoInterQiY;\r\n \r\n                 zhiLine.rotation = temp.angle;\r\n"
                },
                {
                    "date": 1625482958195,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -732,12 +732,15 @@\n \r\n                 zhiLine.x = temp.QiX - temp.chaoInterQiX;\r\n                 if (temp.isSortY) {\r\n \r\n+                    zhiLine.y = temp.QiY - temp.chaoInterQiY;\r\n+\r\n+\r\n                 } else {\r\n+                    zhiLine.y = temp.QiY - temp.chaoInterQiY;\r\n \r\n                 }\r\n-                zhiLine.y = temp.QiY - temp.chaoInterQiY;\r\n \r\n                 zhiLine.rotation = temp.angle;\r\n                 this._allTouchLinesObj[key] = zhiLine;\r\n             }\r\n"
                },
                {
                    "date": 1625482963310,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -732,9 +732,9 @@\n \r\n                 zhiLine.x = temp.QiX - temp.chaoInterQiX;\r\n                 if (temp.isSortY) {\r\n \r\n-                    zhiLine.y = temp.QiY - temp.chaoInterQiY;\r\n+                    zhiLine.y = temp.QiY + temp.chaoInterQiY;\r\n \r\n \r\n                 } else {\r\n                     zhiLine.y = temp.QiY - temp.chaoInterQiY;\r\n"
                },
                {
                    "date": 1625482969274,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -734,9 +734,8 @@\n                 if (temp.isSortY) {\r\n \r\n                     zhiLine.y = temp.QiY + temp.chaoInterQiY;\r\n \r\n-\r\n                 } else {\r\n                     zhiLine.y = temp.QiY - temp.chaoInterQiY;\r\n \r\n                 }\r\n"
                },
                {
                    "date": 1625483212361,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -343,8 +343,11 @@\n                     this._allPointRect[i].isContains = false;\r\n                     this._allPointRect[i].limitQiMinx = false;\r\n                     this._allPointRect[i].limitEndMaxx = false;\r\n                     this._allPointRect[i].isPointInner = false;\r\n+                    this._allPointRect[i].limitQiMaxy = false;\r\n+                    this._allPointRect[i].limitEndMiny = false;\r\n+\r\n                 }\r\n \r\n                 let pointNums = 0;\r\n                 for (let i = 0; i < this._curTouchesPos.length; i++) {\r\n"
                },
                {
                    "date": 1625483630566,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -682,9 +682,9 @@\n                             temp['QiX'] = 938;\r\n                             temp['QiY'] = 661;\r\n                             temp['angle'] = -90;\r\n                             temp['chaoInterQiX'] = 0;\r\n-                            temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y - this._allPointRect[1].maxy;\r\n+                            temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y - temp['QiY'];\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line5'] = temp;\r\n \r\n"
                },
                {
                    "date": 1625483745560,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -704,8 +704,67 @@\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line4'] = temp;\r\n \r\n                         }\r\n+                    } else if (this._allPointRect[1].isContains && this._allPointRect[3].isContains) {\r\n+\r\n+                        if (this._allPointRect[1].isPointInner && this._allPointRect[3].isPointInner) {\r\n+\r\n+                            console.log('===== 线段 =====');\r\n+                            //线段\r\n+                            let pointMidChang = 310;\r\n+                            temp['QiX'] = 938;\r\n+                            temp['QiY'] = 661;\r\n+                            temp['angle'] = -90;\r\n+                            temp['chaoInterQiX'] = 0;\r\n+                            temp['chaoInterQiY'] = 0;\r\n+                            temp['chang'] = pointMidChang;\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line5'] = temp;\r\n+\r\n+                        } else if (this._allPointRect[1].limitQiMaxy && this._allPointRect[3].limitEndMiny) {\r\n+\r\n+                            console.log('===== 直线 =====');\r\n+                            // 直线\r\n+                            temp['QiX'] = 938;\r\n+                            temp['QiY'] = 661;\r\n+                            temp['angle'] = -90;\r\n+                            temp['chaoInterQiX'] = 0;\r\n+                            temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y - temp['QiY'];\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = true;\r\n+                            state.allTouchLinesPos['line5'] = temp;\r\n+\r\n+                        } else if (this._allPointRect[1].limitQiMaxy && !this._allPointRect[3].limitEndMiny) {\r\n+\r\n+                            console.log('===== 下点超出射线 =====')\r\n+\r\n+                            temp['QiX'] = 938;\r\n+                            temp['QiY'] = 661;\r\n+                            temp['angle'] = -90;\r\n+                            temp['chaoInterQiX'] = 0;\r\n+                            temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y - temp['QiY'];\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line5'] = temp;\r\n+\r\n+\r\n+                        } else if (!this._allPointRect[1].limitQiMaxy && this._allPointRect[3].limitEndMiny) {\r\n+\r\n+                            console.log('===== 上点超出射线 =====');\r\n+                            // 上点超出射线\r\n+\r\n+                            temp['QiX'] = 938;\r\n+                            temp['QiY'] = 661;\r\n+                            temp['angle'] = -90;\r\n+                            temp['chaoInterQiX'] = 0;\r\n+                            temp['chaoInterQiY'] = 0;\r\n+\r\n+                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n+                            temp['result'] = false;\r\n+                            state.allTouchLinesPos['line4'] = temp;\r\n+\r\n+                        }\r\n                     }\r\n                 }\r\n \r\n                 setTimeout(() => {\r\n"
                },
                {
                    "date": 1625483773585,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -704,9 +704,9 @@\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line4'] = temp;\r\n \r\n                         }\r\n-                    } else if (this._allPointRect[1].isContains && this._allPointRect[3].isContains) {\r\n+                    } else if (this._allPointRect[3].isContains && this._allPointRect[2].isContains) {\r\n \r\n                         if (this._allPointRect[1].isPointInner && this._allPointRect[3].isPointInner) {\r\n \r\n                             console.log('===== 线段 =====');\r\n"
                },
                {
                    "date": 1625483780063,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -706,9 +706,9 @@\n \r\n                         }\r\n                     } else if (this._allPointRect[3].isContains && this._allPointRect[2].isContains) {\r\n \r\n-                        if (this._allPointRect[1].isPointInner && this._allPointRect[3].isPointInner) {\r\n+                        if (this._allPointRect[3].isPointInner && this._allPointRect[2].isPointInner) {\r\n \r\n                             console.log('===== 线段 =====');\r\n                             //线段\r\n                             let pointMidChang = 310;\r\n"
                },
                {
                    "date": 1625483882740,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -711,10 +711,10 @@\n \r\n                             console.log('===== 线段 =====');\r\n                             //线段\r\n                             let pointMidChang = 310;\r\n-                            temp['QiX'] = 938;\r\n-                            temp['QiY'] = 661;\r\n+                            temp['QiX'] = 947;\r\n+                            temp['QiY'] = 348;\r\n                             temp['angle'] = -90;\r\n                             temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = 0;\r\n                             temp['chang'] = pointMidChang;\r\n"
                },
                {
                    "date": 1625483889267,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -702,10 +702,10 @@\n \r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line4'] = temp;\r\n+                        }\r\n \r\n-                        }\r\n                     } else if (this._allPointRect[3].isContains && this._allPointRect[2].isContains) {\r\n \r\n                         if (this._allPointRect[3].isPointInner && this._allPointRect[2].isPointInner) {\r\n \r\n"
                },
                {
                    "date": 1625483924998,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -710,9 +710,9 @@\n                         if (this._allPointRect[3].isPointInner && this._allPointRect[2].isPointInner) {\r\n \r\n                             console.log('===== 线段 =====');\r\n                             //线段\r\n-                            let pointMidChang = 310;\r\n+                            let pointMidChang = 210;\r\n                             temp['QiX'] = 947;\r\n                             temp['QiY'] = 348;\r\n                             temp['angle'] = -90;\r\n                             temp['chaoInterQiX'] = 0;\r\n"
                },
                {
                    "date": 1625483932128,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -713,9 +713,9 @@\n                             //线段\r\n                             let pointMidChang = 210;\r\n                             temp['QiX'] = 947;\r\n                             temp['QiY'] = 348;\r\n-                            temp['angle'] = -90;\r\n+                            temp['angle'] = 44;\r\n                             temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = 0;\r\n                             temp['chang'] = pointMidChang;\r\n                             temp['result'] = false;\r\n"
                },
                {
                    "date": 1625483942765,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -718,9 +718,9 @@\n                             temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = 0;\r\n                             temp['chang'] = pointMidChang;\r\n                             temp['result'] = false;\r\n-                            state.allTouchLinesPos['line5'] = temp;\r\n+                            state.allTouchLinesPos['line6'] = temp;\r\n \r\n                         } else if (this._allPointRect[1].limitQiMaxy && this._allPointRect[3].limitEndMiny) {\r\n \r\n                             console.log('===== 直线 =====');\r\n"
                },
                {
                    "date": 1625483954689,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -720,9 +720,9 @@\n                             temp['chang'] = pointMidChang;\r\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line6'] = temp;\r\n \r\n-                        } else if (this._allPointRect[1].limitQiMaxy && this._allPointRect[3].limitEndMiny) {\r\n+                        } else if (this._allPointRect[3].limitQiMaxy && this._allPointRect[2].limitEndMiny) {\r\n \r\n                             console.log('===== 直线 =====');\r\n                             // 直线\r\n                             temp['QiX'] = 938;\r\n"
                },
                {
                    "date": 1625483978962,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -720,9 +720,9 @@\n                             temp['chang'] = pointMidChang;\r\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line6'] = temp;\r\n \r\n-                        } else if (this._allPointRect[3].limitQiMaxy && this._allPointRect[2].limitEndMiny) {\r\n+                        } else if (this._allPointRect[3].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n \r\n                             console.log('===== 直线 =====');\r\n                             // 直线\r\n                             temp['QiX'] = 938;\r\n"
                },
                {
                    "date": 1625483986539,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -724,11 +724,11 @@\n                         } else if (this._allPointRect[3].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n \r\n                             console.log('===== 直线 =====');\r\n                             // 直线\r\n-                            temp['QiX'] = 938;\r\n-                            temp['QiY'] = 661;\r\n-                            temp['angle'] = -90;\r\n+                            temp['QiX'] = 947;\r\n+                            temp['QiY'] = 348;\r\n+                            temp['angle'] = 44;\r\n                             temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y - temp['QiY'];\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n"
                },
                {
                    "date": 1625484100040,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -727,9 +727,9 @@\n                             // 直线\r\n                             temp['QiX'] = 947;\r\n                             temp['QiY'] = 348;\r\n                             temp['angle'] = 44;\r\n-                            temp['chaoInterQiX'] = 0;\r\n+                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n                             temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y - temp['QiY'];\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n                             state.allTouchLinesPos['line5'] = temp;\r\n"
                },
                {
                    "date": 1625484110145,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -728,9 +728,9 @@\n                             temp['QiX'] = 947;\r\n                             temp['QiY'] = 348;\r\n                             temp['angle'] = 44;\r\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n-                            temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y - temp['QiY'];\r\n+                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n                             state.allTouchLinesPos['line5'] = temp;\r\n \r\n"
                },
                {
                    "date": 1625484127017,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -731,9 +731,9 @@\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n                             temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n-                            state.allTouchLinesPos['line5'] = temp;\r\n+                            state.allTouchLinesPos['line6'] = temp;\r\n \r\n                         } else if (this._allPointRect[1].limitQiMaxy && !this._allPointRect[3].limitEndMiny) {\r\n \r\n                             console.log('===== 下点超出射线 =====')\r\n"
                },
                {
                    "date": 1625484134677,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -737,11 +737,11 @@\n                         } else if (this._allPointRect[1].limitQiMaxy && !this._allPointRect[3].limitEndMiny) {\r\n \r\n                             console.log('===== 下点超出射线 =====')\r\n \r\n-                            temp['QiX'] = 938;\r\n-                            temp['QiY'] = 661;\r\n-                            temp['angle'] = -90;\r\n+                            temp['QiX'] = 947;\r\n+                            temp['QiY'] = 348;\r\n+                            temp['angle'] = 44;\r\n                             temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y - temp['QiY'];\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = false;\r\n"
                },
                {
                    "date": 1625484173873,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -735,9 +735,9 @@\n                             state.allTouchLinesPos['line6'] = temp;\r\n \r\n                         } else if (this._allPointRect[1].limitQiMaxy && !this._allPointRect[3].limitEndMiny) {\r\n \r\n-                            console.log('===== 下点超出射线 =====')\r\n+                            console.log('===== 左点超出射线 =====')\r\n \r\n                             temp['QiX'] = 947;\r\n                             temp['QiY'] = 348;\r\n                             temp['angle'] = 44;\r\n"
                },
                {
                    "date": 1625484184309,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -740,9 +740,9 @@\n \r\n                             temp['QiX'] = 947;\r\n                             temp['QiY'] = 348;\r\n                             temp['angle'] = 44;\r\n-                            temp['chaoInterQiX'] = 0;\r\n+                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n                             temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y - temp['QiY'];\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line5'] = temp;\r\n"
                },
                {
                    "date": 1625484241813,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -741,9 +741,9 @@\n                             temp['QiX'] = 947;\r\n                             temp['QiY'] = 348;\r\n                             temp['angle'] = 44;\r\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n-                            temp['chaoInterQiY'] = this._curTouchesPos[this._curTouchesPos.length - 1].y - temp['QiY'];\r\n+                            temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line5'] = temp;\r\n \r\n"
                },
                {
                    "date": 1625484260539,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -744,9 +744,9 @@\n                             temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n                             temp['chaoInterQiY'] = Math.tan(temp['angle'] * 3.14 / 180) * temp['chaoInterQiX'];\r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = false;\r\n-                            state.allTouchLinesPos['line5'] = temp;\r\n+                            state.allTouchLinesPos['line6'] = temp;\r\n \r\n \r\n                         } else if (!this._allPointRect[1].limitQiMaxy && this._allPointRect[3].limitEndMiny) {\r\n \r\n"
                },
                {
                    "date": 1625484266858,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -749,9 +749,9 @@\n \r\n \r\n                         } else if (!this._allPointRect[1].limitQiMaxy && this._allPointRect[3].limitEndMiny) {\r\n \r\n-                            console.log('===== 上点超出射线 =====');\r\n+                            console.log('===== 右点超出射线 =====');\r\n                             // 上点超出射线\r\n \r\n                             temp['QiX'] = 938;\r\n                             temp['QiY'] = 661;\r\n"
                },
                {
                    "date": 1625484272370,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -752,11 +752,11 @@\n \r\n                             console.log('===== 右点超出射线 =====');\r\n                             // 上点超出射线\r\n \r\n-                            temp['QiX'] = 938;\r\n-                            temp['QiY'] = 661;\r\n-                            temp['angle'] = -90;\r\n+                            temp['QiX'] = 947;\r\n+                            temp['QiY'] = 348;\r\n+                            temp['angle'] = 44;\r\n                             temp['chaoInterQiX'] = 0;\r\n                             temp['chaoInterQiY'] = 0;\r\n \r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n"
                },
                {
                    "date": 1625484294073,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -750,9 +750,9 @@\n \r\n                         } else if (!this._allPointRect[1].limitQiMaxy && this._allPointRect[3].limitEndMiny) {\r\n \r\n                             console.log('===== 右点超出射线 =====');\r\n-                            // 上点超出射线\r\n+                            // 右点超出射线\r\n \r\n                             temp['QiX'] = 947;\r\n                             temp['QiY'] = 348;\r\n                             temp['angle'] = 44;\r\n"
                },
                {
                    "date": 1625484441582,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -733,9 +733,9 @@\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n                             state.allTouchLinesPos['line6'] = temp;\r\n \r\n-                        } else if (this._allPointRect[1].limitQiMaxy && !this._allPointRect[3].limitEndMiny) {\r\n+                        } else if (this._allPointRect[3].limitQiMinx && !this._allPointRect[3].limitEndMaxx) {\r\n \r\n                             console.log('===== 左点超出射线 =====')\r\n \r\n                             temp['QiX'] = 947;\r\n"
                },
                {
                    "date": 1625484446808,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -733,9 +733,9 @@\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = true;\r\n                             state.allTouchLinesPos['line6'] = temp;\r\n \r\n-                        } else if (this._allPointRect[3].limitQiMinx && !this._allPointRect[3].limitEndMaxx) {\r\n+                        } else if (this._allPointRect[3].limitQiMinx && !this._allPointRect[2].limitEndMaxx) {\r\n \r\n                             console.log('===== 左点超出射线 =====')\r\n \r\n                             temp['QiX'] = 947;\r\n"
                },
                {
                    "date": 1625484453905,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -747,9 +747,9 @@\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line6'] = temp;\r\n \r\n \r\n-                        } else if (!this._allPointRect[1].limitQiMaxy && this._allPointRect[3].limitEndMiny) {\r\n+                        } else if (!this._allPointRect[1].limitQiMinx && this._allPointRect[3].limitEndMaxx) {\r\n \r\n                             console.log('===== 右点超出射线 =====');\r\n                             // 右点超出射线\r\n \r\n"
                },
                {
                    "date": 1625484459137,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -747,9 +747,9 @@\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line6'] = temp;\r\n \r\n \r\n-                        } else if (!this._allPointRect[1].limitQiMinx && this._allPointRect[3].limitEndMaxx) {\r\n+                        } else if (!this._allPointRect[3].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n \r\n                             console.log('===== 右点超出射线 =====');\r\n                             // 右点超出射线\r\n \r\n"
                },
                {
                    "date": 1625485217488,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -746,9 +746,8 @@\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = false;\r\n                             state.allTouchLinesPos['line6'] = temp;\r\n \r\n-\r\n                         } else if (!this._allPointRect[3].limitQiMinx && this._allPointRect[2].limitEndMaxx) {\r\n \r\n                             console.log('===== 右点超出射线 =====');\r\n                             // 右点超出射线\r\n"
                },
                {
                    "date": 1625485356382,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -759,9 +759,9 @@\n                             temp['chaoInterQiY'] = 0;\r\n \r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = false;\r\n-                            state.allTouchLinesPos['line4'] = temp;\r\n+                            state.allTouchLinesPos['line6'] = temp;\r\n \r\n                         }\r\n                     }\r\n                 }\r\n"
                },
                {
                    "date": 1625485410375,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -701,9 +701,9 @@\n                             temp['chaoInterQiY'] = 0;\r\n \r\n                             temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                             temp['result'] = false;\r\n-                            state.allTouchLinesPos['line4'] = temp;\r\n+                            state.allTouchLinesPos['line5'] = temp;\r\n                         }\r\n \r\n                     } else if (this._allPointRect[3].isContains && this._allPointRect[2].isContains) {\r\n \r\n"
                },
                {
                    "date": 1625493935716,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -161,8 +161,9 @@\n         }\r\n     }\r\n \r\n     _onDrawStart(event) {\r\n+\r\n         console.log('===== start 111 ====' + event.touch.getLocation());\r\n \r\n         let state: any = globalThis._.cloneDeep(this._state);\r\n         if (state.touch === 'no') {\r\n"
                }
            ],
            "date": 1625476565451,
            "name": "Commit-0",
            "content": "\r\n/*\r\n * @Descripttion: \r\n * @version: \r\n * @Author: ruzhuan\r\n * @Date: 2021-06-08 18:00:00\r\n * @LastEditors: ruzhuan\r\n * @LastEditTime: 2021-06-08 18:00:00\r\n */\r\nconst { loadBundle, loadPrefab, loadResource } = window['GlobalData'].sample;\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class t4_05_model_v6 extends cc.Component {\r\n    private _worldRoot: cc.Node;\r\n\r\n    private _view: fgui.GComponent;\r\n\r\n    private _c1: fgui.Controller;\r\n\r\n    private _title: fgui.GButton;\r\n\r\n    private _titleTrigger: fgui.GLoader;\r\n\r\n    private _submitBtn: fgui.GButton;\r\n\r\n    private _resetBtn: fgui.GButton;\r\n\r\n    private _package: any;\r\n\r\n    private _curTouchesPos: any = [];\r\n\r\n    private _moveCurPos: cc.Vec2;\r\n\r\n    private graphics: cc.Graphics = null;\r\n\r\n    private _dragging = false;\r\n\r\n    private _scheduleTime = 0.08;\r\n\r\n    private _allTouchLinesObj = {};\r\n\r\n    private _allOtherTouchLinesObj = {};\r\n\r\n    private _allPointRect = [];\r\n\r\n    private submitType: any = cc.Enum({\r\n\r\n        No: 0,\r\n        GuideShow: 1,\r\n        WrongFeed: 2,\r\n        RightFeed: 3\r\n    });\r\n\r\n    // 远程动态组件\r\n    private feedback: any;\r\n\r\n    private _state = {};\r\n\r\n    get state(): any {\r\n        return this._state;\r\n    }\r\n\r\n    set state(v: any) {\r\n        this.updateUi(this._state, v);\r\n        this._state = v;\r\n        this.mergeState();\r\n    }\r\n\r\n    async onLoad() {\r\n\r\n        this._worldRoot = cc.find(\"Canvas\").parent;\r\n\r\n        this._view.y = (fgui.GRoot.inst.height - this._view.height) / 2;\r\n        this._view.x = (fgui.GRoot.inst.width - this._view.width) / 2;\r\n\r\n        fgui.GRoot.inst.addChild(this._view);\r\n\r\n        this._c1 = this._view.getController(\"c1\");\r\n\r\n        // 臨時\r\n        // bug 初始设置不播放不生效\r\n        if (this._c1) {\r\n            this._c1.selectedIndex = 1;\r\n            this._c1.selectedIndex = 0;\r\n        }\r\n\r\n        let pointGroup = this._view.getChild(\"n101\").asGroup;\r\n        for (let i = 0; i < this._view.numChildren; i++) {\r\n            if (this._view.getChildAt(i).group == pointGroup) {\r\n                let img = this._view.getChildAt(i).asImage;\r\n                let temp = {\r\n                    'rect': new cc.Rect(img.x, img.y, img.width, img.height),\r\n                    'isContains': false,\r\n                    'minx': img.x,\r\n                    'maxx': img.x + img.width,\r\n                    'miny': img.y,\r\n                    'maxy': img.y + img.height,\r\n                    'limitQiMinx': false,\r\n                    'limitEndMaxx': false,\r\n                    'isPointInner': false\r\n                };\r\n                this._allPointRect.push(temp);\r\n            }\r\n        }\r\n\r\n        this._titleTrigger = this._view.getChild(\"titleTrigger\").asLoader;\r\n        if (this._titleTrigger) this._titleTrigger.on(fgui.Event.CLICK, this._clickTitle, this);\r\n\r\n        this._title = this._view.getChild(\"title\").asButton;\r\n\r\n        this._submitBtn = this._view.getChild(\"submit\").asButton;\r\n        if (this._submitBtn) this._submitBtn.on(fgui.Event.CLICK, this._clickSubmit, this);\r\n\r\n        this._resetBtn = this._view.getChild(\"restart\").asButton;\r\n        this._resetBtn.on(fgui.Event.CLICK, this._clickReset, this);\r\n\r\n        this._view.on(cc.Node.EventType.TOUCH_START, this._onDrawStart, this);\r\n        this._view.on(cc.Node.EventType.TOUCH_MOVE, this._onDrawMove, this);\r\n        this._view.on(cc.Node.EventType.TOUCH_END, this._onDrawEnd, this);\r\n\r\n        let huiNode = new cc.Node('huiNode');\r\n        huiNode.parent = this._worldRoot;\r\n\r\n        this.graphics = huiNode.addComponent(cc.Graphics);\r\n        this.graphics.lineWidth = 20;\r\n        this.graphics.lineJoin = cc.Graphics.LineJoin.ROUND;\r\n        this.graphics.strokeColor = cc.color(255, 0, 0);\r\n        this.graphics.fillColor = cc.color(255, 0, 0);\r\n\r\n        // 初始化state\r\n        this._state = {\r\n            title: false,\r\n            submit: this.submitType.No,\r\n            touch: \"no\",\r\n            reset: false,\r\n            curTouchesPos: cc.Vec2,\r\n            allTouchLinesPos: {},\r\n        }\r\n    }\r\n\r\n    async init(data: any) {\r\n        // 临时 model component json 配置加载\r\n        let { pathConfig, model, components } = data;\r\n        let Package = pathConfig.packageName;\r\n        let GComponent = model.uiPath;\r\n        let { boxSoundUrl, guidIndex } = model.config;\r\n        this._package = Package;\r\n\r\n        this._view = fgui.UIPackage.createObject(Package, GComponent).asCom;\r\n\r\n        if (components) {\r\n            for (const key in components) {\r\n                let componentPath: any = `${pathConfig.remoteUrl}${pathConfig.componentBundlePath}${components[key].bundleName}`;\r\n                let componentBundle: any = await loadBundle(componentPath);\r\n                let componentPrefab: any = await loadPrefab(componentBundle, components[key].prefabName);\r\n                this[key] = componentPrefab;\r\n            }\r\n        }\r\n    }\r\n\r\n    _onDrawStart(event) {\r\n        console.log('===== start 111 ====' + event.touch.getLocation());\r\n\r\n        let state: any = globalThis._.cloneDeep(this._state);\r\n        if (state.touch === 'no') {\r\n            state.touch = 'start';\r\n            let tempPos = new cc.Vec2(event.touch.getLocation().x, event.touch.getLocation().y);\r\n            state.curTouchesPos = tempPos;\r\n            this.updateState(state);\r\n        }\r\n    }\r\n\r\n    _onDrawMove(event) {\r\n\r\n        this._dragging = true;\r\n        this._moveCurPos = new cc.Vec2(event.touch.getLocation().x, event.touch.getLocation().y);\r\n    }\r\n\r\n    _onDrawEnd(event) {\r\n\r\n        this._dragging = false;\r\n\r\n        let tempPos = new cc.Vec2(event.touch.getLocation().x, event.touch.getLocation().y);\r\n        let state: any = globalThis._.cloneDeep(this._state);\r\n        state.curTouchesPos = tempPos;\r\n        state.touch = 'end';\r\n        this.updateState(state);\r\n    }\r\n\r\n\r\n    // 排序方法\r\n    comparePosX() {\r\n        return function (a, b) {\r\n            var value1 = a.x;\r\n            var value2 = b.x;\r\n            return value1 - value2;\r\n        }\r\n    }\r\n\r\n    // 排序方法\r\n    comparePosY() {\r\n        return function (a, b) {\r\n            var value1 = a.y;\r\n            var value2 = b.y;\r\n            return value1 - value2;\r\n        }\r\n    }\r\n\r\n    private _clickReset(evt: any) {\r\n        let state: any = globalThis._.cloneDeep(this._state);\r\n        state.reset = true;\r\n        this.updateState(state);\r\n\r\n    }\r\n\r\n    private _clickSubmit(evt: any) {\r\n\r\n        let state: any = globalThis._.cloneDeep(this._state);\r\n\r\n        if (Object.keys(state.allTouchLinesPos).length === 0) {\r\n\r\n            state.submit = this.submitType.GuideShow;\r\n\r\n        } else {\r\n\r\n            let isAllRight = true;\r\n            for (let key in state.allTouchLinesPos) {\r\n\r\n                if (!state.allTouchLinesPos[key].result) {\r\n                    isAllRight = false;\r\n                    break;\r\n                }\r\n            }\r\n            if (isAllRight) {\r\n                state.submit = this.submitType.RightFeed;\r\n            } else {\r\n                state.submit = this.submitType.WrongFeed;\r\n            }\r\n        }\r\n\r\n        this.updateState(state);\r\n    }\r\n\r\n    private _clickTitle(evt: any) {\r\n        let state: any = globalThis._.cloneDeep(this._state);\r\n        state.title = true;\r\n        this.updateState(state);\r\n    }\r\n\r\n    // 临时\r\n    // 拖拽定时器\r\n    dragSchedule() {\r\n        if (this._dragging) {\r\n\r\n            console.log('==== 3333333 拖拽定时器 ======');\r\n            let state: any = globalThis._.cloneDeep(this._state);\r\n            state.curTouchesPos = this._moveCurPos;\r\n            state.touch = \"move\";\r\n            this.updateState(state);\r\n        }\r\n    }\r\n\r\n    // 获取状态\r\n    getState(data: any) {\r\n        this.updateState(data);\r\n    }\r\n\r\n    // 更新状态层\r\n    updateState(curState: any) {\r\n        if (globalThis._.isEqual(this._state, curState)) return;\r\n        this.state = curState;\r\n    }\r\n\r\n    // 更新ui层\r\n    updateUi(oldState: any, state: any) {\r\n\r\n        if (state.touch == \"start\") {\r\n\r\n            this._curTouchesPos.length = 0;\r\n            this._curTouchesPos.push(state.curTouchesPos);\r\n            this.graphics.clear();\r\n\r\n        } else if (state.touch == \"move\") {\r\n\r\n            this._curTouchesPos.push(state.curTouchesPos);\r\n\r\n            const MIN_POINT_DISTANCE = 4;\r\n\r\n            let worldPos = this.node.convertToWorldSpaceAR(cc.v2(0, 0));\r\n            this.graphics.moveTo(this._curTouchesPos[0].x - worldPos.x, this._curTouchesPos[0].y - worldPos.y);\r\n            let lastIndex = 0;\r\n            for (let i = 1, l = this._curTouchesPos.length; i < l; i++) {\r\n                if (this._curTouchesPos[i].sub(this._curTouchesPos[lastIndex]).mag() < MIN_POINT_DISTANCE) {\r\n                    continue;\r\n                }\r\n                lastIndex = i;\r\n                this.graphics.lineTo(this._curTouchesPos[i].x - worldPos.x, this._curTouchesPos[i].y - worldPos.y);\r\n            }\r\n            this.graphics.stroke();\r\n\r\n        } else if (state.touch == \"end\") {\r\n\r\n            this._curTouchesPos.push(state.curTouchesPos);\r\n\r\n            this.graphics.clear();\r\n            if (this._curTouchesPos.length > 0) {\r\n\r\n                for (let i = 0; i < this._curTouchesPos.length; i++) {\r\n\r\n                    this._curTouchesPos[i].y = this._view.height - this._curTouchesPos[i].y;\r\n                }\r\n\r\n                this._curTouchesPos.sort(this.comparePosX());\r\n\r\n                for (let i = 0; i < this._allPointRect.length; i++) {\r\n\r\n                    this._allPointRect[i].isContains = false;\r\n                    this._allPointRect[i].limitQiMinx = false;\r\n                    this._allPointRect[i].limitEndMaxx = false;\r\n                    this._allPointRect[i].isPointInner = false;\r\n                }\r\n\r\n                let pointNums = 0;\r\n                for (let i = 0; i < this._curTouchesPos.length; i++) {\r\n\r\n                    for (let j = 0; j < this._allPointRect.length; j++) {\r\n\r\n                        if (this._allPointRect[j].rect.contains(this._curTouchesPos[i])) {\r\n                            this._allPointRect[j].isContains = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                for (let i = 0; i < this._allPointRect.length; i++) {\r\n\r\n                    if (this._allPointRect[i].isContains) {\r\n                        pointNums++;\r\n                        continue;\r\n                    }\r\n                }\r\n\r\n                console.log('===== 5555 =====' + pointNums);\r\n\r\n                if (pointNums >= 2) {\r\n\r\n                    for (let i = 0; i < this._allPointRect.length; i++) {\r\n\r\n                        if (this._allPointRect[i].rect.contains(this._curTouchesPos[0]) ||\r\n                            this._allPointRect[i].rect.contains(this._curTouchesPos[this._curTouchesPos.length - 1])) {\r\n                            this._allPointRect[i].isPointInner = true;\r\n                        }\r\n\r\n                        if (this._allPointRect[i].isContains) {\r\n\r\n                            if (this._curTouchesPos[0].x < this._allPointRect[i].minx) {\r\n\r\n                                this._allPointRect[i].limitQiMinx = true;\r\n                            }\r\n                            if (this._curTouchesPos[this._curTouchesPos.length - 1].x > this._allPointRect[i].maxx) {\r\n\r\n                                this._allPointRect[i].limitEndMaxx = true;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    console.log('===== allPointRect ====');\r\n                    console.log(this._allPointRect);\r\n                    console.log(this._curTouchesPos);\r\n\r\n                    let temp = {};\r\n                    if (this._allPointRect[0].isContains && this._allPointRect[1].isContains) {\r\n\r\n                        if (this._allPointRect[0].isPointInner && this._allPointRect[1].isPointInner) {\r\n\r\n                            console.log('===== 线段 =====');\r\n                            //线段\r\n                            let pointMidChang = 426;\r\n                            temp['QiX'] = 542;\r\n                            temp['QiY'] = 647;\r\n                            temp['angle'] = 0;\r\n                            temp['chaoInterQiX'] = 0;\r\n                            temp['chaoInterQiY'] = 0;\r\n                            temp['chang'] = pointMidChang;\r\n                            temp['result'] = false;\r\n                            state.allTouchLinesPos['line1'] = temp;\r\n\r\n                        } else if (this._allPointRect[1].limitQiMinx && this._allPointRect[0].limitEndMaxx) {\r\n\r\n                            console.log('===== 直线 =====');\r\n                            // 直线\r\n                            temp['QiX'] = 542;\r\n                            temp['QiY'] = 647;\r\n                            temp['angle'] = 0;\r\n                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n                            temp['chaoInterQiY'] = 0;\r\n                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                            temp['result'] = false;\r\n                            state.allTouchLinesPos['line1'] = temp;\r\n\r\n                        } else if (this._allPointRect[1].limitQiMinx && !this._allPointRect[0].limitEndMaxx) {\r\n\r\n                            console.log('===== 左点超出射线 =====')\r\n\r\n                            temp['QiX'] = 542;\r\n                            temp['QiY'] = 647;\r\n                            temp['angle'] = 0;\r\n                            temp['chaoInterQiX'] = temp['QiX'] - this._curTouchesPos[0].x;\r\n                            temp['chaoInterQiY'] = 0;\r\n\r\n                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                            ;\r\n                            if (this._allPointRect[0].isPointInner) {\r\n\r\n                                temp['result'] = true;\r\n\r\n                            } else {\r\n\r\n                                temp['result'] = false;\r\n                            }\r\n\r\n                            state.allTouchLinesPos['line1'] = temp;\r\n\r\n\r\n\r\n                        } else if (!this._allPointRect[1].limitQiMinx && this._allPointRect[0].limitEndMaxx) {\r\n\r\n                            console.log('===== 右点超出的射线 =====');\r\n                            // 右点超出的射线\r\n\r\n                            temp['QiX'] = 542;\r\n                            temp['QiY'] = 647;\r\n                            temp['angle'] = 0;\r\n                            temp['chaoInterQiX'] = 0;\r\n                            temp['chaoInterQiY'] = 0;\r\n\r\n                            temp['chang'] = this._curTouchesPos[this._curTouchesPos.length - 1].sub(this._curTouchesPos[0]).mag();\r\n                            temp['result'] = false;\r\n                            state.allTouchLinesPos['line1'] = temp;\r\n\r\n                        }\r\n                    }\r\n                }\r\n\r\n                setTimeout(() => {\r\n\r\n                    let state1: any = globalThis._.cloneDeep(this._state);\r\n                    state1.touch = 'no';\r\n                    state1.allTouchLinesPos = state.allTouchLinesPos;\r\n                    this.updateState(state1);\r\n\r\n                }, 20);\r\n            }\r\n        }\r\n\r\n\r\n        if (!globalThis._.isEqual(oldState.allTouchLinesPos, state.allTouchLinesPos)) {\r\n\r\n            for (let key in this._allTouchLinesObj) {\r\n                this._allTouchLinesObj[key].removeFromParent();\r\n            }\r\n\r\n            for (let key in state.allTouchLinesPos) {\r\n\r\n                let temp = state.allTouchLinesPos[key];\r\n                let zhiLine = fgui.UIPackage.createObjectFromURL('ui://mgpb39d5xdox2a');\r\n                this._view.addChild(zhiLine);\r\n                zhiLine.width = temp['chang'];\r\n\r\n                zhiLine.x = temp.QiX - temp.chaoInterQiX;\r\n                zhiLine.y = temp.QiY - temp.chaoInterQiY;\r\n\r\n                zhiLine.rotation = temp.angle;\r\n                this._allTouchLinesObj[key] = zhiLine;\r\n            }\r\n        }\r\n\r\n        if (!globalThis._.isEqual(oldState.reset, state.reset)) {\r\n\r\n            if (state.reset) {\r\n\r\n                for (let key in state.allTouchLinesPos) {\r\n                    delete state.allTouchLinesPos[key];\r\n                }\r\n\r\n                for (let key in this._allTouchLinesObj) {\r\n                    this._allTouchLinesObj[key].removeFromParent();\r\n                }\r\n\r\n                for (let key in this._allOtherTouchLinesObj) {\r\n                    this._allOtherTouchLinesObj[key].removeFromParent();\r\n                }\r\n\r\n                setTimeout(() => {\r\n\r\n                    let state1: any = globalThis._.cloneDeep(this._state);\r\n                    state1.reset = false;\r\n                    state1.allTouchLinesPos = state.allTouchLinesPos;\r\n                    this.updateState(state1);\r\n\r\n                }, 10);\r\n\r\n            }\r\n\r\n        }\r\n\r\n        if (!globalThis._.isEqual(oldState.submit, state.submit)) {\r\n\r\n            if (state.submit === this.submitType.RightFeed) {\r\n\r\n                this.answerFeedback(true);\r\n\r\n            } else if (state.submit === this.submitType.WrongFeed) {\r\n\r\n                this.answerFeedback(false);\r\n\r\n            } else if (state.submit === this.submitType.GuideShow) {\r\n\r\n                // let keyBtn = this._view.getChild('input1').asButton;\r\n                // this.handTips2(keyBtn);\r\n            }\r\n        }\r\n\r\n        if (!globalThis._.isEqual(oldState.title, state.title)) {\r\n            this.playTitle(state.title);\r\n        }\r\n    }\r\n\r\n    angle(start, end) {\r\n        var diff_x = end.x - start.x,\r\n            diff_y = end.y - start.y;\r\n        //返回角度,不是弧度\r\n        return 360 * Math.atan(diff_y / diff_x) / (2 * Math.PI);\r\n    }\r\n\r\n\r\n    async playTitle(bool: boolean) {\r\n        this._c1.selectedIndex = bool ? 1 : 0;\r\n        if (bool) {\r\n            cc.audioEngine.stopAll();\r\n            this.forbidHandle();\r\n            let item = fgui.UIPackage.getItemByURL(this._title[\"_sound\"]);\r\n            let audio: cc.AudioClip = await loadResource(item.file, cc.AudioClip);\r\n            let audioId = cc.audioEngine.play(audio, false, 1);\r\n            cc.audioEngine.setFinishCallback(audioId, () => {\r\n                let state: any = globalThis._.cloneDeep(this._state);\r\n                state.title = false;\r\n                this.updateState(state);\r\n            });\r\n        } else {\r\n            this.disableForbidHandle();\r\n        }\r\n    }\r\n\r\n    answerFeedback(bool: boolean) {\r\n        if (!this.feedback) return;\r\n        let feedback: any = cc.instantiate(this.feedback);\r\n        feedback.x = 960;\r\n        feedback.y = 540;\r\n        let feedbackJs: any = feedback.getComponent(cc.Component);\r\n        feedbackJs.init(bool);\r\n        feedback.parent = cc.find(\"Canvas\").parent;\r\n\r\n        setTimeout(() => {\r\n            feedback.destroy();\r\n            let state: any = globalThis._.cloneDeep(this._state);\r\n            state.submit = this.submitType.No;\r\n            this.updateState(state);\r\n        }, 2000);\r\n    }\r\n\r\n\r\n    /**\r\n     * 点击指引\r\n     * @param obj 点击对象\r\n     */\r\n    handTips2(obj: fgui.GObject) {\r\n        let hand = fgui.UIPackage.createObject(this._package, 'hand');\r\n        this._view.addChild(hand);\r\n        let tempX = obj.x;\r\n        let tempY = obj.y;\r\n\r\n        hand.x = tempX;\r\n        hand.y = tempY;\r\n\r\n        cc.tween(hand).to(0.3, {\r\n            x: tempX - 30,\r\n            y: tempY - 30\r\n        }).to(0.3, {\r\n            x: tempX,\r\n            y: tempY\r\n        }).to(0.3, {\r\n            x: tempX - 30,\r\n            y: tempY - 30\r\n        }).to(0.3, {\r\n            x: tempX,\r\n            y: tempY\r\n        }).call(() => {\r\n            this._view.removeChild(hand);\r\n            hand = null;\r\n            let state: any = globalThis._.cloneDeep(this._state);\r\n            state.submit = this.submitType.No;\r\n            this.updateState(state)\r\n        }).start();\r\n    }\r\n\r\n    // 运行时 禁止操作\r\n    forbidHandle() {\r\n        console.log('===  运行时 禁止操作 =====');\r\n        let handleMask = this._worldRoot.getChildByName('handleMask');\r\n        if (!handleMask) {\r\n            let handleMask = new cc.Node('handleMask');\r\n            handleMask.addComponent(cc.BlockInputEvents);\r\n            handleMask.parent = this._worldRoot;\r\n            handleMask.width = 1920;\r\n            handleMask.height = 1080;\r\n            handleMask.x = 960;\r\n            handleMask.y = 540;\r\n        }\r\n    }\r\n\r\n    // 消除禁止\r\n    disableForbidHandle() {\r\n        let handleMask = this._worldRoot.getChildByName('handleMask');\r\n        if (handleMask) handleMask.destroy();\r\n    }\r\n\r\n    // 注册状态，及获取状态的方法\r\n    registerState() {\r\n        if (window['GlobalData'].sample.registerState) window['GlobalData'].sample.registerState.call(this);\r\n    }\r\n\r\n    // 解除状态，及获取状态的方法\r\n    relieveState() {\r\n        if (window['GlobalData'].sample.relieveState) window['GlobalData'].sample.relieveState.call(this);\r\n    }\r\n\r\n    // 本组件状态合并到全局\r\n    mergeState() {\r\n        if (window['GlobalData'].sample.mergeState) window['GlobalData'].sample.mergeState.call(this);\r\n    }\r\n\r\n    onEnable() {\r\n        this.registerState();\r\n        this.schedule(this.dragSchedule, this._scheduleTime);\r\n    }\r\n\r\n    onDisable() {\r\n        this.relieveState();\r\n        cc.audioEngine.stopAll();\r\n    }\r\n}\r\n"
        }
    ]
}