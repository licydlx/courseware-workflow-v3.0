{"version":3,"sources":["assets\\prefabLibrary\\models\\dragAnswer\\dragAnswer-model01-v1.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["/*\r\n * @Descripttion: \r\n * @version: \r\n * @Author: ydlx\r\n * @Date: 2021-03-26 18:05:12\r\n * @LastEditors: ydlx\r\n * @LastEditTime: 2021-04-15 19:04:14\r\n */\r\nconst { pointBelongArea } = window['GlobalData'].utils;\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class dragAnswer_model01_v1 extends cc.Component {\r\n    private _view: fgui.GComponent;\r\n    private _dragBtn: fgui.GButton;\r\n    private _btnBox: fgui.GButton;\r\n    private _dragIcon: fgui.GImage;\r\n    private _grids = [];\r\n\r\n    private _moveArr = [];\r\n    private _test:fgui.GLoader;\r\n\r\n\r\n    private _state = {}\r\n\r\n    get state(): any {\r\n        return this._state;\r\n    }\r\n\r\n    set state(v: any) {\r\n        this._state = v;\r\n        this.updateUi(this._state);\r\n        this.mergeState();\r\n    }\r\n\r\n    onLoad() {\r\n        this._view.y = (fgui.GRoot.inst.height - this._view.height) / 2;\r\n        fgui.GRoot.inst.addChild(this._view);\r\n\r\n        this._dragBtn = this._view.getChild(\"dragBtn\").asButton;\r\n        this._dragBtn.draggable = true;\r\n        this._dragBtn.on(fgui.Event.DRAG_START, this._onDragStart, this);\r\n        this._dragBtn.on(fgui.Event.TOUCH_MOVE, this._onDragMove, this);\r\n        this._dragBtn.on(fgui.Event.TOUCH_END, this._onDragEnd, this);\r\n         \r\n\r\n\r\n        this._btnBox = this._view.getChild(\"btnBox\").asButton;\r\n        this._btnBox.on(fgui.Event.DROP, this._onDragDrop, this);\r\n        let aGroup = this._btnBox.getChild(\"grids\").asGroup;\r\n\r\n        this._dragIcon = this._view.getChild(\"dragIcon\").asImage;\r\n        this._test = this._view.getChild(\"test\").asLoader;\r\n\r\n        for (let i = 0; i < this._btnBox.numChildren; i++) {\r\n            if (this._btnBox.getChildAt(i).group == aGroup) {\r\n                let grid: fgui.GLoader = this._btnBox.getChildAt(i).asLoader;\r\n                this._grids.push(grid);\r\n            }\r\n        }\r\n\r\n        // this._dragBtn.x = 1400;\r\n        // this._dragBtn.y = 400;\r\n\r\n        // this._btnBox.x = 1400;\r\n        // this._btnBox.y = 400;\r\n\r\n        let arr = [{\"x\":0,\"y\":0},{\"x\":1001.25,\"y\":1031.25},{\"x\":1001.25,\"y\":1031.25},{\"x\":1022,\"y\":1013},{\"x\":1050,\"y\":992},{\"x\":1097,\"y\":956},{\"x\":1164,\"y\":904},{\"x\":1206,\"y\":866},{\"x\":1254,\"y\":829},{\"x\":1301,\"y\":788},{\"x\":1320,\"y\":761},{\"x\":1341,\"y\":731},{\"x\":1356,\"y\":701},{\"x\":1365,\"y\":683},{\"x\":1369,\"y\":660},{\"x\":1373,\"y\":647},{\"x\":1374,\"y\":632},{\"x\":1374,\"y\":619},{\"x\":1374,\"y\":609},{\"x\":1374,\"y\":604},{\"x\":1374,\"y\":596},{\"x\":1374,\"y\":593}]\r\n        // this._dragBtn.stopDrag();\r\n        // // console.log(this._grids);\r\n        // fgui.DragDropManager.inst.startDrag(this._dragBtn, this._dragBtn.icon, this._dragBtn.icon);\r\n\r\n        // let tag = 0;\r\n        // // 以秒为单位的时间间隔\r\n        // var interval = .5;\r\n        // // 重复次数\r\n        // var repeat = arr.length - 1;\r\n        // // 开始延时\r\n        // var delay = 1;\r\n        // this.schedule(()=> {\r\n        //     // this._dragIcon.x = arr[tag].x;\r\n        //     // this._dragIcon.y = arr[tag].y;\r\n        //     // let a = this._dragIcon.localToGlobal(arr[tag].x,arr[tag].y);\r\n        //     // let b = this._dragIcon.globalToLocal(arr[tag].x,arr[tag].y);\r\n        //     // console.log(\"第\" + tag)\r\n        //     // console.log(\"x:\" + arr[tag].x + \";y:\" + arr[tag].y)\r\n        //     // console.log(\"ToGlobal\")\r\n        //     // console.log(\"x:\" + a.x + \";y:\" + a.y)\r\n        //     // console.log(\"ToLocal\")\r\n        //     // console.log(\"x:\" + b.x + \";y:\" + b.y)\r\n\r\n        //     this._dragIcon.x = arr[tag].x;\r\n        //     this._dragIcon.y = arr[tag].y;\r\n        //     // console.log(\"第\" + tag)\r\n        //     // let test:any = globalThis._.cloneDeep(this._dragIcon);\r\n            \r\n        //     tag++;\r\n        // }, interval, repeat, delay);\r\n\r\n        // this._dragIcon.x = 1374;\r\n        // this._dragIcon.y = 593;\r\n\r\n        // let btn:fgui.GObject = this._view.getChild(\"dragBtn\");\r\n        // console.log(btn)\r\n\r\n        // let a:cc.Vec2 = btn.localToGlobal(btn.x,btn.y);\r\n        // console.log(a)\r\n\r\n        // let b = btn.globalToLocal(1838,2004)\r\n        // console.log(b)\r\n\r\n        console.log(this._btnBox);\r\n    }\r\n\r\n    init(data: any) {\r\n        let { Package, GComponent } = data;\r\n        this._view = fgui.UIPackage.createObject(Package, GComponent).asCom;\r\n    }\r\n\r\n    private _onDragStart(evt: fgui.Event): void {\r\n        let btn: fgui.GObject = fgui.GObject.cast(evt.currentTarget);\r\n        // 取消对原目标的拖动，换成一个替代品\r\n        // btn.stopDrag();\r\n        // fgui.DragDropManager.inst.startDrag(btn, btn.icon,btn.icon);\r\n        // this._test.startDrag();\r\n        // fgui.DragDropManager.inst.startDrag(this._test, this._test.icon, this._test.icon);\r\n        // if (evt) {\r\n        //     let btn: fgui.GObject = fgui.GObject.cast(evt.currentTarget);\r\n        //     // 取消对原目标的拖动，换成一个替代品\r\n        //     btn.stopDrag();\r\n        //     fgui.DragDropManager.inst.startDrag(btn, btn.icon, btn.icon); \r\n        // } else {\r\n        //     let btn:fgui.GObject = this._view.getChild(\"dragBtn\");\r\n        //     btn.stopDrag();\r\n        //     fgui.DragDropManager.inst.startDrag(btn, btn.icon, btn.icon); \r\n        // }\r\n\r\n        // fgui.DragDropManager.inst.dragAgent.on(fgui.Event.TOUCH_END, this._agentTouchEnd, this);\r\n        // console.dir(fgui.DragDropManager.inst.dragAgent)\r\n        // fgui.DragDropManager.inst.dragAgent.x = 1374;\r\n        // fgui.DragDropManager.inst.dragAgent.y = 593;\r\n        // let a:cc.Vec2 = fgui.DragDropManager.inst.dragAgent.localToGlobal(fgui.DragDropManager.inst.dragAgent.x,fgui.DragDropManager.inst.dragAgent.y);\r\n        // let b = this._dragIcon.globalToLocal(a.x,a.y);\r\n        // console.log({x:fgui.DragDropManager.inst.dragAgent.x,y:fgui.DragDropManager.inst.dragAgent.y});\r\n        // console.log(a);\r\n        // console.log(b);\r\n        // this._dragIcon.x = b.x - 98;\r\n        // this._dragIcon.y = b.y - 72;\r\n        // console.log(fgui.DragDropManager.inst.dragAgent)\r\n        // console.log(this._dragBtn)\r\n        // console.log(this._dragIcon)\r\n    }\r\n\r\n    private _agentTouchEnd(evt: fgui.Event): void {\r\n        console.log(JSON.stringify(this._moveArr));\r\n    }\r\n\r\n    private _onDragMove(evt: fgui.Event, pos: any): void {\r\n        // console.log(\"x:\" + fgui.DragDropManager.inst)\r\n        \r\n        // console.log(fgui.DragDropManager.inst.dragging);\r\n        // let a:cc.Vec2 = fgui.DragDropManager.inst.dragAgent.localToGlobal(fgui.DragDropManager.inst.dragAgent.x,fgui.DragDropManager.inst.dragAgent.y);\r\n        // this._moveArr.push({x:fgui.DragDropManager.inst.dragAgent.x,y:fgui.DragDropManager.inst.dragAgent.y});\r\n        \r\n        // console.log(\"_onDragMove\");\r\n        // console.log(evt);\r\n        // let t:any = globalThis._.cloneDeep(evt.pos);\r\n        // console.log(`{x:${t.x},y:${t.y}}`);\r\n        // if (evt) {\r\n        //     console.log(`{x:${fgui.DragDropManager.inst.dragAgent.x},y:${fgui.DragDropManager.inst.dragAgent.y}}`);\r\n        // } else {\r\n        //     fgui.DragDropManager.inst.dragAgent.x = pos.x;\r\n        //     fgui.DragDropManager.inst.dragAgent.y = pos.y; \r\n\r\n        //     let test:any = globalThis._.cloneDeep(fgui.DragDropManager.inst.dragAgent);\r\n        //     console.log(test);\r\n        // }\r\n\r\n        // console.log(evt)\r\n        // this._dragBtn.x = evt.pos.x;\r\n        // this._dragBtn.y = evt.pos.y;\r\n        // fgui.DragDropManager.inst.dragAgent.x = evt.pos.x;\r\n        // fgui.DragDropManager.inst.dragAgent.y = evt.pos.y;\r\n    }\r\n\r\n    private _onDragEnd(evt: fgui.Event): void{\r\n        console.log(\"_onDragEnd\");\r\n        console.log(evt.currentTarget);\r\n\r\n        console.log(\"this._dragBtn:\" + `x:${this._dragBtn.x};y:${this._dragBtn.y}`);\r\n        \r\n        let a:cc.Vec2 = this._dragBtn.localToGlobal(this._dragBtn.x,this._dragBtn.y);\r\n        console.log(a)\r\n\r\n        let b = this._btnBox.globalToLocal(a.x,a.y)\r\n        console.log(b)\r\n        console.log(\"this._btnBox:\" + `x:${this._btnBox.x};y:${this._btnBox.y}`);\r\n        console.log(this._btnBox.width);\r\n        console.log(this._btnBox.height);\r\n        \r\n        let test = pointBelongArea(\"rectangle\",this._btnBox,this._dragBtn);\r\n        console.log(test);\r\n    }\r\n    \r\n\r\n    private _onDragDrop(target: fgui.GComponent, data: any): void {\r\n        console.log(\"_onDragDrop\")\r\n        console.log(target)\r\n        console.log(data)\r\n\r\n        // console.log(fgui.DragDropManager.inst.dragAgent)\r\n        // console.log(data);\r\n        // let grid:any = this._grids.find(v => v.url === null);\r\n        // console.log(grid);\r\n        // if (grid) {\r\n        //     grid.url = data;\r\n        // } \r\n    }\r\n\r\n    // 获取状态\r\n    getState(data: any) {\r\n        this.updateState(data);\r\n    }\r\n\r\n    // 更新状态层\r\n    updateState(curState: any) {\r\n        if (globalThis._.isEqual(this._state, curState)) return;\r\n        this.state = curState;\r\n    }\r\n\r\n    // 更新ui层\r\n    updateUi(state: any) { }\r\n\r\n    // 注册状态，及获取状态的方法\r\n    registerState() {\r\n        if (window['GlobalData'].sample.registerState) window['GlobalData'].sample.registerState.call(this);\r\n    }\r\n\r\n    // 解除状态，及获取状态的方法\r\n    relieveState() {\r\n        if (window['GlobalData'].sample.relieveState) window['GlobalData'].sample.relieveState.call(this);\r\n    }\r\n\r\n    // 本组件状态合并到全局\r\n    mergeState() {\r\n        if (window['GlobalData'].sample.mergeState) window['GlobalData'].sample.mergeState.call(this);\r\n    }\r\n\r\n    onEnable() {\r\n        this.registerState();\r\n    }\r\n\r\n    onDisable() {\r\n        this.relieveState();\r\n    }\r\n}\r\n"]}