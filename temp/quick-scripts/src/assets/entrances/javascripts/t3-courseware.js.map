{"version":3,"sources":["assets\\entrances\\javascripts\\t3-courseware.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["/*\r\n * @Descripttion: \r\n * @version: \r\n * @Author: ydlx\r\n * @Date: 2021-03-26 18:05:12\r\n * @LastEditors: ydlx\r\n * @LastEditTime: 2021-04-12 10:03:37\r\n */\r\nconst gameData = window['GlobalData'].gameData;\r\nconst { loadBundle, loadPrefab, ajax } = window['GlobalData'].sample;\r\nconst { parseURL } = window['GlobalData'].utils;\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class t3_courseware extends cc.Component {\r\n\r\n    @property({\r\n        displayName: '本地测试'\r\n    })\r\n    test = false;\r\n\r\n    @property({\r\n        type: cc.JsonAsset,\r\n        displayName: '配置 文件'\r\n    })\r\n    configJson: cc.JsonAsset = null;\r\n\r\n    async onLoad() {\r\n        let configJson: any;\r\n        if (this.test) {\r\n            // 本地测试\r\n            configJson = this.configJson.json;\r\n        } else {\r\n            // 获取配置文件\r\n            let { courseName } = parseURL(window.location.href);\r\n            if (!courseName) {\r\n                return;\r\n            }\r\n            let env: any = window.location.href.includes('test') ? 'test' : 'prod';\r\n            let json: any = await ajax(\"GET\", `${gameData.apiOrigin}/getConfigJson?courseName=${courseName ? courseName.toLowerCase() : ''}&env=${env}`);\r\n            configJson = JSON.parse(json);\r\n        }\r\n\r\n        // 生成控制器\r\n        let contrllerPath: any = `${configJson.pathConfig.remoteUrl}${configJson.pathConfig.controllerBundlePath}${configJson.pathConfig.controllerName}`;\r\n        let contrllerBundle: any = await loadBundle(contrllerPath);\r\n        let contrllerPrefab: any = await loadPrefab(contrllerBundle, contrllerBundle.name);\r\n        let contrllerNode: any = cc.instantiate(contrllerPrefab);\r\n        contrllerNode.parent = this.node.parent;\r\n        let controllerJs: any = contrllerNode.getComponent(cc.Component);\r\n        controllerJs.init(configJson);\r\n    }\r\n\r\n    choosePage(e,ced){\r\n        console.log(e);\r\n        console.log(ced);\r\n    }\r\n\r\n    // private _view: fgui.GComponent;\r\n    // private _triggerGroup: fgui.GGroup;\r\n    // private _radioSwitch1: fgui.Controller;\r\n\r\n    // async onLoad() {\r\n    //     console.dir(window[\"GlobalData\"])\r\n    //     let bundle: any = await this.loadBundle(\"t3-01\");\r\n    //     // console.log(bundle);\r\n    //     let bundle01: any = await this.loadBundle(\"js01\");\r\n    //     // console.log(bundle01);\r\n\r\n    //     // let prefab:any = await this.loadPrefab(bundle01,\"./js01-01\");\r\n    //     // console.log(prefab);\r\n    //     // let node:any = cc.instantiate(prefab);\r\n    //     // this._nodeJs = node.getComponent(cc.Component);\r\n    //     // console.log(this._nodeJs);\r\n\r\n    //     fgui.GRoot.create();\r\n\r\n    //     //这里填写的是相对于resources里的路径\r\n    //     // let js:any = this._nodeJs.constructor;\r\n    //     // console.log(js)\r\n    //     // this.addComponent(js);\r\n    //     fgui.UIPackage.loadPackage(bundle, \"t1-01\", this.onUILoaded.bind(this));\r\n    // }\r\n\r\n    // onUILoaded() {\r\n    //     // 这里不需要再调用addPackage了，直接可以开始创建界面了\r\n    //     this._view = fgui.UIPackage.createObject(\"t1-01\", \"radioSwitch-model01-v1-p2\").asCom;\r\n    //     this._view.setSize(fgui.GRoot.inst.width, fgui.GRoot.inst.height);\r\n\r\n    //     // 以下几种方式都可以将view显示出来：\r\n    //     // 1，直接加到GRoot显示出来\r\n    //     fgui.GRoot.inst.addChild(this._view);\r\n\r\n    //     this._triggerGroup = this._view.getChild(\"triggerGroup\").asGroup;\r\n    //     // console.log(this._triggerGroup);\r\n\r\n    //     let cnt = this._view.numChildren;\r\n    //     for (let i = 0; i < cnt; i++) {\r\n    //         if (this._view.getChildAt(i).group == this._triggerGroup) {\r\n    //             this._view.getChildAt(i).onClick(this.switchShow, this);\r\n    //         }\r\n    //     }\r\n\r\n    //     this._radioSwitch1 = this._view.getController(\"radioSwitch1\");\r\n    //     this._radioSwitch1.on(fgui.Event.STATUS_CHANGED, this.onChanged, this);\r\n    //     this._radioSwitch1.selectedIndex = 2;\r\n    // }\r\n\r\n    // switchShow(evt: Event): void {\r\n    //     console.log(evt);\r\n    // }\r\n\r\n    // onChanged(e: any) {\r\n    //     console.log(e);\r\n    // }\r\n\r\n\r\n    // update (dt) {}\r\n}\r\n"]}