{"version":3,"sources":["assets\\prefabLibrary\\models\\dragAnswer\\dragAnswer-model03-v1.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import DragAnswerModel03Base from \"./DragAnswerModel03Base\";\r\n\r\n/*\r\n * @Descripttion: \r\n * @version: \r\n * @Author: ydlx\r\n * @Date: 2021-03-26 18:05:12\r\n * @LastEditors: Please set LastEditors\r\n * @LastEditTime: 2021-05-17 15:25:58\r\n */\r\nconst { loadBundle, loadPrefab, loadResource } = window['GlobalData'].sample;\r\nconst { pointBelongArea } = window['GlobalData'].utils;\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class dragAnswer_model03_v1 extends cc.Component {\r\n    private _worldRoot: cc.Node;\r\n    private _c1: fgui.Controller;\r\n    private _c2: fgui.Controller;\r\n\r\n    private _dragBtn: fgui.GButton;\r\n    private _btnBox: fgui.GButton;\r\n\r\n    private dragBox: fgui.GComponent;\r\n    private dropBox: fgui.GComponent;\r\n\r\n    private _submit: fgui.GButton;\r\n    private _title: fgui.GButton;\r\n    private _titleTrigger: fgui.GLoader;\r\n\r\n    protected _view: fgui.GComponent;\r\n\r\n    // fairygui 组件\r\n    private handleGuide: any;\r\n    private lineBlink: any;\r\n\r\n    // 远程动态组件\r\n    private feedback: any;\r\n\r\n    private _colliderBox = [];\r\n    private _collideredBox = [];\r\n\r\n    private _cache = {};\r\n    private _scheduleTime = .3;\r\n    private _dragging = false;\r\n\r\n    private _answer = 0;\r\n\r\n    private _dragIconArr = [];\r\n    private _footNum: number[] = [];\r\n    public pageData: any;\r\n\r\n    private _state: any = {};\r\n\r\n    get state(): any {\r\n        return this._state;\r\n    }\r\n\r\n    set state(v: any) {\r\n        this.updateUi(this._state, v);\r\n        this._state = v;\r\n        this.mergeState();\r\n    }\r\n\r\n\r\n    onLoad() {\r\n        let s = this;\r\n        this._worldRoot = cc.find(\"Canvas\").parent;\r\n\r\n        this._view.y = (fgui.GRoot.inst.height - this._view.height) / 2;\r\n        this._view.x = (fgui.GRoot.inst.width - this._view.width) / 2;\r\n        fgui.GRoot.inst.addChild(this._view);\r\n\r\n        this._c1 = this._view.getController(\"c1\");\r\n        this._c2 = this._view.getController(\"c2\");\r\n        // 臨時\r\n        // bug 初始设置不播放不生效\r\n        if (this._c2) {\r\n            this._c2.selectedIndex = 1;\r\n            this._c2.selectedIndex = 0;\r\n        }\r\n\r\n        s.createUI();\r\n        s.addEvent();\r\n\r\n        // 初始化state\r\n        this._state = {\r\n            drag: \"end\",\r\n            getDropArr: [],\r\n            collider: s._cache[\"colliderBox\"].map((v: any) => v),//拖拽物的位置数组\r\n            colliderIndex: null,//当前拖拽物在数组内的索引\r\n            collidered: this._cache[\"collideredBox\"].map((v: any) => v),//二维数组，存放每个放置区对应的被放置元素\r\n            dropArr: [],\r\n            // dragIconsPosArr: dragIconsPosArr,\r\n            title: false,\r\n            submit: false,\r\n            answer: false\r\n        }\r\n\r\n        // 临时 禁止操作期间 切页\r\n        this.disableForbidHandle();\r\n    }\r\n\r\n    createUI() {\r\n        let s = this;\r\n        this._submit = this._view.getChild(\"submit\").asButton;\r\n        if (this._submit) this._submit.on(fgui.Event.CLICK, this._clickSubmit, this);\r\n\r\n        this._title = this._view.getChild(\"title\").asButton;\r\n        this._titleTrigger = this._view.getChild(\"titleTrigger\").asLoader;\r\n        if (this._titleTrigger) this._titleTrigger.on(fgui.Event.CLICK, this._clickTitle, this);\r\n\r\n        let colliderGroup = this._view.getChild(\"colliderBox\").asGroup;\r\n        let collideredGroup = this._view.getChild(\"collideredBox\").asGroup;\r\n\r\n        s._cache[\"colliderBox\"] = [];\r\n        for (let i = 0; i < this._view.numChildren; i++) {\r\n            if (s._view.getChildAt(i).group == colliderGroup) {\r\n                let btn: fgui.GButton = this._view.getChildAt(i).asButton;\r\n                s._cache['colliderBox'].push({ x: btn.x, y: btn.y, belong: null });\r\n                btn['collideredIndex'] = -1;\r\n                btn.draggable = true;\r\n                btn.on(fgui.Event.TOUCH_BEGIN, this._onDragStart, this);\r\n                btn.on(fgui.Event.TOUCH_MOVE, this._onDragMove, this);\r\n                btn.on(fgui.Event.TOUCH_END, this._onDragEnd, this);\r\n                this._colliderBox.push(btn);\r\n            }\r\n        }\r\n        // console.log('this._colliderBox', this._colliderBox);\r\n\r\n\r\n        s._cache[\"collideredBox\"] = [];\r\n        for (let i = 0; i < this._view.numChildren; i++) {\r\n            if (this._view.getChildAt(i).group == collideredGroup) {\r\n                let btn: fgui.GImage = this._view.getChildAt(i).asImage;\r\n                s._cache['collideredBox'].push([]);\r\n                this._collideredBox.push(btn);\r\n            }\r\n        }\r\n        // console.log('this._collideredBox', this._collideredBox);\r\n\r\n\r\n        /* s.dropBox = fgui.UIPackage.createObject('t4-trialClass-01', 'TypeDropBox1').asCom;\r\n        s.dropBox.x = 368;\r\n        s.dropBox.y = 600;\r\n        s._view.addChild(s.dropBox);\r\n\r\n        s.dragBox = fgui.UIPackage.createObject('t4-trialClass-01', 'TypeDragBox1').asCom;\r\n        s.dragBox.x = 610;\r\n        s.dragBox.y = 250;\r\n        s._view.addChild(s.dragBox); */\r\n        // s.dropBox = s._view.getChild('dropBox').asCom;\r\n        // s.dragBox = s._view.getChild('dragBox').asCom;\r\n\r\n        // let dragIcon = s.pageData.model.config.dragIcon;\r\n        /* for (let key in dragIcon) {\r\n            let dragIconData = dragIcon[key];\r\n            let icon = new fgui.GComponent();\r\n            let iconImg = fgui.UIPackage.createObject('t4-trialClass-01', dragIconData.name).asImage;\r\n            icon.addChild(iconImg);\r\n            icon.setSize(iconImg.width, iconImg.height);\r\n            // icon.setPivot(0.5,0.5,true);\r\n            icon.opaque = true;\r\n            icon.x = dragIconData.x;\r\n            icon.y = dragIconData.y;\r\n            icon['dragOrigin'] = this.getOriginValue(icon);\r\n            console.log('icon = ', icon['dragOrigin']);\r\n\r\n            // icon.touchable = true;\r\n            icon.draggable = true;\r\n\r\n            icon.on(fgui.Event.TOUCH_BEGIN, s._onDragStart, s);\r\n            icon.on(fgui.Event.TOUCH_MOVE, s._onDragMove, s);\r\n            icon.on(fgui.Event.TOUCH_END, s._onDragEnd, s);\r\n\r\n            // icon.on(cc.Node.EventType.TOUCH_START, s._onDragStart, s);\r\n\r\n            s.dragBox.addChild(icon);\r\n            s._dragIconArr.push(icon);\r\n        } */\r\n    }\r\n\r\n    addEvent() {\r\n        // let s = this;\r\n        // s._submitBtn.on(fgui.Event.CLICK, s._clickSubmit, s);\r\n        // s._readTitleBtn.on(fgui.Event.CLICK, s._clickTitle, s);\r\n    }\r\n\r\n    async init(data: any) {\r\n        let s = this;\r\n        s.pageData = data;\r\n        let { pathConfig, model, components } = data;\r\n        let Package = pathConfig.packageName;\r\n        let GComponent = model.uiPath;\r\n        let { answer, ae, dragIcon } = model.config;\r\n\r\n        if (model.uiPath) {\r\n            GComponent = model.uiPath;\r\n            this._view = fgui.UIPackage.createObject(Package, GComponent).asCom;\r\n        }\r\n\r\n        /* s._readTitleBtn = fgui.UIPackage.createObject('t4-trialClass-01', 'TitleCom').asCom;\r\n\r\n        (s._readTitleBtn.getChild('title') as fgui.GLoader).url = fgui.UIPackage.createObject('t4-trialClass-01', 'title_3').asImage.resourceURL;\r\n        s._readTitleBtn.x = 20;\r\n        s._readTitleBtn.y = 50;\r\n        this._view.addChild(s._readTitleBtn);\r\n\r\n\r\n        s._submitBtn = fgui.UIPackage.createObject('t4-trialClass-01', 'SubmitBtn').asCom;\r\n        s._submitBtn.x = 1676;\r\n        s._submitBtn.y = 806;\r\n        this._view.addChild(s._submitBtn); */\r\n\r\n        if (model.config) {\r\n            // if (answer) this._answer = answer;\r\n            // 动效注册\r\n            if (ae) {\r\n                for (let v in ae) {\r\n                    if (ae[v]) {\r\n                        this[v] = {};\r\n                        if (ae[v].component) this[v].component = fgui.UIPackage.createObject(Package, ae[v].component).asCom;\r\n                        if (ae[v].pos) this[v].pos = ae[v].pos;\r\n                    }\r\n                }\r\n            }\r\n            if (answer) s._answer = answer;\r\n            if (dragIcon) {\r\n                for (let key in dragIcon) {\r\n                    s._footNum.push(dragIcon[key].footNum);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (components) {\r\n            for (const key in components) {\r\n                let componentPath: any = `${pathConfig.remoteUrl}${pathConfig.componentBundlePath}${components[key].bundleName}`;\r\n                let componentBundle: any = await loadBundle(componentPath);\r\n                let componentPrefab: any = await loadPrefab(componentBundle, components[key].prefabName);\r\n                this[key] = componentPrefab;\r\n            }\r\n        }\r\n    }\r\n\r\n    getOriginValue(v: any) {\r\n        return {\r\n            x: v.x,\r\n            y: v.y\r\n        }\r\n    }\r\n\r\n    // private _curDragIcon: cc.Node = null;\r\n    // private _offsetPos: cc.Vec2 = new cc.Vec2();\r\n    private _onDragStart(evt: fgui.Event): void {\r\n        let s = this;\r\n        // evt.captureTouch();\r\n        /* s._curDragIcon = evt.currentTarget;\r\n        console.log('_onDragStart');\r\n        console.log(s._curDragIcon);\r\n        console.log(s._curDragIcon.y);\r\n\r\n        let pos = s._curDragIcon.parent.convertToNodeSpaceAR(evt.getLocation());\r\n        s._offsetPos.x = pos.x - s._curDragIcon.x;\r\n        s._offsetPos.y = pos.y - s._curDragIcon.y;\r\n\r\n        s._view.on(cc.Node.EventType.TOUCH_MOVE, s._onDragMove, s);\r\n        s._curDragIcon.once(cc.Node.EventType.TOUCH_END, s._onDragEnd, s); */\r\n        // s._curDragIcon.draggable = true;\r\n\r\n        let collider = fgui.GObject.cast(evt.currentTarget);\r\n        s._view.setChildIndex(collider, s._view.numChildren - 1);\r\n        let colliderIndex = s._colliderBox.findIndex(v => v == collider);\r\n\r\n        let state: any = globalThis._.cloneDeep(s._state);\r\n        state.colliderIndex = colliderIndex;\r\n        s.updateState(state);\r\n        // state.drag = \"start\";\r\n        // state.curDragIcon = s._curDragIcon;\r\n        /* state.curDragIconsPos = {\r\n            x: s._curDragIcon['$gobj'][\"dragOrigin\"].x,\r\n            y: s._curDragIcon['$gobj'][\"dragOrigin\"].y,\r\n        }; */\r\n        // state.answer = state.drops === s._answer;\r\n    }\r\n\r\n    private _onDragMove(evt: fgui.Event): void {\r\n        let s = this;\r\n        // console.log('_onDragMove');\r\n        // if (!s._curDragIcon) return;\r\n        s._dragging = true;\r\n\r\n\r\n        // let pos = s._curDragIcon.parent.convertToNodeSpaceAR(evt.getLocation());\r\n        // s._curDragIcon.x = pos.x - s._offsetPos.x;\r\n        // s._curDragIcon.y = pos.y - s._offsetPos.y;\r\n\r\n        // console.log(s._curDragIcon.x + ' - ' + s._curDragIcon.y);\r\n    }\r\n\r\n    // private dropArr = [];\r\n    private _onDragEnd(evt: fgui.Event): void {\r\n        let s = this;\r\n        if (!this._dragging) return;\r\n        this._dragging = false;\r\n\r\n        let collider: any = fgui.GObject.cast(evt.currentTarget);\r\n        let colliderIndex: number = this._colliderBox.findIndex((v: any) => v == collider);\r\n\r\n        let arr: any = [];\r\n        let collidered: any;\r\n        this._collideredBox.forEach((v: any, i: any) => {\r\n            // if (this._belongArea(collider, v, 500) == true) arr.push(v);\r\n            if (s.isCollisionWithRect(v, collider)) arr.push(v);\r\n        });\r\n\r\n        arr.forEach((v: any, i: any) => {\r\n            if (i == 0) {\r\n                collidered = v;\r\n            } else {\r\n                let pd = this._getDistance(collider, arr[i - 1]);\r\n                let cd = this._getDistance(collider, v);\r\n                if (cd < pd) collidered = v;\r\n            }\r\n        });\r\n\r\n        // 放置区索引，定位到放入了那个放置区\r\n        let collideredIndex: number = this._collideredBox.findIndex((v: any) => v == collidered);\r\n\r\n\r\n        let state: any = globalThis._.cloneDeep(this._state);\r\n        let sss: any = globalThis._.cloneDeep(state);\r\n        // let state = JSON.parse(JSON.stringify(this._state))\r\n        console.log('origin state = ', this._state.dropArr);// right\r\n        console.log('clone state = ', state.dropArr);//rihgt\r\n        console.log('sss = ', sss.dropArr);//wrong\r\n\r\n        // dropArr = state.collidered[collideredIndex].map(v => v);\r\n        // console.warn('state.dropArr[0] = ', state.dropArr);\r\n        // let dropArr = JSON.parse(JSON.stringify(state.dropArr));\r\n        let dropArr = state.dropArr;\r\n        // console.error('s.dropArr11111111111111 = ', dropArr);\r\n\r\n\r\n\r\n        let name = collider.name;\r\n        // let dropArrIndex = dropArr.indexOf(data);//放置区是否已包含当前拖拽元素\r\n        let dropArrIndex = dropArr.findIndex(v => v.name == name);//放置区是否已包含当前拖拽元素\r\n        console.warn('dropArrIndex = ', dropArrIndex);\r\n\r\n        // 1.重置位置 重置到\r\n        // 2.放入放置区\r\n        if (collideredIndex == -1 || dropArr.length == 6) {\r\n            // reset\r\n            // console.log('reset');\r\n            if (dropArrIndex > -1) {\r\n                dropArr.splice(dropArrIndex, 1);\r\n            }\r\n            state.collider[colliderIndex] = {\r\n                x: s._cache[\"colliderBox\"][colliderIndex].x,\r\n                y: s._cache[\"colliderBox\"][colliderIndex].y\r\n            }\r\n            if (collider.collideredIndex > -1) {\r\n                collideredIndex = collider.collideredIndex;\r\n            } else {\r\n                collideredIndex = 0\r\n            }\r\n        } else {\r\n            if (dropArrIndex == -1) {\r\n                // dropArr.push(JSON.parse(JSON.stringify(collider)));\r\n                dropArr.push({ 'name': collider.name });\r\n                // console.warn('pushhhhhhhhhh',dropArr);\r\n            }\r\n        }\r\n        // dropArr.push({ name: collider.name });\r\n        // console.warn('pushhhhhhhhhh',dropArr);\r\n\r\n        let footNum = 0;\r\n        for (let i = 0; i < dropArr.length; i++) {\r\n            let item = dropArr[i];\r\n            // let itemIndex = s._colliderBox.indexOf(item);//状态池中的index\r\n            let itemIndex = s._colliderBox.findIndex(v => v.name == item.name);//状态池中的index\r\n            let pos: cc.Vec2 = new cc.Vec2();\r\n            let collideredBox = s._collideredBox[collideredIndex];\r\n            let curCollider = s._view.getChild(item.name)\r\n            if (item.name.indexOf('left') > -1) {\r\n                footNum += s._footNum[0];\r\n            } else if (item.name.indexOf('right') > -1) {\r\n                footNum += s._footNum[1];\r\n            }\r\n            pos.x = collideredBox.x + 150 + 200 * i;\r\n            pos.y = collideredBox.y + collideredBox.height - curCollider.height;\r\n            state.collider[itemIndex] = {\r\n                x: pos.x,\r\n                y: pos.y,\r\n                belong: collideredIndex\r\n            }\r\n        }\r\n        collider.collideredIndex = collideredIndex;\r\n\r\n        state.drag = \"end\";\r\n        state.submit = false;\r\n        state.colliderIndex = colliderIndex;\r\n        // state.collidered[collideredIndex] = dropArr.concat([]);\r\n        console.log('给state赋值前的', dropArr);\r\n\r\n        state.dropArr = dropArr;\r\n        console.warn('赋值后的', state.dropArr);\r\n\r\n        state.answer = footNum == s._answer ? true : false;\r\n        s.updateState(state);\r\n        // s._curDragIcon = null;\r\n        console.log('------------------------------------------------');\r\n\r\n    }\r\n\r\n    private _getDistance(self: any, area: any) {\r\n        let width = (self.x + self.width / 2) - (area.x + area.width / 2);\r\n        let height = (self.y + self.height / 2) - (area.y + area.height / 2);\r\n        let distance = Math.sqrt(width * width + height * height);\r\n        return distance;\r\n    }\r\n\r\n    /**\r\n     * 矩形碰撞\r\n     * @param rect1 \r\n     * @param rect2 \r\n     * @returns \r\n     */\r\n    private isCollisionWithRect(rect1: fgui.GObject, rect2: fgui.GObject): boolean {\r\n        if (rect1.x >= rect2.x && rect1.x >= rect2.x + rect2.width) {\r\n            return false;\r\n        } else if (rect1.x <= rect2.x && rect1.x + rect1.width <= rect2.x) {\r\n            return false;\r\n        } else if (rect1.y >= rect2.y && rect1.y >= rect2.y + rect2.height) {\r\n            return false;\r\n        } else if (rect1.y <= rect2.y && rect1.y + rect1.height <= rect2.y) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    private _belongArea(self: any, area: any, gap: number = 10) {\r\n        let width = (self.x + self.width / 2) - (area.x + area.width / 2);\r\n        let height = (self.y + self.height / 2) - (area.y + area.height / 2);\r\n        let distance = Math.sqrt(width * width + height * height);\r\n        return distance < gap;\r\n    }\r\n\r\n    private _clickTitle(evt: any) {\r\n        let state: any = globalThis._.cloneDeep(this._state);\r\n        state.title = true;\r\n        this.updateState(state);\r\n    }\r\n\r\n    private async _clickSubmit(evt: any) {\r\n        let state: any = globalThis._.cloneDeep(this._state);\r\n        // state.answer = state.drops === this._answer;\r\n        state.submit = true;\r\n        this.updateState(state);\r\n    }\r\n\r\n\r\n    // 获取状态\r\n    getState(data: any) {\r\n        this.updateState(data);\r\n    }\r\n\r\n    // 更新状态层\r\n    updateState(curState: any) {\r\n        // console.log('old = ', this._state);\r\n        // console.log('new = ', curState);\r\n        // console.log('updateState ', globalThis._.isEqual(this._state, curState));\r\n        if (globalThis._.isEqual(this._state, curState)) return;\r\n        this.state = curState;\r\n    }\r\n\r\n\r\n    // 更新ui层\r\n    updateUi(oldState: any, state: any) {\r\n        let s = this;\r\n        // console.log('updateUi = ', state);\r\n\r\n        if (state.drag == \"move\") {\r\n            this._colliderBox[state.colliderIndex].x = state.collider[state.colliderIndex].x;\r\n            this._colliderBox[state.colliderIndex].y = state.collider[state.colliderIndex].y;\r\n\r\n            // state.curDragIcon.x = state.curDragIconsPos.x;\r\n            // state.curDragIcon.y = state.curDragIconsPos.y;\r\n        }\r\n\r\n        if (state.drag == \"end\") {\r\n            if (!globalThis._.isEqual(oldState.collider, state.collider)) {\r\n                console.log('endddddddddd update ui', state);\r\n\r\n                for (let i = 0; i < state.collider.length; i++) {\r\n                    this._colliderBox[i].x = state.collider[i].x;\r\n                    this._colliderBox[i].y = state.collider[i].y;\r\n                }\r\n            }\r\n            if (!globalThis._.isEqual(oldState.submit, state.submit)) {\r\n                console.log('submittttttt');\r\n\r\n                if (state.submit) {\r\n                    // if (state.drops) {\r\n                    this.answerFeedback(state.answer);\r\n                    // } else {\r\n                    //     this.onHandleGuide();\r\n                    // }\r\n                }\r\n            }\r\n\r\n            if (!globalThis._.isEqual(oldState.title, state.title)) {\r\n                this.playTitle(state.title);\r\n            }\r\n\r\n            /* if (!globalThis._.isEqual(oldState.submit, state.submit)) {\r\n                if (state.submit) {\r\n                    // 根据collider 初始位置 判断 是否被操作过\r\n                    let nv: any = this._colliderBox.map((v: any) => { return { \"x\": v.x, \"y\": v.y } });\r\n                    let bool: boolean = s._cache[\"colliderBox\"].every((v: any, i: any) => v.x == nv[i].x && v.y == nv[i].y);\r\n                    bool ? this.onHandleGuide() : this.onFlicker(state.answer);\r\n                }\r\n            } */\r\n\r\n        }\r\n    }\r\n\r\n    async playTitle(bool: boolean) {\r\n        this._c2.selectedIndex = bool ? 1 : 0;\r\n\r\n        if (bool) {\r\n            cc.audioEngine.stopAll();\r\n            this.forbidHandle();\r\n            let item = fgui.UIPackage.getItemByURL(this._title[\"_sound\"]);\r\n            let audio: cc.AudioClip = await loadResource(item.file, cc.AudioClip);\r\n            let audioId = cc.audioEngine.play(audio, false, 1);\r\n            cc.audioEngine.setFinishCallback(audioId, () => {\r\n                let state: any = globalThis._.cloneDeep(this._state);\r\n                state.title = false;\r\n                this.updateState(state);\r\n            });\r\n        } else {\r\n            this.disableForbidHandle();\r\n        }\r\n    }\r\n\r\n    answerFeedback(bool: boolean) {\r\n        if (!this.feedback) return;\r\n        let state: any = globalThis._.cloneDeep(this._state);\r\n        let feedback: any = cc.instantiate(this.feedback);\r\n        feedback.x = 960;\r\n        feedback.y = 540;\r\n        let feedbackJs: any = feedback.getComponent(cc.Component);\r\n        feedbackJs.init(bool);\r\n        feedback.parent = cc.find(\"Canvas\").parent;\r\n\r\n        setTimeout(() => {\r\n            feedback.destroy();\r\n            state.submit = false;\r\n            this.updateState(state);\r\n        }, 2000);\r\n    }\r\n\r\n    // 天枰提示\r\n    /* onLibraHint() {\r\n        if (!this.lineBlink) return;\r\n        fgui.GRoot.inst.addChild(this.lineBlink.component);\r\n        if (this.lineBlink.pos) {\r\n            this.lineBlink.component.x = (fgui.GRoot.inst.width - this.lineBlink.component.width) / 2 + this.lineBlink.pos.x;\r\n            this.lineBlink.component.y = (fgui.GRoot.inst.height - this.lineBlink.component.height) / 2 + this.lineBlink.pos.y;\r\n        } else {\r\n            this.lineBlink.component.y = (fgui.GRoot.inst.height - this.lineBlink.component.height) / 2;\r\n        }\r\n\r\n        let t: fgui.Transition = this.lineBlink.component.getTransition(\"t0\");\r\n        t.play(() => {\r\n            fgui.GRoot.inst.removeChild(this.lineBlink.component);\r\n        });\r\n    } */\r\n\r\n    // 操作提示\r\n    onHandleGuide() {\r\n        if (!this.handleGuide) return;\r\n        let state: any = globalThis._.cloneDeep(this._state);\r\n        fgui.GRoot.inst.addChild(this.handleGuide.component);\r\n        if (this.handleGuide.pos) {\r\n            this.handleGuide.component.x = (fgui.GRoot.inst.width - this.handleGuide.component.width) / 2 + this.handleGuide.pos.x;\r\n            this.handleGuide.component.y = (fgui.GRoot.inst.height - this.handleGuide.component.height) / 2 + this.handleGuide.pos.y;\r\n        } else {\r\n            this.handleGuide.component.y = (fgui.GRoot.inst.height - this.handleGuide.component.height) / 2;\r\n        }\r\n\r\n        let t: fgui.Transition = this.handleGuide.component.getTransition(\"t0\");\r\n        t.play(() => {\r\n            fgui.GRoot.inst.removeChild(this.handleGuide.component);\r\n            state.submit = false;\r\n            this.updateState(state);\r\n        }, 2);\r\n    }\r\n\r\n    // 运行时 禁止操作\r\n    forbidHandle() {\r\n        let handleMask = this._worldRoot.getChildByName('handleMask');\r\n        if (!handleMask) {\r\n            let handleMask = new cc.Node('handleMask');\r\n            handleMask.addComponent(cc.BlockInputEvents);\r\n            handleMask.parent = this._worldRoot;\r\n            handleMask.width = 1920;\r\n            handleMask.height = 1080;\r\n            handleMask.x = 960;\r\n            handleMask.y = 540;\r\n        }\r\n    }\r\n\r\n    // 消除禁止\r\n    disableForbidHandle() {\r\n        let handleMask = this._worldRoot.getChildByName('handleMask');\r\n        if (handleMask) handleMask.destroy();\r\n    }\r\n\r\n    // 临时\r\n    // 拖拽定时器\r\n    dragSchedule() {\r\n        let s = this;\r\n        if (s._dragging) {\r\n            let state: any = globalThis._.cloneDeep(s._state);\r\n            state.drag = \"move\";\r\n            state.collider[state.colliderIndex] = {\r\n                x: this._colliderBox[state.colliderIndex].x,\r\n                y: this._colliderBox[state.colliderIndex].y,\r\n            };\r\n            s.updateState(state);\r\n\r\n            /* state.curDragIconsPos = {\r\n                x: s._curDragIcon.x,\r\n                y: s._curDragIcon.y,\r\n            }; */\r\n        }\r\n    }\r\n\r\n    // 注册状态，及获取状态的方法\r\n    registerState() {\r\n        if (window['GlobalData'].sample.registerState) window['GlobalData'].sample.registerState.call(this);\r\n    }\r\n\r\n    // 解除状态，及获取状态的方法\r\n    relieveState() {\r\n        if (window['GlobalData'].sample.relieveState) window['GlobalData'].sample.relieveState.call(this);\r\n    }\r\n\r\n    // 本组件状态合并到全局\r\n    mergeState() {\r\n        if (window['GlobalData'].sample.mergeState) window['GlobalData'].sample.mergeState.call(this);\r\n    }\r\n\r\n    onEnable() {\r\n        this.registerState();\r\n        this.schedule(this.dragSchedule, this._scheduleTime);\r\n    }\r\n\r\n    onDisable() {\r\n        this.relieveState();\r\n        cc.audioEngine.stopAll();\r\n    }\r\n}\r\n"]}