{"version":3,"sources":["assets\\prefabLibrary\\models\\dragAnswer\\dragAnswer-model03-v2.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;;;;;;GAOG;AACG,IAAA,KAA2C,MAAM,CAAC,YAAY,CAAC,CAAC,MAAM,EAApE,UAAU,gBAAA,EAAE,UAAU,gBAAA,EAAE,YAAY,kBAAgC,CAAC;AACrE,IAAA,eAAe,GAAK,MAAM,CAAC,YAAY,CAAC,CAAC,KAAK,gBAA/B,CAAgC;AAEjD,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAmD,yCAAY;IAA/D;QAAA,qEAmrBC;QA3pBG,YAAY;QACJ,kBAAY,GAAG,EAAE,CAAC;QAC1B,YAAY;QACJ,oBAAc,GAAG,EAAE,CAAC;QAEpB,YAAM,GAAG,EAAE,CAAC;QACZ,mBAAa,GAAG,EAAE,CAAC;QACnB,eAAS,GAAG,KAAK,CAAC;QAGlB,eAAS,GAAG,CAAC,CAAC;QACtB,WAAW;QACH,gBAAU,GAAG,CAAC,CAAC;QAEf,kBAAY,GAAG,EAAE,CAAC;QAClB,cAAQ,GAAa,EAAE,CAAC;QAGxB,YAAM,GAAQ,EAAE,CAAC;;IAyoB7B,CAAC;IAvoBG,sBAAI,wCAAK;aAAT;YACI,OAAO,IAAI,CAAC,MAAM,CAAC;QACvB,CAAC;aAED,UAAU,CAAM;YACZ,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;YAC9B,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;YAChB,IAAI,CAAC,UAAU,EAAE,CAAC;QACtB,CAAC;;;OANA;IASD,sCAAM,GAAN;QACI,IAAI,CAAC,GAAG,IAAI,CAAC;QACb,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC;QAE3C,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QAChE,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAC9D,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAErC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;QAC1C,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;QAC1C,KAAK;QACL,iBAAiB;QACjB,IAAI,IAAI,CAAC,GAAG,EAAE;YACV,IAAI,CAAC,GAAG,CAAC,aAAa,GAAG,CAAC,CAAC;YAC3B,IAAI,CAAC,GAAG,CAAC,aAAa,GAAG,CAAC,CAAC;SAC9B;QAED,CAAC,CAAC,QAAQ,EAAE,CAAC;QACb,CAAC,CAAC,QAAQ,EAAE,CAAC;QAEb,WAAW;QACX,IAAI,CAAC,MAAM,GAAG;YACV,IAAI,EAAE,KAAK;YACX,UAAU,EAAE,EAAE;YACd,QAAQ,EAAE,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,GAAG,CAAC,UAAC,CAAM,IAAK,OAAA,CAAC,EAAD,CAAC,CAAC;YACpD,aAAa,EAAE,IAAI;YACnB,UAAU,EAAE,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC,GAAG,CAAC,UAAC,CAAM,IAAK,OAAA,CAAC,EAAD,CAAC,CAAC;YAC3D,OAAO,EAAE,EAAE;YACX,oCAAoC;YACpC,KAAK,EAAE,KAAK;YACZ,MAAM,EAAE,KAAK;YACb,MAAM,EAAE,KAAK;SAChB,CAAA;QAED,eAAe;QACf,IAAI,CAAC,mBAAmB,EAAE,CAAC;IAC/B,CAAC;IAED,wCAAQ,GAAR;QACI,IAAI,CAAC,GAAG,IAAI,CAAC;QACb,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC;QACtD,IAAI,IAAI,CAAC,OAAO;YAAE,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;QAE7E,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC;QACpD,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC,QAAQ,CAAC;QAClE,IAAI,IAAI,CAAC,aAAa;YAAE,IAAI,CAAC,aAAa,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;QAExF,IAAI,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC;QAC/D,IAAI,eAAe,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC,OAAO,CAAC;QAEnE,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,GAAG,EAAE,CAAC;QAC7B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,EAAE,EAAE;YAC7C,IAAI,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,aAAa,EAAE;gBAC9C,IAAI,GAAG,GAAiB,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC;gBAC1D,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,eAAe,EAAE,CAAC,CAAC,EAAE,QAAQ,EAAE,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC;gBAC9F,GAAG,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,CAAC;gBAC5B,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC;gBACrB,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;gBACxD,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;gBACtD,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;gBACpD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;aAC/B;SACJ;QACD,oDAAoD;QAEpD,CAAC,CAAC,MAAM,CAAC,eAAe,CAAC,GAAG,EAAE,CAAC;QAC/B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,EAAE,EAAE;YAC7C,IAAI,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,eAAe,EAAE;gBACnD,IAAI,GAAG,GAAoB,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;gBAC1D,CAAC,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBACnC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;aACjC;SACJ;QACD,wDAAwD;IAE5D,CAAC;IAED,wCAAQ,GAAR;QACI,gBAAgB;QAChB,wDAAwD;QACxD,0DAA0D;IAC9D,CAAC;IAEK,oCAAI,GAAV,UAAW,IAAS;;;;;;wBACZ,CAAC,GAAG,IAAI,CAAC;wBACb,CAAC,CAAC,QAAQ,GAAG,IAAI,CAAC;wBACZ,UAAU,GAAwB,IAAI,WAA5B,EAAE,KAAK,GAAiB,IAAI,MAArB,EAAE,UAAU,GAAK,IAAI,WAAT,CAAU;wBACzC,OAAO,GAAG,UAAU,CAAC,WAAW,CAAC;wBACjC,UAAU,GAAG,KAAK,CAAC,MAAM,CAAC;wBAC1B,KAAsC,KAAK,CAAC,MAAM,EAAhD,MAAM,YAAA,EAAE,EAAE,QAAA,EAAE,QAAQ,cAAA,EAAE,SAAS,eAAA,CAAkB;wBAEvD,IAAI,KAAK,CAAC,MAAM,EAAE;4BACd,UAAU,GAAG,KAAK,CAAC,MAAM,CAAC;4BAC1B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC,KAAK,CAAC;yBACvE;wBAED;;;;;;;;;;;6DAWqC;wBAErC,IAAI,KAAK,CAAC,MAAM,EAAE;4BACd,IAAI,MAAM;gCAAE,CAAC,CAAC,OAAO,GAAG,MAAM,CAAC;4BAC/B,IAAI,QAAQ;gCAAE,CAAC,CAAC,SAAS,GAAG,QAAQ,CAAC;4BACrC,IAAI,SAAS;gCAAE,CAAC,CAAC,UAAU,GAAG,SAAS,CAAC;4BACxC,OAAO;4BACP,IAAI,EAAE,EAAE;gCACJ,KAAS,CAAC,IAAI,EAAE,EAAE;oCACd,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE;wCACP,IAAI,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;wCACb,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,SAAS;4CAAE,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC;wCACrG,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG;4CAAE,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;qCAC1C;iCACJ;6BACJ;yBACJ;6BAEG,UAAU,EAAV,wBAAU;;mCACQ,UAAU;;;;;;;wBACpB,aAAa,GAAQ,KAAG,UAAU,CAAC,SAAS,GAAG,UAAU,CAAC,mBAAmB,GAAG,UAAU,CAAC,GAAG,CAAC,CAAC,UAAY,CAAC;wBACtF,qBAAM,UAAU,CAAC,aAAa,CAAC,EAAA;;wBAAtD,eAAe,GAAQ,SAA+B;wBAC/B,qBAAM,UAAU,CAAC,eAAe,EAAE,UAAU,CAAC,GAAG,CAAC,CAAC,UAAU,CAAC,EAAA;;wBAApF,eAAe,GAAQ,SAA6D;wBACxF,IAAI,CAAC,GAAG,CAAC,GAAG,eAAe,CAAC;;;;;;;;;KAGvC;IAED,8CAAc,GAAd,UAAe,CAAM;QACjB,OAAO;YACH,CAAC,EAAE,CAAC,CAAC,CAAC;YACN,CAAC,EAAE,CAAC,CAAC,CAAC;SACT,CAAA;IACL,CAAC;IAED,wCAAwC;IACxC,+CAA+C;IACvC,4CAAY,GAApB,UAAqB,GAAe;QAChC,IAAI,CAAC,GAAG,IAAI,CAAC;QACb,GAAG,CAAC,YAAY,EAAE,CAAC;QAEnB,IAAI,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;QACpD,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC,QAAQ,EAAE,CAAC,CAAC,KAAK,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC;QACzD,IAAI,aAAa,GAAG,CAAC,CAAC,YAAY,CAAC,SAAS,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,IAAI,QAAQ,EAAb,CAAa,CAAC,CAAC;QAEjE,IAAI,KAAK,GAAQ,UAAU,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;QAClD,IAAI,eAAe,GAAG,KAAK,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,eAAe,CAAC;QACpE,IAAI,eAAe,IAAI,CAAC,CAAC,EAAE;YACvB,IAAI,KAAK,GAAG,KAAK,CAAC,UAAU,CAAC,SAAS,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,IAAI,IAAI,QAAQ,CAAC,IAAI,EAAvB,CAAuB,CAAC,CAAA;YACpE,KAAK,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACnD,sDAAsD;SACzD;QAED,KAAK,CAAC,aAAa,GAAG,aAAa,CAAC;QACpC,CAAC,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QACrB,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;IACrB,CAAC;IAEO,2CAAW,GAAnB,UAAoB,GAAe;QAC/B,IAAI,CAAC,GAAG,IAAI,CAAC;QACb,CAAC,CAAC,SAAS,GAAG,IAAI,CAAC;IACvB,CAAC;IAED,wBAAwB;IAChB,0CAAU,GAAlB,UAAmB,GAAe;QAAlC,iBA+JC;QA9JG,IAAI,CAAC,GAAG,IAAI,CAAC;QACb,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QAClB,IAAI,CAAC,IAAI,CAAC,SAAS;YAAE,OAAO;QAC5B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QAEvB,IAAI,QAAQ,GAAQ,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;QACzD,IAAI,aAAa,GAAW,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,UAAC,CAAM,IAAK,OAAA,CAAC,IAAI,QAAQ,EAAb,CAAa,CAAC,CAAC;QAEnF,IAAI,GAAG,GAAQ,EAAE,CAAC;QAClB,IAAI,UAAe,CAAC;QACpB,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,UAAC,CAAM,EAAE,CAAM;YACvC,+DAA+D;YAC/D,IAAI,CAAC,CAAC,mBAAmB,CAAC,CAAC,EAAE,QAAQ,CAAC;gBAAE,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACxD,CAAC,CAAC,CAAC;QAGH,GAAG,CAAC,OAAO,CAAC,UAAC,CAAM,EAAE,CAAM;YACvB,IAAI,CAAC,IAAI,CAAC,EAAE;gBACR,UAAU,GAAG,CAAC,CAAC;aAClB;iBAAM;gBACH,IAAI,EAAE,GAAG,KAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACjD,IAAI,EAAE,GAAG,KAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;gBACxC,IAAI,EAAE,GAAG,EAAE;oBAAE,UAAU,GAAG,CAAC,CAAC;aAC/B;QACL,CAAC,CAAC,CAAC;QAEH,oBAAoB;QACpB,IAAI,eAAe,GAAW,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,UAAC,CAAM,IAAK,OAAA,CAAC,IAAI,UAAU,EAAf,CAAe,CAAC,CAAC;QACzF,OAAO,CAAC,GAAG,CAAC,oBAAoB,EAAE,eAAe,CAAC,CAAC;QAGnD,IAAI,KAAK,GAAQ,UAAU,CAAC,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACrD,gDAAgD;QAChD,sDAAsD;QACtD,+DAA+D;QAC/D,uDAAuD;QACvD,6CAA6C;QAE7C,2DAA2D;QAC3D,sDAAsD;QACtD,2DAA2D;QAC3D,IAAI,OAAO,GAAG,KAAK,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC;QAChD,wDAAwD;QAExD,IAAI,YAAY,GAAW,QAAQ,CAAC,IAAI,CAAC;QACzC,IAAI,eAAe,IAAI,CAAC,CAAC,EAAE;YACvB,IAAI,cAAc,GAAW,UAAU,CAAC,IAAI,CAAC;YAC7C,OAAO,CAAC,GAAG,CAAC,iBAAiB,EAAE,YAAY,CAAC,CAAC;YAC7C,OAAO,CAAC,GAAG,CAAC,mBAAmB,EAAE,cAAc,CAAC,CAAC;YACjD,mDAAmD;YACnD,oBAAoB;YACpB,IAAI,SAAS,GAAG,CAAC,CAAC,SAAS,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,cAAc,CAAC,OAAO,CAAC,UAAU,CAAC,GAAG,CAAE,CAAC,IAAI,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,cAAc,CAAC,OAAO,CAAC,UAAU,CAAC,GAAG,CAAE,CAAC,CAAC;YAGzM,sDAAsD;YACtD,IAAI,oBAAoB,SAAA,CAAC;YACzB,IAAI,eAAe,GAAG,CAAC,CAAC,UAAU,EAAE;gBAChC,oBAAoB,GAAG,eAAe,GAAG,CAAC,CAAC,UAAU,CAAC;aACzD;iBAAM;gBACH,oBAAoB,GAAG,eAAe,GAAG,CAAC,CAAC,UAAU,CAAC;aACzD;YACD,IAAI,iBAAiB,GAAG,KAAK,CAAC,UAAU,CAAC,oBAAoB,CAAC,CAAC;YAE/D,IAAI,CAAC,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,CAAC,SAAS,IAAI,iBAAiB,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,QAAQ,IAAI,QAAQ,CAAC,IAAI,CAAC,CAAC,EAAE;gBACvH,eAAe,GAAG,CAAC,CAAC,CAAC;aACxB;SACJ;QAGD,4DAA4D;QAC5D,qFAAqF;QACrF,iDAAiD;QAEjD,UAAU;QACV,4DAA4D;QAC5D,yBAAyB;QACzB,0BAA0B;QAC1B,UAAU;QACV,IAAI,eAAe,IAAI,CAAC,CAAC,EAAE;YACvB,QAAQ;YACR,wBAAwB;YACxB;;gBAEI;YACJ,KAAK,CAAC,QAAQ,CAAC,aAAa,CAAC,GAAG;gBAC5B,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;gBAC3C,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;gBAC3C,eAAe,EAAE,CAAC,CAAC;gBACnB,QAAQ,EAAE,KAAK,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,QAAQ;aACnD,CAAA;YACD;;;;gBAII;SACP;aAAM;YACH,4BAA4B;YAC5B,IAAI,OAAO,CAAC,MAAM,IAAI,CAAC,EAAE;gBACrB,UAAU;gBACV,IAAI,mBAAiB,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBAC7C,OAAO,CAAC,GAAG,CAAC,mBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC;gBAElC,IAAI,kBAAkB,GAAW,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,UAAC,CAAM,EAAE,CAAS,IAAK,OAAA,CAAC,CAAC,IAAI,IAAI,mBAAiB,CAAC,CAAC,CAAC,CAAC,IAAI,EAAnC,CAAmC,CAAC,CAAC;gBACzH,KAAK,CAAC,QAAQ,CAAC,kBAAkB,CAAC,GAAG;oBACjC,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,kBAAkB,CAAC,CAAC,CAAC;oBAChD,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,kBAAkB,CAAC,CAAC,CAAC;oBAChD,eAAe,EAAE,CAAC,CAAC;oBACnB,QAAQ,EAAE,KAAK,CAAC,QAAQ,CAAC,kBAAkB,CAAC,CAAC,QAAQ;iBACxD,CAAA;aACJ;YACD,OAAO,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,YAAY,EAAE,QAAQ,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;YAChE,KAAK,CAAC,QAAQ,CAAC,aAAa,CAAC,GAAG;gBAC5B,CAAC,EAAE,CAAC,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC,CAAC;gBACtC,CAAC,EAAE,CAAC,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC,CAAC;gBACtC,eAAe,EAAE,eAAe;gBAChC,QAAQ,EAAE,KAAK,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC,QAAQ;aACrD,CAAA;YACD,KAAK,CAAC,UAAU,CAAC,eAAe,CAAC,GAAG,OAAO,CAAC;YAC5C,IAAI;SACP;QACD,yCAAyC;QACzC,yCAAyC;QAEzC,IAAI,OAAO,GAAG,CAAC,CAAC;QAChB;;;;;;;;;;;;;;;;;;;YAmBI;QACJ,8CAA8C;QAE9C,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC;QACnB,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC;QACrB,KAAK,CAAC,aAAa,GAAG,aAAa,CAAC;QACpC,OAAO,CAAC,GAAG,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;QACnC,2BAA2B;QAC3B,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC;QAEpC,sDAAsD;QACtD,CAAC,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QACrB,yBAAyB;QACzB,OAAO,CAAC,GAAG,CAAC,kDAAkD,CAAC,CAAC;IAEpE,CAAC;IAEO,wCAAQ,GAAhB,UAAiB,MAAe;QAC5B,IAAI,CAAC,GAAG,IAAI,CAAC;QACb,IAAI,aAAa,GAAW,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC;QACnD,IAAI,YAAY,GAAW,CAAC,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC;QAE9D,IAAI,MAAM,EAAE;YACR,IAAI,WAAiB,CAAC;YACtB,IAAI,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE;gBACnC,WAAS,GAAG,UAAU,CAAC;aAC1B;iBAAM;gBACH,WAAS,GAAG,UAAU,CAAC;aAC1B;YACD,CAAC,CAAC,cAAc,CAAC,OAAO,CAAC,UAAC,CAAiB;gBACvC,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,WAAS,CAAC,GAAG,CAAC,CAAC,EAAE;oBAChC,CAAC,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,aAAa,GAAG,CAAC,CAAC;iBAC3C;qBAAM;oBACH,CAAC,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,aAAa,GAAG,CAAC,CAAC;iBAC3C;YACL,CAAC,CAAC,CAAC;SACN;aAAM;YACH,CAAC,CAAC,cAAc,CAAC,OAAO,CAAC,UAAC,CAAiB;gBACvC,CAAC,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,aAAa,GAAG,CAAC,CAAC;YAC5C,CAAC,CAAC,CAAC;SACN;IAEL,CAAC;IAEO,4CAAY,GAApB,UAAqB,IAAS,EAAE,IAAS;QACrC,IAAI,KAAK,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;QAClE,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QACrE,IAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,KAAK,GAAG,MAAM,GAAG,MAAM,CAAC,CAAC;QAC1D,OAAO,QAAQ,CAAC;IACpB,CAAC;IAED;;;;;OAKG;IACK,mDAAmB,GAA3B,UAA4B,KAAmB,EAAE,KAAmB;QAChE,IAAI,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC,KAAK,EAAE;YACxD,OAAO,KAAK,CAAC;SAChB;aAAM,IAAI,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC,KAAK,IAAI,KAAK,CAAC,CAAC,EAAE;YAC/D,OAAO,KAAK,CAAC;SAChB;aAAM,IAAI,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE;YAChE,OAAO,KAAK,CAAC;SAChB;aAAM,IAAI,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,CAAC,EAAE;YAChE,OAAO,KAAK,CAAC;SAChB;QACD,OAAO,IAAI,CAAC;IAChB,CAAC;IAEO,2CAAW,GAAnB,UAAoB,IAAS,EAAE,IAAS,EAAE,GAAgB;QAAhB,oBAAA,EAAA,QAAgB;QACtD,IAAI,KAAK,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;QAClE,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QACrE,IAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,KAAK,GAAG,MAAM,GAAG,MAAM,CAAC,CAAC;QAC1D,OAAO,QAAQ,GAAG,GAAG,CAAC;IAC1B,CAAC;IAEO,2CAAW,GAAnB,UAAoB,GAAQ;QACxB,IAAI,KAAK,GAAQ,UAAU,CAAC,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACrD,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC;QACnB,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;IAC5B,CAAC;IAEa,4CAAY,GAA1B,UAA2B,GAAQ;;;;gBAC3B,CAAC,GAAG,IAAI,CAAC;gBACT,KAAK,GAAQ,UAAU,CAAC,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBACjD,UAAU,GAAG;oBACb,KAAK,EAAE,CAAC;oBACR,KAAK,EAAE,CAAC;iBACX,CAAC;gBACE,eAAe,GAAG,CAAC,CAAC;gBACxB,KAAK,CAAC,UAAU,CAAC,OAAO,CAAC,UAAC,CAAC,EAAE,CAAC;oBAC1B,IAAI,CAAC,CAAC,MAAM,GAAG,CAAC;wBAAE,eAAe,EAAE,CAAC;oBACpC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE;wBACxC,IAAI,aAAa,GAAG,CAAC,CAAC;wBACtB,IAAI,gBAAgB,GAAG,KAAK,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,CAAC,UAAU,CAAC,CAAC;wBAC1D,IAAI,CAAC,CAAC,SAAS,IAAI,CAAC,EAAE;4BAClB,IAAI,CAAC,CAAC,MAAM,GAAG,CAAC,IAAI,gBAAgB,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,IAAI,gBAAgB,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE;gCAC9F,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC;6BAC/B;yBACJ;6BAAM,IAAI,CAAC,CAAC,SAAS,IAAI,CAAC,EAAE;4BACzB,IAAI,CAAC,CAAC,MAAM,GAAG,CAAC,IAAI,gBAAgB,CAAC,MAAM,GAAG,CAAC,EAAE;gCAC7C,UAAU,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC;6BAC9C;yBACJ;qBAEJ;gBACL,CAAC,CAAC,CAAA;gBACF,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;gBACxB,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;gBAEvB,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,KAAK,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,eAAe,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,GAAG,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBACtI,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC;gBACpB,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;;;;KAC3B;IAGD,OAAO;IACP,wCAAQ,GAAR,UAAS,IAAS;QACd,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;IAC3B,CAAC;IAED,QAAQ;IACR,2CAAW,GAAX,UAAY,QAAa;QACrB,sCAAsC;QACtC,mCAAmC;QACnC,4EAA4E;QAC5E,IAAI,UAAU,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,QAAQ,CAAC;YAAE,OAAO;QACxD,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC;IAC1B,CAAC;IAGD,QAAQ;IACR,wCAAQ,GAAR,UAAS,QAAa,EAAE,KAAU;QAC9B,IAAI,CAAC,GAAG,IAAI,CAAC;QACb,qCAAqC;QAErC,IAAI,KAAK,CAAC,IAAI,IAAI,MAAM,EAAE;YACtB,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;YACjF,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;YAEjF,iDAAiD;YACjD,iDAAiD;SACpD;QAED,IAAI,KAAK,CAAC,IAAI,IAAI,KAAK,EAAE;YACrB,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,EAAE,KAAK,CAAC,QAAQ,CAAC,EAAE;gBAC1D,OAAO,CAAC,GAAG,CAAC,wBAAwB,EAAE,KAAK,CAAC,CAAC;gBAE7C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;oBAC5C,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC7C,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;iBAChD;aACJ;YACD,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,EAAE,KAAK,CAAC,MAAM,CAAC,EAAE;gBACtD,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;gBAE5B,IAAI,KAAK,CAAC,MAAM,EAAE;oBACd,qBAAqB;oBACrB,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;oBAClC,WAAW;oBACX,4BAA4B;oBAC5B,IAAI;iBACP;aACJ;YAED,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,EAAE,KAAK,CAAC,KAAK,CAAC,EAAE;gBACpD,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;aAC/B;YAED;;;;;;;gBAOI;SAEP;IACL,CAAC;IAEK,yCAAS,GAAf,UAAgB,IAAa;;;;;;;wBACzB,IAAI,CAAC,GAAG,CAAC,aAAa,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;6BAElC,IAAI,EAAJ,wBAAI;wBACJ,EAAE,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;wBACzB,IAAI,CAAC,YAAY,EAAE,CAAC;wBAChB,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;wBACpC,qBAAM,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,CAAC,SAAS,CAAC,EAAA;;wBAAjE,KAAK,GAAiB,SAA2C;wBACjE,OAAO,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;wBACnD,EAAE,CAAC,WAAW,CAAC,iBAAiB,CAAC,OAAO,EAAE;4BACtC,IAAI,KAAK,GAAQ,UAAU,CAAC,CAAC,CAAC,SAAS,CAAC,KAAI,CAAC,MAAM,CAAC,CAAC;4BACrD,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;4BACpB,KAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;wBAC5B,CAAC,CAAC,CAAC;;;wBAEH,IAAI,CAAC,mBAAmB,EAAE,CAAC;;;;;;KAElC;IAED,8CAAc,GAAd,UAAe,IAAa;QAA5B,iBAeC;QAdG,IAAI,CAAC,IAAI,CAAC,QAAQ;YAAE,OAAO;QAC3B,IAAI,KAAK,GAAQ,UAAU,CAAC,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACrD,IAAI,QAAQ,GAAQ,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAClD,QAAQ,CAAC,CAAC,GAAG,GAAG,CAAC;QACjB,QAAQ,CAAC,CAAC,GAAG,GAAG,CAAC;QACjB,IAAI,UAAU,GAAQ,QAAQ,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;QAC1D,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACtB,QAAQ,CAAC,MAAM,GAAG,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC;QAE3C,UAAU,CAAC;YACP,QAAQ,CAAC,OAAO,EAAE,CAAC;YACnB,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC;YACrB,KAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QAC5B,CAAC,EAAE,IAAI,CAAC,CAAC;IACb,CAAC;IAED,OAAO;IACP;;;;;;;;;;;;;;QAcI;IAEJ,OAAO;IACP,6CAAa,GAAb;QAAA,iBAiBC;QAhBG,IAAI,CAAC,IAAI,CAAC,WAAW;YAAE,OAAO;QAC9B,IAAI,KAAK,GAAQ,UAAU,CAAC,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACrD,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;QACrD,IAAI,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE;YACtB,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC;YACvH,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC;SAC5H;aAAM;YACH,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;SACnG;QAED,IAAI,CAAC,GAAoB,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;QACxE,CAAC,CAAC,IAAI,CAAC;YACH,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,KAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;YACxD,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC;YACrB,KAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QAC5B,CAAC,EAAE,CAAC,CAAC,CAAC;IACV,CAAC;IAED,WAAW;IACX,4CAAY,GAAZ;QACI,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;QAC9D,IAAI,CAAC,UAAU,EAAE;YACb,IAAI,YAAU,GAAG,IAAI,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YAC3C,YAAU,CAAC,YAAY,CAAC,EAAE,CAAC,gBAAgB,CAAC,CAAC;YAC7C,YAAU,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC;YACpC,YAAU,CAAC,KAAK,GAAG,IAAI,CAAC;YACxB,YAAU,CAAC,MAAM,GAAG,IAAI,CAAC;YACzB,YAAU,CAAC,CAAC,GAAG,GAAG,CAAC;YACnB,YAAU,CAAC,CAAC,GAAG,GAAG,CAAC;SACtB;IACL,CAAC;IAED,OAAO;IACP,mDAAmB,GAAnB;QACI,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;QAC9D,IAAI,UAAU;YAAE,UAAU,CAAC,OAAO,EAAE,CAAC;IACzC,CAAC;IAED,KAAK;IACL,QAAQ;IACR,4CAAY,GAAZ;QACI,IAAI,CAAC,GAAG,IAAI,CAAC;QACb,IAAI,CAAC,CAAC,SAAS,EAAE;YACb,IAAI,KAAK,GAAQ,UAAU,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;YAClD,KAAK,CAAC,IAAI,GAAG,MAAM,CAAC;YACpB,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,aAAa,CAAC,GAAG;gBAClC,CAAC,EAAE,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC;gBAC3C,CAAC,EAAE,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC;gBAC3C,eAAe,EAAE,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,eAAe;gBACpE,QAAQ,EAAE,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,QAAQ;aACzD,CAAC;YACF,CAAC,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;YAErB;;;iBAGK;SACR;IACL,CAAC;IAED,gBAAgB;IAChB,6CAAa,GAAb;QACI,IAAI,MAAM,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,aAAa;YAAE,MAAM,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACxG,CAAC;IAED,gBAAgB;IAChB,4CAAY,GAAZ;QACI,IAAI,MAAM,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,YAAY;YAAE,MAAM,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACtG,CAAC;IAED,aAAa;IACb,0CAAU,GAAV;QACI,IAAI,MAAM,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,UAAU;YAAE,MAAM,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAClG,CAAC;IAED,wCAAQ,GAAR;QACI,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;IACzD,CAAC;IAED,yCAAS,GAAT;QACI,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,EAAE,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;IAC7B,CAAC;IAlrBgB,qBAAqB;QADzC,OAAO;OACa,qBAAqB,CAmrBzC;IAAD,4BAAC;CAnrBD,AAmrBC,CAnrBkD,EAAE,CAAC,SAAS,GAmrB9D;kBAnrBoB,qBAAqB","file":"","sourceRoot":"/","sourcesContent":["import DragAnswerModel03Base from \"./DragAnswerModel03Base\";\r\n\r\n/*\r\n * @Descripttion: \r\n * @version: \r\n * @Author: ydlx\r\n * @Date: 2021-03-26 18:05:12\r\n * @LastEditors: Please set LastEditors\r\n * @LastEditTime: 2021-05-17 15:25:58\r\n */\r\nconst { loadBundle, loadPrefab, loadResource } = window['GlobalData'].sample;\r\nconst { pointBelongArea } = window['GlobalData'].utils;\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class dragAnswer_model03_v2 extends cc.Component {\r\n    private _worldRoot: cc.Node;\r\n    private _c1: fgui.Controller;\r\n    private _c2: fgui.Controller;\r\n\r\n    private _dragBtn: fgui.GButton;\r\n    private _btnBox: fgui.GButton;\r\n\r\n    private dragBox: fgui.GComponent;\r\n    private dropBox: fgui.GComponent;\r\n\r\n    private _submit: fgui.GButton;\r\n    private _title: fgui.GButton;\r\n    private _titleTrigger: fgui.GLoader;\r\n\r\n    protected _view: fgui.GComponent;\r\n\r\n    // fairygui 组件\r\n    private handleGuide: any;\r\n    private lineBlink: any;\r\n\r\n    // 远程动态组件\r\n    private feedback: any;\r\n\r\n    /** 拖拽物数组 */\r\n    private _colliderBox = [];\r\n    /** 放置区数组 */\r\n    private _collideredBox = [];\r\n\r\n    private _cache = {};\r\n    private _scheduleTime = .3;\r\n    private _dragging = false;\r\n\r\n    private _answer;\r\n    private _gameType = 0;\r\n    /** 角色数量 */\r\n    private _roleCount = 0;\r\n\r\n    private _dragIconArr = [];\r\n    private _footNum: number[] = [];\r\n    public pageData: any;\r\n\r\n    private _state: any = {};\r\n\r\n    get state(): any {\r\n        return this._state;\r\n    }\r\n\r\n    set state(v: any) {\r\n        this.updateUi(this._state, v);\r\n        this._state = v;\r\n        this.mergeState();\r\n    }\r\n\r\n\r\n    onLoad() {\r\n        let s = this;\r\n        this._worldRoot = cc.find(\"Canvas\").parent;\r\n\r\n        this._view.y = (fgui.GRoot.inst.height - this._view.height) / 2;\r\n        this._view.x = (fgui.GRoot.inst.width - this._view.width) / 2;\r\n        fgui.GRoot.inst.addChild(this._view);\r\n\r\n        this._c1 = this._view.getController(\"c1\");\r\n        this._c2 = this._view.getController(\"c2\");\r\n        // 臨時\r\n        // bug 初始设置不播放不生效\r\n        if (this._c2) {\r\n            this._c2.selectedIndex = 1;\r\n            this._c2.selectedIndex = 0;\r\n        }\r\n\r\n        s.createUI();\r\n        s.addEvent();\r\n\r\n        // 初始化state\r\n        this._state = {\r\n            drag: \"end\",\r\n            getDropArr: [],\r\n            collider: s._cache[\"colliderBox\"].map((v: any) => v),//拖拽物的位置数组\r\n            colliderIndex: null,//当前拖拽物在数组内的索引\r\n            collidered: this._cache[\"collideredBox\"].map((v: any) => v),//二维数组，存放每个放置区对应的被放置元素\r\n            dropArr: [],\r\n            // dragIconsPosArr: dragIconsPosArr,\r\n            title: false,\r\n            submit: false,\r\n            answer: false\r\n        }\r\n\r\n        // 临时 禁止操作期间 切页\r\n        this.disableForbidHandle();\r\n    }\r\n\r\n    createUI() {\r\n        let s = this;\r\n        this._submit = this._view.getChild(\"submit\").asButton;\r\n        if (this._submit) this._submit.on(fgui.Event.CLICK, this._clickSubmit, this);\r\n\r\n        this._title = this._view.getChild(\"title\").asButton;\r\n        this._titleTrigger = this._view.getChild(\"titleTrigger\").asLoader;\r\n        if (this._titleTrigger) this._titleTrigger.on(fgui.Event.CLICK, this._clickTitle, this);\r\n\r\n        let colliderGroup = this._view.getChild(\"colliderBox\").asGroup;\r\n        let collideredGroup = this._view.getChild(\"collideredBox\").asGroup;\r\n\r\n        s._cache[\"colliderBox\"] = [];\r\n        for (let i = 0; i < this._view.numChildren; i++) {\r\n            if (s._view.getChildAt(i).group == colliderGroup) {\r\n                let btn: fgui.GButton = this._view.getChildAt(i).asButton;\r\n                s._cache['colliderBox'].push({ x: btn.x, y: btn.y, collideredIndex: -1, roleType: btn.data });\r\n                btn['collideredIndex'] = -1;\r\n                btn.draggable = true;\r\n                btn.on(fgui.Event.TOUCH_BEGIN, this._onDragStart, this);\r\n                btn.on(fgui.Event.TOUCH_MOVE, this._onDragMove, this);\r\n                btn.on(fgui.Event.TOUCH_END, this._onDragEnd, this);\r\n                this._colliderBox.push(btn);\r\n            }\r\n        }\r\n        // console.log('this._colliderBox', s._colliderBox);\r\n\r\n        s._cache[\"collideredBox\"] = [];\r\n        for (let i = 0; i < this._view.numChildren; i++) {\r\n            if (this._view.getChildAt(i).group == collideredGroup) {\r\n                let btn: fgui.GComponent = this._view.getChildAt(i).asCom;\r\n                s._cache['collideredBox'].push([]);\r\n                this._collideredBox.push(btn);\r\n            }\r\n        }\r\n        // console.log('this._collideredBox', s._collideredBox);\r\n\r\n    }\r\n\r\n    addEvent() {\r\n        // let s = this;\r\n        // s._submitBtn.on(fgui.Event.CLICK, s._clickSubmit, s);\r\n        // s._readTitleBtn.on(fgui.Event.CLICK, s._clickTitle, s);\r\n    }\r\n\r\n    async init(data: any) {\r\n        let s = this;\r\n        s.pageData = data;\r\n        let { pathConfig, model, components } = data;\r\n        let Package = pathConfig.packageName;\r\n        let GComponent = model.uiPath;\r\n        let { answer, ae, gameType, roleCount } = model.config;\r\n\r\n        if (model.uiPath) {\r\n            GComponent = model.uiPath;\r\n            this._view = fgui.UIPackage.createObject(Package, GComponent).asCom;\r\n        }\r\n\r\n        /* s._readTitleBtn = fgui.UIPackage.createObject('t4-trialClass-01', 'TitleCom').asCom;\r\n\r\n        (s._readTitleBtn.getChild('title') as fgui.GLoader).url = fgui.UIPackage.createObject('t4-trialClass-01', 'title_3').asImage.resourceURL;\r\n        s._readTitleBtn.x = 20;\r\n        s._readTitleBtn.y = 50;\r\n        this._view.addChild(s._readTitleBtn);\r\n\r\n\r\n        s._submitBtn = fgui.UIPackage.createObject('t4-trialClass-01', 'SubmitBtn').asCom;\r\n        s._submitBtn.x = 1676;\r\n        s._submitBtn.y = 806;\r\n        this._view.addChild(s._submitBtn); */\r\n\r\n        if (model.config) {\r\n            if (answer) s._answer = answer;\r\n            if (gameType) s._gameType = gameType;\r\n            if (roleCount) s._roleCount = roleCount;\r\n            // 动效注册\r\n            if (ae) {\r\n                for (let v in ae) {\r\n                    if (ae[v]) {\r\n                        this[v] = {};\r\n                        if (ae[v].component) this[v].component = fgui.UIPackage.createObject(Package, ae[v].component).asCom;\r\n                        if (ae[v].pos) this[v].pos = ae[v].pos;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        if (components) {\r\n            for (const key in components) {\r\n                let componentPath: any = `${pathConfig.remoteUrl}${pathConfig.componentBundlePath}${components[key].bundleName}`;\r\n                let componentBundle: any = await loadBundle(componentPath);\r\n                let componentPrefab: any = await loadPrefab(componentBundle, components[key].prefabName);\r\n                this[key] = componentPrefab;\r\n            }\r\n        }\r\n    }\r\n\r\n    getOriginValue(v: any) {\r\n        return {\r\n            x: v.x,\r\n            y: v.y\r\n        }\r\n    }\r\n\r\n    // private _curDragIcon: cc.Node = null;\r\n    // private _offsetPos: cc.Vec2 = new cc.Vec2();\r\n    private _onDragStart(evt: fgui.Event): void {\r\n        let s = this;\r\n        evt.captureTouch();\r\n\r\n        let collider = fgui.GObject.cast(evt.currentTarget);\r\n        s._view.setChildIndex(collider, s._view.numChildren - 1);\r\n        let colliderIndex = s._colliderBox.findIndex(v => v == collider);\r\n\r\n        let state: any = globalThis._.cloneDeep(s._state);\r\n        let collideredIndex = state.collider[colliderIndex].collideredIndex;\r\n        if (collideredIndex != -1) {\r\n            let index = state.collidered.findIndex(v => v.name == collider.name)\r\n            state.collidered[collideredIndex].splice(index, 1);\r\n            // state.collider[colliderIndex].collideredIndex = -1;\r\n        }\r\n\r\n        state.colliderIndex = colliderIndex;\r\n        s.updateState(state);\r\n        s.showTips(true);\r\n    }\r\n\r\n    private _onDragMove(evt: fgui.Event): void {\r\n        let s = this;\r\n        s._dragging = true;\r\n    }\r\n\r\n    // private dropArr = [];\r\n    private _onDragEnd(evt: fgui.Event): void {\r\n        let s = this;\r\n        s.showTips(false);\r\n        if (!this._dragging) return;\r\n        this._dragging = false;\r\n\r\n        let collider: any = fgui.GObject.cast(evt.currentTarget);\r\n        let colliderIndex: number = this._colliderBox.findIndex((v: any) => v == collider);\r\n\r\n        let arr: any = [];\r\n        let collidered: any;\r\n        this._collideredBox.forEach((v: any, i: any) => {\r\n            // if (this._belongArea(collider, v, 500) == true) arr.push(v);\r\n            if (s.isCollisionWithRect(v, collider)) arr.push(v);\r\n        });\r\n\r\n\r\n        arr.forEach((v: any, i: any) => {\r\n            if (i == 0) {\r\n                collidered = v;\r\n            } else {\r\n                let pd = this._getDistance(collider, arr[i - 1]);\r\n                let cd = this._getDistance(collider, v);\r\n                if (cd < pd) collidered = v;\r\n            }\r\n        });\r\n\r\n        // 放置区索引，定位到放入了那个放置区\r\n        let collideredIndex: number = this._collideredBox.findIndex((v: any) => v == collidered);\r\n        console.log('collideredIndex = ', collideredIndex);\r\n\r\n\r\n        let state: any = globalThis._.cloneDeep(this._state);\r\n        // let sss: any = globalThis._.cloneDeep(state);\r\n        // let state = JSON.parse(JSON.stringify(this._state))\r\n        // console.log('origin state = ', this._state.dropArr);// right\r\n        // console.log('clone state = ', state.dropArr);//rihgt\r\n        // console.log('sss = ', sss.dropArr);//wrong\r\n\r\n        // dropArr = state.collidered[collideredIndex].map(v => v);\r\n        // console.warn('state.dropArr[0] = ', state.dropArr);\r\n        // let dropArr = JSON.parse(JSON.stringify(state.dropArr));\r\n        let dropArr = state.collidered[collideredIndex];\r\n        // console.error('s.dropArr11111111111111 = ', dropArr);\r\n\r\n        let colliderName: string = collider.name;\r\n        if (collideredIndex != -1) {\r\n            let collideredName: string = collidered.name;\r\n            console.log('colliderName = ', colliderName);\r\n            console.log('collideredName = ', collideredName);\r\n            // 如果头和脚放置位置不匹配则重置位置 head dropBox1 || foot dropBox2\r\n            // 如果游戏模式为2，则不需要这个限制\r\n            let matchFlag = s._gameType == 2 ? true : colliderName.indexOf('head') > -1 && collideredName.indexOf('dropBox1') > - 1 || colliderName.indexOf('foot') > -1 && collideredName.indexOf('dropBox2') > - 1;\r\n\r\n\r\n            // 1.拿到当前放置区对应的放置区 2.获取对应放置区内的元素 3.判断元素的namee是否为相同role\r\n            let matchCollideredIndex;\r\n            if (collideredIndex < s._roleCount) {\r\n                matchCollideredIndex = collideredIndex + s._roleCount;\r\n            } else {\r\n                matchCollideredIndex = collideredIndex - s._roleCount;\r\n            }\r\n            let matchCollinderArr = state.collidered[matchCollideredIndex];\r\n\r\n            if (s._gameType == 1 && (!matchFlag || matchCollinderArr.length > 0 && !(matchCollinderArr[0].roleType == collider.data))) {\r\n                collideredIndex = -1;\r\n            }\r\n        }\r\n\r\n\r\n        // let dropArrIndex = dropArr.indexOf(data);//放置区是否已包含当前拖拽元素\r\n        // let dropArrIndex = dropArr.findIndex(v => v.name == colliderName);//放置区是否已包含当前拖拽元素\r\n        // console.warn('dropArrIndex = ', dropArrIndex);\r\n\r\n        // 1.重置位置 \r\n        // collideredIndex == -1 || 头和脚放置位置不匹配 || 头和脚无法组合 -> 重置回初始位置\r\n        // collideredIndex != -1 \r\n        // dropArr.length == 1 && \r\n        // 2.放入放置区\r\n        if (collideredIndex == -1) {\r\n            // reset\r\n            // console.log('reset');\r\n            /* if (dropArrIndex > -1) {\r\n                dropArr.splice(dropArrIndex, 1);\r\n            } */\r\n            state.collider[colliderIndex] = {\r\n                x: s._cache[\"colliderBox\"][colliderIndex].x,\r\n                y: s._cache[\"colliderBox\"][colliderIndex].y,\r\n                collideredIndex: -1,\r\n                roleType: state.collider[colliderIndex].roleType\r\n            }\r\n            /* if (collider.collideredIndex > -1) {\r\n                collideredIndex = collider.collideredIndex;\r\n            } else {\r\n                collideredIndex = 0\r\n            } */\r\n        } else {\r\n            // if (dropArrIndex == -1) {\r\n            if (dropArr.length == 1) {\r\n                // 移除原有的元素\r\n                let existColliderData = dropArr.splice(0, 1);\r\n                console.log(existColliderData[0]);\r\n\r\n                let existColliderIndex: number = this._colliderBox.findIndex((v: any, i: number) => v.name == existColliderData[0].name);\r\n                state.collider[existColliderIndex] = {\r\n                    x: s._cache[\"colliderBox\"][existColliderIndex].x,\r\n                    y: s._cache[\"colliderBox\"][existColliderIndex].y,\r\n                    collideredIndex: -1,\r\n                    roleType: state.collider[existColliderIndex].roleType\r\n                }\r\n            }\r\n            dropArr.push({ 'name': colliderName, roleType: collider.data });\r\n            state.collider[colliderIndex] = {\r\n                x: s._collideredBox[collideredIndex].x,\r\n                y: s._collideredBox[collideredIndex].y,\r\n                collideredIndex: collideredIndex,\r\n                roleType: state.collider[collideredIndex].roleType\r\n            }\r\n            state.collidered[collideredIndex] = dropArr;\r\n            // }\r\n        }\r\n        // dropArr.push({ name: collider.name });\r\n        // console.warn('pushhhhhhhhhh',dropArr);\r\n\r\n        let footNum = 0;\r\n        /* for (let i = 0; i < dropArr.length; i++) {\r\n            let item = dropArr[i];\r\n            // let itemIndex = s._colliderBox.indexOf(item);//状态池中的index\r\n            let itemIndex = s._colliderBox.findIndex(v => v.name == item.name);//状态池中的index\r\n            let pos: cc.Vec2 = new cc.Vec2();\r\n            let collideredBox = s._collideredBox[collideredIndex];\r\n            let curCollider = s._view.getChild(item.name)\r\n            if (item.name.indexOf('left') > -1) {\r\n                footNum += s._footNum[0];\r\n            } else if (item.name.indexOf('right') > -1) {\r\n                footNum += s._footNum[1];\r\n            }\r\n            pos.x = collideredBox.x + 150 + 200 * i;\r\n            pos.y = collideredBox.y + collideredBox.height - curCollider.height;\r\n            state.collider[itemIndex] = {\r\n                x: pos.x,\r\n                y: pos.y,\r\n                collideredIndex: collideredIndex\r\n            }\r\n        } */\r\n        // collider.collideredIndex = collideredIndex;\r\n\r\n        state.drag = \"end\";\r\n        state.submit = false;\r\n        state.colliderIndex = colliderIndex;\r\n        console.log('给state赋值前的', dropArr);\r\n        // state.dropArr = dropArr;\r\n        console.warn('赋值后的', state.dropArr);\r\n\r\n        // state.answer = footNum == s._answer ? true : false;\r\n        s.updateState(state);\r\n        // s._curDragIcon = null;\r\n        console.log('------------------------------------------------');\r\n\r\n    }\r\n\r\n    private showTips(isShow: boolean) {\r\n        let s = this;\r\n        let colliderIndex: number = s._state.colliderIndex;\r\n        let colliderName: string = s._colliderBox[colliderIndex].name;\r\n\r\n        if (isShow) {\r\n            let filterTag: string;\r\n            if (colliderName.indexOf('head') > -1) {\r\n                filterTag = 'dropBox1';\r\n            } else {\r\n                filterTag = 'dropBox2';\r\n            }\r\n            s._collideredBox.forEach((v: fgui.GComboBox) => {\r\n                if (v.name.indexOf(filterTag) > -1) {\r\n                    v.getController('c1').selectedIndex = 1;\r\n                } else {\r\n                    v.getController('c1').selectedIndex = 0;\r\n                }\r\n            });\r\n        } else {\r\n            s._collideredBox.forEach((v: fgui.GComboBox) => {\r\n                v.getController('c1').selectedIndex = 0;\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    private _getDistance(self: any, area: any) {\r\n        let width = (self.x + self.width / 2) - (area.x + area.width / 2);\r\n        let height = (self.y + self.height / 2) - (area.y + area.height / 2);\r\n        let distance = Math.sqrt(width * width + height * height);\r\n        return distance;\r\n    }\r\n\r\n    /**\r\n     * 矩形碰撞\r\n     * @param rect1 \r\n     * @param rect2 \r\n     * @returns \r\n     */\r\n    private isCollisionWithRect(rect1: fgui.GObject, rect2: fgui.GObject): boolean {\r\n        if (rect1.x >= rect2.x && rect1.x >= rect2.x + rect2.width) {\r\n            return false;\r\n        } else if (rect1.x <= rect2.x && rect1.x + rect1.width <= rect2.x) {\r\n            return false;\r\n        } else if (rect1.y >= rect2.y && rect1.y >= rect2.y + rect2.height) {\r\n            return false;\r\n        } else if (rect1.y <= rect2.y && rect1.y + rect1.height <= rect2.y) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    private _belongArea(self: any, area: any, gap: number = 10) {\r\n        let width = (self.x + self.width / 2) - (area.x + area.width / 2);\r\n        let height = (self.y + self.height / 2) - (area.y + area.height / 2);\r\n        let distance = Math.sqrt(width * width + height * height);\r\n        return distance < gap;\r\n    }\r\n\r\n    private _clickTitle(evt: any) {\r\n        let state: any = globalThis._.cloneDeep(this._state);\r\n        state.title = true;\r\n        this.updateState(state);\r\n    }\r\n\r\n    private async _clickSubmit(evt: any) {\r\n        let s = this;\r\n        let state: any = globalThis._.cloneDeep(this._state);\r\n        let userAnswer = {\r\n            role1: 0,\r\n            role2: 0\r\n        };\r\n        let collideredCount = 0;\r\n        state.collidered.forEach((v, i) => {\r\n            if (v.length > 0) collideredCount++;\r\n            if (i < (state.collidered.length / 2) >> 0) {\r\n                let topCollidered = v;\r\n                let bottomCollidered = state.collidered[i + s._roleCount];\r\n                if (s._gameType == 1) {\r\n                    if (v.length > 0 && bottomCollidered.length > 0 && v[0].roleType == bottomCollidered[0].roleType) {\r\n                        userAnswer[v[0].roleType]++;\r\n                    }\r\n                } else if (s._gameType == 2) {\r\n                    if (v.length > 0 && bottomCollidered.length > 0) {\r\n                        userAnswer[bottomCollidered[0].roleType]++;\r\n                    }\r\n                }\r\n\r\n            }\r\n        })\r\n        console.log(userAnswer);\r\n        console.log(s._answer);\r\n\r\n        state.answer = JSON.stringify(userAnswer) === JSON.stringify(s._answer) && collideredCount == (s._answer.role1 + s._answer.role2) * 2;\r\n        state.submit = true;\r\n        this.updateState(state);\r\n    }\r\n\r\n\r\n    // 获取状态\r\n    getState(data: any) {\r\n        this.updateState(data);\r\n    }\r\n\r\n    // 更新状态层\r\n    updateState(curState: any) {\r\n        // console.log('old = ', this._state);\r\n        // console.log('new = ', curState);\r\n        // console.log('updateState ', globalThis._.isEqual(this._state, curState));\r\n        if (globalThis._.isEqual(this._state, curState)) return;\r\n        this.state = curState;\r\n    }\r\n\r\n\r\n    // 更新ui层\r\n    updateUi(oldState: any, state: any) {\r\n        let s = this;\r\n        // console.log('updateUi = ', state);\r\n\r\n        if (state.drag == \"move\") {\r\n            this._colliderBox[state.colliderIndex].x = state.collider[state.colliderIndex].x;\r\n            this._colliderBox[state.colliderIndex].y = state.collider[state.colliderIndex].y;\r\n\r\n            // state.curDragIcon.x = state.curDragIconsPos.x;\r\n            // state.curDragIcon.y = state.curDragIconsPos.y;\r\n        }\r\n\r\n        if (state.drag == \"end\") {\r\n            if (!globalThis._.isEqual(oldState.collider, state.collider)) {\r\n                console.log('endddddddddd update ui', state);\r\n\r\n                for (let i = 0; i < state.collider.length; i++) {\r\n                    this._colliderBox[i].x = state.collider[i].x;\r\n                    this._colliderBox[i].y = state.collider[i].y;\r\n                }\r\n            }\r\n            if (!globalThis._.isEqual(oldState.submit, state.submit)) {\r\n                console.log('submittttttt');\r\n\r\n                if (state.submit) {\r\n                    // if (state.drops) {\r\n                    this.answerFeedback(state.answer);\r\n                    // } else {\r\n                    //     this.onHandleGuide();\r\n                    // }\r\n                }\r\n            }\r\n\r\n            if (!globalThis._.isEqual(oldState.title, state.title)) {\r\n                this.playTitle(state.title);\r\n            }\r\n\r\n            /* if (!globalThis._.isEqual(oldState.submit, state.submit)) {\r\n                if (state.submit) {\r\n                    // 根据collider 初始位置 判断 是否被操作过\r\n                    let nv: any = this._colliderBox.map((v: any) => { return { \"x\": v.x, \"y\": v.y } });\r\n                    let bool: boolean = s._cache[\"colliderBox\"].every((v: any, i: any) => v.x == nv[i].x && v.y == nv[i].y);\r\n                    bool ? this.onHandleGuide() : this.onFlicker(state.answer);\r\n                }\r\n            } */\r\n\r\n        }\r\n    }\r\n\r\n    async playTitle(bool: boolean) {\r\n        this._c2.selectedIndex = bool ? 1 : 0;\r\n\r\n        if (bool) {\r\n            cc.audioEngine.stopAll();\r\n            this.forbidHandle();\r\n            let item = fgui.UIPackage.getItemByURL(this._title[\"_sound\"]);\r\n            let audio: cc.AudioClip = await loadResource(item.file, cc.AudioClip);\r\n            let audioId = cc.audioEngine.play(audio, false, 1);\r\n            cc.audioEngine.setFinishCallback(audioId, () => {\r\n                let state: any = globalThis._.cloneDeep(this._state);\r\n                state.title = false;\r\n                this.updateState(state);\r\n            });\r\n        } else {\r\n            this.disableForbidHandle();\r\n        }\r\n    }\r\n\r\n    answerFeedback(bool: boolean) {\r\n        if (!this.feedback) return;\r\n        let state: any = globalThis._.cloneDeep(this._state);\r\n        let feedback: any = cc.instantiate(this.feedback);\r\n        feedback.x = 960;\r\n        feedback.y = 540;\r\n        let feedbackJs: any = feedback.getComponent(cc.Component);\r\n        feedbackJs.init(bool);\r\n        feedback.parent = cc.find(\"Canvas\").parent;\r\n\r\n        setTimeout(() => {\r\n            feedback.destroy();\r\n            state.submit = false;\r\n            this.updateState(state);\r\n        }, 2000);\r\n    }\r\n\r\n    // 天枰提示\r\n    /* onLibraHint() {\r\n        if (!this.lineBlink) return;\r\n        fgui.GRoot.inst.addChild(this.lineBlink.component);\r\n        if (this.lineBlink.pos) {\r\n            this.lineBlink.component.x = (fgui.GRoot.inst.width - this.lineBlink.component.width) / 2 + this.lineBlink.pos.x;\r\n            this.lineBlink.component.y = (fgui.GRoot.inst.height - this.lineBlink.component.height) / 2 + this.lineBlink.pos.y;\r\n        } else {\r\n            this.lineBlink.component.y = (fgui.GRoot.inst.height - this.lineBlink.component.height) / 2;\r\n        }\r\n\r\n        let t: fgui.Transition = this.lineBlink.component.getTransition(\"t0\");\r\n        t.play(() => {\r\n            fgui.GRoot.inst.removeChild(this.lineBlink.component);\r\n        });\r\n    } */\r\n\r\n    // 操作提示\r\n    onHandleGuide() {\r\n        if (!this.handleGuide) return;\r\n        let state: any = globalThis._.cloneDeep(this._state);\r\n        fgui.GRoot.inst.addChild(this.handleGuide.component);\r\n        if (this.handleGuide.pos) {\r\n            this.handleGuide.component.x = (fgui.GRoot.inst.width - this.handleGuide.component.width) / 2 + this.handleGuide.pos.x;\r\n            this.handleGuide.component.y = (fgui.GRoot.inst.height - this.handleGuide.component.height) / 2 + this.handleGuide.pos.y;\r\n        } else {\r\n            this.handleGuide.component.y = (fgui.GRoot.inst.height - this.handleGuide.component.height) / 2;\r\n        }\r\n\r\n        let t: fgui.Transition = this.handleGuide.component.getTransition(\"t0\");\r\n        t.play(() => {\r\n            fgui.GRoot.inst.removeChild(this.handleGuide.component);\r\n            state.submit = false;\r\n            this.updateState(state);\r\n        }, 2);\r\n    }\r\n\r\n    // 运行时 禁止操作\r\n    forbidHandle() {\r\n        let handleMask = this._worldRoot.getChildByName('handleMask');\r\n        if (!handleMask) {\r\n            let handleMask = new cc.Node('handleMask');\r\n            handleMask.addComponent(cc.BlockInputEvents);\r\n            handleMask.parent = this._worldRoot;\r\n            handleMask.width = 1920;\r\n            handleMask.height = 1080;\r\n            handleMask.x = 960;\r\n            handleMask.y = 540;\r\n        }\r\n    }\r\n\r\n    // 消除禁止\r\n    disableForbidHandle() {\r\n        let handleMask = this._worldRoot.getChildByName('handleMask');\r\n        if (handleMask) handleMask.destroy();\r\n    }\r\n\r\n    // 临时\r\n    // 拖拽定时器\r\n    dragSchedule() {\r\n        let s = this;\r\n        if (s._dragging) {\r\n            let state: any = globalThis._.cloneDeep(s._state);\r\n            state.drag = \"move\";\r\n            state.collider[state.colliderIndex] = {\r\n                x: this._colliderBox[state.colliderIndex].x,\r\n                y: this._colliderBox[state.colliderIndex].y,\r\n                collideredIndex: state.collider[state.colliderIndex].collideredIndex,\r\n                roleType: state.collider[state.colliderIndex].roleType\r\n            };\r\n            s.updateState(state);\r\n\r\n            /* state.curDragIconsPos = {\r\n                x: s._curDragIcon.x,\r\n                y: s._curDragIcon.y,\r\n            }; */\r\n        }\r\n    }\r\n\r\n    // 注册状态，及获取状态的方法\r\n    registerState() {\r\n        if (window['GlobalData'].sample.registerState) window['GlobalData'].sample.registerState.call(this);\r\n    }\r\n\r\n    // 解除状态，及获取状态的方法\r\n    relieveState() {\r\n        if (window['GlobalData'].sample.relieveState) window['GlobalData'].sample.relieveState.call(this);\r\n    }\r\n\r\n    // 本组件状态合并到全局\r\n    mergeState() {\r\n        if (window['GlobalData'].sample.mergeState) window['GlobalData'].sample.mergeState.call(this);\r\n    }\r\n\r\n    onEnable() {\r\n        this.registerState();\r\n        this.schedule(this.dragSchedule, this._scheduleTime);\r\n    }\r\n\r\n    onDisable() {\r\n        this.relieveState();\r\n        cc.audioEngine.stopAll();\r\n    }\r\n}\r\n"]}